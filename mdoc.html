<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title>Practical UNIX Manuals: mdoc</title>
		<link rel="stylesheet" href="css/book.css" type="text/css"/>
		<style type="text/css">
			.edits,
			.nav		{ display: none; }
			.full-edits	{ margin-top: 2em; color: #666666; font-size: smaller; }
		</style>
	</head>
	<body>
	<div class="page">
		<h1>
			Содержание
		</h1>
		<ol>
			<li class="toc-part">
				<a href="#preface">Предисловие</a>
			</li>
			<li class="toc-part">
				<a href="#part1">Введение</a>
				<ol>
					<li class="toc-chap">
						<a href="#part1-1">Команды</a>
						<ol>
							<li class="toc-sec"><a href="part1-1-1.html">Simple Command</a></li>
							<li class="toc-sec"><a href="part1-1-2.html">Elaborate Command</a></li>
							<li class="toc-sec"><a href="part1-1-3.html">Case Study</a></li>
						</ol>
					</li>
					<li class="toc-chap">
						<a href="part1-2.html">Functions</a>
						<ol>
							<li class="toc-sec"><a href="part1-2-1.html">Simple Function</a></li>
							<li class="toc-sec"><a href="part1-2-2.html">Elaborate Function</a></li>
							<li class="toc-sec"><a href="part1-2-3.html">Case Study</a></li>
						</ol>
					</li>
					<li class="toc-chap">
						<a href="part1-3.html">Function Library</a>
						<ol>
							<li class="toc-sec"><a href="part1-3-1.html">Case Study</a></li>
						</ol>
					</li>
					<li class="toc-chap">
						<a href="part1-4.html">System Call</a>
						<ol>
							<li class="toc-sec"><a href="part1-4-1.html">Case Study</a></li>
						</ol>
					</li>
				</ol>
			</li>
			<li class="toc-part">
				<a href="part2.html">Manual Syntax and Structure</a>
				<ol>
					<li class="toc-chap">
						<a href="part2-1.html">Syntax</a>
						<ol>
							<li class="toc-sec"><a href="part2-1-1.html">Input Encoding</a></li>
							<li class="toc-sec"><a href="part2-1-2.html">Escape Sequences</a></li>
							<li class="toc-sec"><a href="part2-1-3.html">Comments</a></li>
							<li class="toc-sec"><a href="part2-1-4.html">Macros</a></li>
							<li class="toc-sec"><a href="part2-1-5.html">Punctuation</a></li>
							<li class="toc-sec"><a href="part2-1-6.html">Quotation</a></li>
						</ol>
					</li>
					<li class="toc-chap">
						<a href="part2-2.html">Structure</a>
						<ol>
							<li class="toc-sec"><a href="part2-2-1.html">Prologue</a></li>
							<li class="toc-sec"><a href="part2-2-2.html">Document Body</a></li>
						</ol>
					</li>
					<li class="toc-chap">
						<a href="part2-3.html">Layout</a>
						<ol>
							<li class="toc-sec"><a href="part2-3-1.html">Required Sections</a></li>
							<li class="toc-sec"><a href="part2-3-2.html">Optional Sections</a></li>
						</ol>
					</li>
				</ol>
			</li>
			<li class="toc-part">
				<a href="part3.html">Tools</a>
				<ol>
					<li class="toc-chap">
						<a href="part3-1.html">Formatters</a>
						<ol>
							<li class="toc-sec"><a href="part3-1-1.html">groff (GNU troff)</a></li>
							<li class="toc-sec"><a href="part3-1-2.html">mandoc (mdocml)</a></li>
						</ol>
					</li>
					<li class="toc-chap">
						<a href="part3-2.html">Project Integration</a>
						<ol>
							<li class="toc-sec"><a href="part3-2-1.html">Build System</a></li>
							<li class="toc-sec"><a href="part3-2-2.html">Revision Control</a></li>
						</ol>
					</li>
					<li class="toc-chap">
						<a href="part3-3.html">Composition</a>
						<ol>
							<li class="toc-sec"><a href="part3-3-1.html">Editing</a></li>
							<li class="toc-sec"><a href="part3-3-2.html">Spell-checking</a></li>
							<li class="toc-sec"><a href="part3-3-3.html">Grammar &amp; Style</a></li>
						</ol>
					</li>
				</ol>
			</li>
			<li class="toc-part">
				<a href="part4.html">Appendices</a>
				<ol>
					<li class="toc-chap"><a href="glossary.html">Glossary</a></li>
					<li class="toc-chap"><a href="macros.html">Macros</a></li>
					<li class="toc-chap"><a href="commands.html">Commands</a></li>
				</ol>
			</li>
		</ol>
		<h1>
			<a class="toc-anchor" name="preface"></a> Предисловие
		</h1>
		<blockquote>
			<p>
				Утилита без руководства бесполезна для пользователя.
			</p>
		</blockquote>
		<p>
			Это руководство по написанию <a class="term" href="#man_pages">справочных страниц (man page)</a> для UNIX на языке
			<span class="lang">mdoc</span>. Если вы новичок в написании <a class="term" href="#man_pages">справочных страниц</a>
			для UNIX или хотите ознакомиться с рекомендациями по созданию высококачественных man, эта книга может принести пользу
			в вашей работе.
		</p>
		<p>
			Для тех, кто не знаком с <a class="term" href="#unix">UNIX</a>, <span class="lang">mdoc</span> - это язык для
			документирования утилит, функций программирования, файловых форматов, протоколов, интерфейсов аппаратных устройств и т.д.
			Под языком я подразумеваю структурированный, машиночитаемый формат документа, такой как <a class="term" href="#html">HTML</a>,
			основной язык веб-страниц; или <a class="term" href="#rtf">RTF</a>, используемый текстовыми редакторами. 
			<a href="#cmd_man" class="cmd">man</a> - это утилита для запроса документов на <span class="lang">mdoc</span>
			и другие языки, совместно называемые <a class="term" href="#man_pages">справочные страницы</a>.
		</p>
		<p>
			Ниже, например, приведён фрагмент <a href="#cmd_man" class="cmd">справочной страницы</a> команды <a href="#cmd_cat" class="cmd">cat</a>.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">cat</b> &#8212; <span class="mdoc-desc">concatenate and print files</span></div>
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<table class="mdoc-synopsis">
					<col style="width: 3.00ex;"/>
					<col/>
					<tbody>
						<tr>
							<td>
								cat
							</td>
							<td>
								&#91;<span class="mdoc-opt"><b class="mdoc-flag">&#45;benstuv</b></span>&#93; 
								&#91;<span class="mdoc-opt"><i class="mdoc-arg">file ...</i></span>&#93;
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="mdoc-section">
				<h1>DESCRIPTION</h1>
				The <b class="mdoc-name">cat</b> utility reads files sequentially, writing them to the standard output. The <i
					class="mdoc-arg">file</i> operands are processed in command-line order.  If <i class="mdoc-arg">file</i>
				is a single dash (&#8216;&#8203;-&#39;) or absent, <b class="mdoc-name">cat</b> reads from
				the standard input.
			</div>
		</div>
		<p>
			Почему <span class="lang">mdoc</span>?  В конце концов, существует множество других языков руководства для UNIX, от
			исторического <span class="lang">man</span> до <a class="term" href="#docbook">DocBook</a>.  Короче говоря, <span
				class="lang">mdoc</span> &mdash; это:
		</p>
		<ul>
			<li>
				переносимый, поскольку любая современная UNIX-система может отформатировать его, не прибегая к громоздким наборам инструментов;
			</li>
			<li>
				выразительный, улавливающий смысловое содержание справочных страниц, а не просто реплики к презентации;
			</li>
			<li>
				лаконичный, делающий управление версиями на основе строк безболезненным; и
			</li>
			<li>
				хорошо документированный, хорошо поддерживаемый и активно поддерживаемый сообществом опытных разработчиков.
			</li>
		</ul>
		<p>
			Ни один другой формат не может похвастаться всеми этими качествами сразу.
		</p>
		<p>
			На самом деле, хотя я уже несколько раз упоминал UNIX, <span class="lang">mdoc</span> не привязан исключительно к UNIX.
			Хотя UNIX и <span class="lang">mdoc</span> исторически связаны, открытый исходный код инструментов <span class="lang">mdoc</span>
			существуют для любой операционной системы. Кроме того, возможности документирования <span class="lang">mdoc</span>
			применимы к вычислительным системам в целом, а не только к UNIX.
		</p>
		<p>
			В этой книке, однако, я предполагаю что вы уже знакомы с командой <a href="#cmd_man" class="cmd">man</a>.
			Это позволит нам сосредоточиться на руководствах, имеющих одинаковый формат вывода. Таким образом, если вы не знакомы
			с утилитой <a href="#cmd_man" class="cmd">man</a>, сейчас самое время прочитать вводный текст по этому вопросу
			(например, руководство для начинающих в UNIX), или, по крайней мере, ознакомиться с вывод команды <span class="cmdline">
			man man</span> (справочная страница команды <a href="#cmd_man" class="cmd">man</a>).
		</p>
		<p>
			Это не официальная документация! Язык <span class="lang">mdoc</span> не стандартизирован. Для получения официальной информации
			обратитесь к руководству, прилагаемому к вашей целевой операционной системе. <span class="cmdline">man mdoc</span>.
			В этой работе в первую очередь рассматриваются элементы <span class="lang">mdoc</span> общие для любого применения UNIX,
			без каких-либо распространенных ошибок в переносимости.
		</p>
	</div>
	<div class="page">
		<h1>
			<a class="toc-anchor" name="part1"></a> Введение
		</h1>
		<p>
			Давайте начнем с практических примеров <span class="lang">mdoc</span>.
		</p>
		<p>
			Эта часть предназначена для тех, кто никогда не писал <span class="lang">mdoc</span> страницы. Хотя у вас может
			возникнуть соблазн перейти к главе, относящейся к вашему типу руководства (например, к библиотеке команд или функций),
			лучше читать главы по порядку. Я объясню синтаксис <span class="lang">mdoc по мере продвижения.
		</p>
		<p>
			Если вы уже написали несколько справочных страниц, возможно, вам все равно захочется прочитать эту часть:
			помимо объяснения технических концепций языка <span class="lang">mdoc</span> на примерах, я также представлю
			некоторые рекомендации и расскажу о переносимости между различными окружениями <span class="lang">mdoc.</span>.
		</p>
		<p>
			Я часто буду ссылаться на вывод на экран страниц <span class="lang"> mdoc </span>, отображаемых с помощью утилиты UNIX
			<a href="#cmd_man" class="cmd">man</a>. Кроме того, я буду ссылаться на вызов команд традиционным для UNIX способом - 
			в <a class="term" href="#command_line">коммандной строке</a>. Короче говоря, немного знаний о UNIX поможет избежать путаницы.
			Но я кратко представлю синтаксис вызова по мере необходимости.
		</p>
	</div>
	<div class="page">
		<h2 id="commands">
			<a class="toc-anchor" name="part1-1"></a> Команды
		</h2>
		<p>
			Команды &mdash; это способ, с помощью которого пользователь управляет своим компьютером. Я уже обращал внимание на команду
			<a href="#cmd_man" class="cmd">man</a>: если вы когда-либо взаимодействовали с системой UNIX, вы, вероятно, запускали как минимум
			<span class="cmdline">man intro</span> или <span class="cmdline">man man</span>, чтобы ознакомиться с вашей системой.
class
		</p>
		<p>
			In this chapter, I'll discuss how to document these commands with <span class="lang">mdoc</span>.  
		</p>
		<p>
			This may be unfamiliar if you're accustomed to graphical interfaces &mdash; all of our examples will refer to
			command-line, text-based commands.  If your target environment isn't a UNIX system, it's a good idea to read these
			examples anyway, as as they will expose the rudimentary structure of the <span class="lang">mdoc</span> language.  As
			mentioned before, reading an introductory text on UNIX will help avoid confusion.
		</p>
		<p>
			Let's begin by making a mental checklist for the criteria that make a good manual for a command.  This checklist arises
			by inverting what a manual reader expects in opening a manual: what does the command do and how do I operate it?
		</p>
		<ul>
			<li>
				Do I describe the calling syntax of the command?
			</li>
			<li>
				Do I describe each flag and argument of the command?
			</li>
			<li>
				Do I describe the command's operation?
			</li>
			<li>
				Do I describe the command's exit status?
			</li>
			<li>
				Do I describe referenced files and environment variables?
			</li>
		</ul>
		<p>
			Above all, the best litmus test is whether a colleague or friend can read your manual and be able to use your command
			without any assistance on your part.  Don't be discouraged by how this can take several tries to get right!
		</p>
		<p>
			I'll begin with a simple command, <span class="cmd">hi</span>, which prints <span class="screen">hello, world</span> to
			the screen.  I'll then add some command-line arguments to this command.  By the time you finish this chapter, you should
			have a grasp of <span class="lang">mdoc</span> syntax and some of its more widely-used macros.
		</p>
		<p>
			In this text, I'll refer to the invocation of commands as <span class="cmdline"><span class="cmd">cmd</span> <span
					class="cmdopt"><span class="cmdflag">flag</span> <span class="cmdarg">farg</span></span> <span
					class="cmdarg">arg</span></span>.  Here, <span class="cmd">cmd</span> refers to the command invocation
			name, <span class="cmdflag">flag</span> is a flag (or switch) to that command, <span class="cmdarg">farg</span> is an
			argument to a flag (not all flags have arguments), and <span class="cmdarg">arg</span> is an argument to the command.
		</p>
		<p>
			The dash in front of <span class="cmdflag">flag</span> indicates a flag, while the square brackets around <span
				class="cmdopt"><span class="cmdflag">flag</span> <span class="cmdarg">farg</span></span> indicate an optional
			part of the invocation.  Since <span class="cmdarg">arg</span> is not bracketed, it is a mandatory part of the
			invocation.
		</p>
		<p>
			This convention is formalised by the <a class="term" href="#posix">POSIX</a>.1-2008 standard (Base
			Definitions, sec. 12.1), so you can expect to see it often in the UNIX world.
		</p>
	</div>
	<div class="page">
		<h3>
			Simple Command
		</h3>
		<p>
			Consider a simple UNIX command <span class="cmd">hi</span> that prints <span class="screen">hello, world</span> and
			exits.  Let's create a manual page <span class="file">hi.1</span> documenting this command.  In this example, I'll begin
			with the full manual.  In later examples, we'll build up the manual piece by piece.
		</p>
		<div class="mdocin">
			.Dd May 30, 2011
			<br />
			.Dt HI 1
			<br />
			.Os
			<br />
			.Sh NAME
			<br />
			.Nm hi
			<br />
			.Nd print \(dqhello, world\(dq
			<br />
			.Sh SYNOPSIS
			<br />
			.Nm
			<br />
			.Sh DESCRIPTION
			<br />
			Print
			<br />
			.Qq hello, world
			<br />
			and exit.
		</div>
		<p>
			How to display this manual page depends on the system you're using.
		</p>
		<p>
			Traditionally, the command for formatting UNIX manuals for a <a class="term" href="#terminal">terminal</a>
			is <a class="cmd" href="#cmd_nroff">nroff</a>.  For now, let's stick with that.
		</p>
		<p>
			To display output, you must invoke <a href="#cmd_nroff" class="cmd">nroff</a> as <span class="cmdline">nroff
				-mandoc file</span>.  The <span class="cmdflag">mandoc</span> flag indicates that input is in <span
				class="lang">mdoc</span>.  Hereafter, I'll refer to <a href="#cmd_nroff" class="cmd">nroff</a>
			simply as <q>the formatter</q> to avoid confusion, as there are many available <span class="lang">mdoc</span>
			formatters.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">hi</b> &#8212; <span class="mdoc-desc">print &#34;hello, world&#34;</span>
			</div>
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<table class="mdoc-synopsis">
					<col style="width: 2.00ex;"/>
					<col/>
					<tbody>
						<tr>
							<td>
								hi
							</td>
							<td>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="mdoc-section">
				<h1>DESCRIPTION</h1>
				Print &#8220;hello, world&#8221; and exit.
			</div>
		</div>
		<p>
			Let's start by studying the input and output.  We can see most of the text translated into output, for instance, the
			capitalised <span class="screen">NAME</span> input is left-justified and in bold text.  Same with <span class="screen">
				SYNOPSIS</span> and <span class="screen">DESCRIPTION</span>, although the <span class="screen">.Sh</span> text
			before this terms is missing.  We can even see the output sentence <span class="screen">Print "hello, world" and
				exit</span> spread over lines 10&ndash;12:
		</p>
		<div class="mdocin">
			Print
			<br />
			.Qq hello, world
			<br />
			and exit.
		</div>
		<p>
			Let's take a closer look at this fragment.
		</p>
		<p>
			The <span class="screen">.Qq</span> is part of <span class="lang">mdoc</span>'s instruction syntax.  Input lines
			beginning with a dot are instructions to the formatter called mdoc macros, or just macros for short.  The macro name is
			a terse two or three-character word following the dot, for example, <a href="#macro_qq" class="macro">Qq</a>.
			The name of a macro tersely hints at its function.  The words following the <a href="#macro_qq"
				class="macro">Qq</a> to the end of line are arguments in the scope of the macro.
		</p>
		<p>
			Scope, a technical term in the field of programming languages, refers to the body of input within the context of an
			instruction or variable.  In <span class="lang">mdoc</span>, a macro's scope is the block of text and instructions in
			the formatting context of that macro.  Looking at the input and output, we can infer the scope of <a
				href="#macro_qq" class="macro">Qq</a> by seeing what's surrounded by quotes (the formatting, in this
			case).
		</p>
		<div class="mdocin">
			.Qq <span style="border: thin solid blue;">hello, world</span>
		</div>
		<div class="mdocout">
			<div class="mdoc-section">
				Print &#8220;<span style="border: thin solid blue;">hello, world</span>&#8221; and exit.
			</div>
		</div>
		<p>
			As we explore more and more macros in this book, we'll see that each macro follows one of a handful of scope rules.
			It's already clear that <a href="#macro_qq" class="macro">Qq</a> is limited in scope to its invocation line.
			But notice that the formatter recognised the content between <a href="#macro_sh" class="macro">Sh</a> macros
			as requiring indentation.  So it's clear that <span class="lang">mdoc</span> also has a concept of multi-line scope.  In
			fact, <a href="#macro_sh" class="macro">Sh</a> has both line arguments, for the name of the section; and
			multi-line arguments, for section content.
		</p>
		<div class="mdocin">
			.Sh SECTION 1
			<br />
			Section text.
			<br />
			.Sh SECTION 2
			<br />
			New section text.
		</div>
		<p>
			Furthermore, the existence of <a href="#macro_qq" class="macro">Qq</a> within the <a
				href="#macro_sh" class="macro">Sh</a> scope means that scopes may be nested.  In the next section
			we'll see how multiple macros may even be specified on a single line.
		</p>
		<div class="mdocin">
			.Sh SECTION 1
			<br />
			Section text.
			<br />
			.Sh SECTION 2
			<br />
			.Qq Section text nested in a quote.
		</div>
		<p>
			We can visualise this scoping as follows, with an <span style="border: 1px dashed green; padding: 1px;">outer scope</span>
			and <span style="border: 1px solid blue; padding: 1px;">inner scope</span>:
		</p>
		<div class="mdocin" style="border: 1px dashed green; padding: 2px;">
			.Sh SECTION 2
			<br />
			.Qq <span style="border: 1px solid blue;">Section text nested in a quote.</span>
		</div>
		<p>
			Now let's return to <span class="file">hi.1</span> with this new knowledge of macros and scopes.
		</p>
		<p>
			We see seven macros in total, <a href="#macro_dd" class="macro">Dd</a>, <a href="#macro_dt"
				class="macro">Dt</a>, <a href="#macro_os" class="macro">Os</a>, <a href="#macro_sh"
				class="macro">Sh</a>, <a href="#macro_nm" class="macro">Nm</a>, <a href="#macro_nd"
				class="macro">Nd</a>, and <a href="#macro_qq" class="macro">Qq</a>.  We know now that <a
				href="#macro_qq" class="macro">Qq</a> encloses its arguments in double-quotes, <a
				href="#macro_sh" class="macro">Sh</a> begins a named section with indented multi-line arguments.  
		</p>
		<p>
			Of the remaining macros, <a href="#macro_dd" class="macro">Dd</a> accepts the last modification date of the
			manual in <q>month day, year</q> format.  <a href="#macro_dt" class="macro">Dt</a> refers to the manual's
			title, <span class="screen">HI</span>, and its category, <span class="cat">1</span>.
			Numbered manual categories are UNIX conventions, but applicable to any operating system.  We'll explore more standard
			categories throughout this book.  Note that <span class="screen">HI</span> is uppercase: by convention, <a
				href="#macro_dt" class="macro">Dt</a> should always accept a capitalised document title.  We'll talk
			more about titles and sections in later chapters of this book.  For now, let's assume that a category number identifies
			the topic of the manual, where <span class="cat">1</span> refers to utilities.
		</p>
		<p>
			Next, <a href="#macro_os" class="macro">Os</a> indicates the operating system of the system running the
			formatter.  If left unspecified, the formatter will return the current operating system (e.g., <span
				class="screen">OpenBSD 4.9</span>, <span class="screen">Linux 2.6.32-5</span>, or <span class="screen">Microsoft
				Windows XP</span>).
		</p>
		<div class="mdocin">
			.Dd May 30, 2011
			<br />
			.Dt HI 1
			<br />
			.Os \" Current operating system.
		</div>
		<p>
			Note that text following the <span class="screen">\&quot;</span> marker is an <span class="lang">mdoc</span> comment,
			which has the following syntax:
		</p>
		<div class="mdocin">
			Text. \" Comment to end of the line.
			<br />
			.\" Extending across the full line.
		</div>
		<p>
			Comments are line-scoped, like <a href="#macro_qq" class="macro">Qq</a>:
		</p>
		<div class="mdocin">
			.\" <span style="border: thin solid blue;">.Sh NAME</span>
		</div>
		<p>
			Moving along, <a href="#macro_nm" class="macro">Nm</a> accepts the manual's name.  This differs from the
			title, <a href="#macro_dt" class="macro">Dt</a>, in that a single manual may document multiple components.
			We'll see examples of this in later chapters.  Finally, <a href="#macro_nd" class="macro">Nd</a> accepts a
			brief, one-line description of the command.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm hi
			<br />
			.Nd print \(dqhello, world\(dq
		</div>
		<p>
			You can see that we re-invoke <a href="#macro_nm" class="macro">Nm</a> in the <span
				class="sec">SYNOPSIS</span>, only without arguments.  The formatter is smart enough to fill in its argument
			with the last supplied argument, in this case being <span class="screen">hi</span>.
		</p>
		<p>
			Since our simple command has no command-line arguments, its invocation is simply the command name.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.Nm
		</div>
		<p>
			Piecing this all together, we now have the following.
		</p>
		<div class="mdocin">
			.Dd May 30, 2011
			<br />
			.Dt HI 1
			<br />
			.Os
			<br />
			.Sh NAME
			<br />
			.Nm hi
			<br />
			.Nd print \(dqhello, world\(dq
			<br />
			.Sh SYNOPSIS
			<br />
			.Nm
			<br />
			.Sh DESCRIPTION
			<br />
			Print
			<br />
			.Qq hello, world
			<br />
			and exit.
		</div>
		<p>
			In this example, you've noticed that <span class="screen">\(dqhello, world\(dq</span> has the same behaviour of the <a
				href="#macro_qq" class="macro">Qq</a> invocation.  In <span class="lang">mdoc</span>, quotation
			marks signify literal strings.  Thus, we used an escape character <span class="screen">\(dq</span> to render <span
				class="screen">&quot;</span>.
		</p>
		<p>
			You may ask why not just use <a href="#macro_qq" class="macro">Qq</a>, such as
		</p>
		<div class="mdocin">
			.Nd print
			<br />
			.Qq hello, world
		</div>
		<p>
			For the time being, assume that <a href="#macro_nd" class="macro">Nd</a> must have its scope on the
			invocation line.  Strictly-speaking, we could have written 
		</p>
		<div class="mdocin">
			.Nd print "hello, world"
		</div>
		<p>
			but this encourages dangerous behaviour in assuming that quoted arguments may not affect output.  This isn't always the
			case!  We'll see later how quoted terms on macro lines change the grouping of arguments &mdash; at times non-intuitively.
		</p>
		<p>
			Before moving on to the next section, let's look quickly over our checklist for a well-formed manual.
		</p>
		<dl>
			<dt>Did I describe the calling syntax of the command?</dt>
			<dd>Yes.  It was only the name of the macro (no arguments or flags).</dd>
			<dt>Did I describe each flag and argument of the command?</dt>
			<dd>There were none, so yes.</dd>
			<dt>Did I describe the command's operation?</dt>
			<dd>Yes, it prints <span class="screen">hello, world</span> and exits.</dd>
			<dt>Did I describe the command's exit status?</dt>
			<dd>No, we only mentioned that it exits.</dd>
			<dt>Did I describe referenced files and environment variables?</dt>
			<dd>This is not applicable.</dd>
		</dl>
		<p>
			To the effect of the exit status, let's modify the <span class="sec">DESCRIPTION</span> slightly for clarity.
		</p>
		<div class="mdocin">
			.Sh DESCRIPTION
			<br />
			Print
			<br />
			.Qq hello, world
			<br />
			and exit 0.
		</div>
		<p>
			Of course, our command must actually do so!  For simplicity's sake, let's assume that this is the case.
		</p>
		<p>
			With our simple, well-documented example in mind, let's move on to a more realistic UNIX command.
		</p>
	</div>
	<div class="page">
		<h3>
			Elaborate Command
		</h3>
		<p>
			Most UNIX commands have flags, arguments, return values, environmental variables, and so on.  So let's expand upon our
			example to include arguments for writing to an output file and a flag for outputting in uppercase letters.  Furthermore,
			we'll accept an optional prefix string on the command-line, and return non-zero on failure.
		</p>
		<p>
			This changes two parts of our manual: the <span class="sec">SYNOPSIS</span> section, where we'll record the invocation
			syntax of our command; and the <span class="sec">DESCRIPTION</span>, where we'll describe the command-line options.
			We'll also add a new section, <span class="sec">EXIT STATUS</span>, to describe the non-zero exit on failure.
		</p>
		<p>
			Let's start by documenting our command-line options in the <span class="sec">SYNOPSIS</span> section:
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS                  
			<br />
			.Nm                           
			<br />
			.Op Fl C                      
			<br />
			.Op Fl o Ar output            
			<br />
			.Op Ar prefix                 
		</div>
		<p>
			The output renders as follows:
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<table class="mdoc-synopsis">
					<col style="width: 5.00ex;"/>
					<col/>
					<tbody>
						<tr>
							<td>hello</td>
							<td>
								&#91;<span class="mdoc-opt"><b class="mdoc-flag">&#45;C</b></span>&#93; 
								&#91;<span class="mdoc-opt"><b class="mdoc-flag">&#45;o</b> 
									<i class="mdoc-arg">output</i></span>&#93; 
								&#91;<span class="mdoc-opt"><i class="mdoc-arg">prefix</i></span>&#93;
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<p>
			Already, we begin to see the output take shape with the <span class="screen">C</span> and <span class="screen">o</span>
			characters, and the <span class="screen">prefix</span>.  It's also clear that the <a class="macro"
				href="#macro_op">Op</a> macro surrounds its arguments in square brackets, just as <a class="macro"
				href="#macro_qq">Qq</a> surrounded its line in double-quotes.
		</p>
		<p>
			But how did the formatter know to prefix the <span class="screen">C</span> and <span class="screen">o</span> with a
			dash, or underline the arguments <span class="screen">output</span> and <span class="screen">prefix</span>?  
		</p>
		<p>
			It's obvious this has something to do with <span class="screen">Fl</span> and <span class="screen">Ar</span>.
		</p>
		<p>
			Macro lines may in fact consist of multiple macros &mdash; sometimes nesting further macros, sometimes closing prior
			scopes to begin one anew.  The <a href="#macro_fl" class="macro">Fl</a> and <a class="macro"
				href="#macro_ar">Ar</a> words are macros nested within the scope of <a class="macro"
				href="#macro_op">Op</a>.  However, while <a class="macro" href="#macro_op">Op</a>
			contains both of these child scopes, the <a class="macro" href="#macro_ar">Ar</a> macro closes out the <a
				href="#macro_fl" class="macro">Fl</a> scope and begin its own.
		</p>
		<div class="mdocin">
			<span style="border: 1px dashed green; padding: 2px;">.Op 
				<span style="border: 1px solid blue;">Fl C</span></span>
		</div>
		<div class="mdocin">
			<span style="border: 1px dashed green; padding: 2px;">.Op 
				<span style="border: 1px solid blue;">Fl o</span>
				<span style="border: 1px solid blue;">Ar output</span></span>
		</div>
		<div class="mdocin">
			<span style="border: 1px dashed green; padding: 2px;">.Op 
				<span style="border: 1px solid blue;">Ar prefix</span></span>
		</div>
		<p>
			<span style="border: 1px dashed green; padding: 1px;">Outer parts</span> are an outer scope, while <span style="border:
				1px solid blue; padding: 1px;">inner parts</span> are an inner scope.  Now it's easy to see how <a
				href="#macro_fl" class="macro">Fl</a> prefixes only the <span class="screen">C</span> with a dash
			and not the arguments following: its scope is closed out by <a href="#macro_ar" class="macro">Ar</a>.
		</p>
		<p>
			Note that to document a flag <span class="screen">Ar</span>, we would need to quote its arguments as <span
				class="screen">Fl "Ar"</span> (we'll later learn how to escape arguments with zero-width spaces to accomplish
			the same).  As there are many <span class="lang">mdoc</span> macros, a popular novice mistake is to unknowingly invoke a
			macro when expecting to print text.
		</p>
		<p>
			With our command syntax documented, let's document the arguments themselves.  To do so, we detail the meaning of flags
			and arguments in the <span class="sec">DESCRIPTION</span> section.
		</p>
		<div class="mdocin">
			The
			<br />
			.Nm
			<br />
			function prints
			<br />
			.Qq hello, world
			<br />
			and returns.
			<br />
			.Pp
			<br />
			Its arguments are as follows:
			<br />
			.Bl -tag -width Ds
			<br />
			.It Fl C
			<br />
			Print only uppercase letters.
			<br />
			.It Fl o Ar output
			<br />
			Write to file
			<br />
			.Ar output .
			<br />
			.It Ar prefix
			<br />
			Prefix the output with
			<br />
			.Ar prefix .
			<br />
			.El
		</div>
		<p>
			Immediately, we see the introduction of several new macros: <a href="#macro_pp" class="macro">Pp</a>, <a
				href="#macro_bl" class="macro">Bl</a>, <a href="#macro_it" class="macro">It</a>, and <a
				href="#macro_el" class="macro">El</a>.  More interestingly, we notice the text on the <a
				href="#macro_bl" class="macro">Bl</a> begins with a dash, just as when passing arguments on a
			command line.  This is the first instance of a macro that accepts flags.  
		</p>
		<p>
			The rendered output of this fragment is as follows.
		</p>
		<div class="mdocout">
			Its arguments are as follows:
			<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="mdoc-list mdoc-list-tag">
				<dt class="mdoc-list-tag" style="margin-top: 1.00em;">
					<b class="mdoc-flag">&#45;C</b></dt>
				<dd class="mdoc-list-tag" style="margin-left: 6.00ex;">
					Print only uppercase letters.</dd>
				<dt class="mdoc-list-tag" style="margin-top: 1.00em;">
					<b class="mdoc-flag">&#45;o</b> <i class="mdoc-arg">output</i></dt>
				<dd class="mdoc-list-tag" style="margin-left: 6.00ex;">
					Write to file <i class="mdoc-arg">output</i>.</dd>
				<dt class="mdoc-list-tag" style="margin-top: 1.00em;">
					<i class="mdoc-arg">prefix</i></dt>
				<dd class="mdoc-list-tag" style="margin-left: 6.00ex;">
					Prefix the output with <i class="mdoc-arg">prefix</i>.</dd>
			</dl>
		</div>
		<p>
			It should be clear that the <a href="#macro_pp" class="macro">Pp</a> macro, which always stands alone,
			introduces a vertical paragraph break.
		</p>
		<p>
			Earlier, I introduced the concept of a multi-line scope for <a href="#macro_sh" class="macro">Sh</a>, which
			was closed and re-opened by subsequent invocations of <a href="#macro_sh" class="macro">Sh</a>.  In this
			fragment, the <a href="#macro_bl" class="macro">Bl</a> macro (for <q>begin list</q>) is explicitly closed
			out by the <a href="#macro_el" class="macro">El</a> macro (<q>end list</q>).  This is an example of explicit
			scope closure, versus the implicit scope closure of <a href="#macro_sh" class="macro">Sh</a> sequences.
		</p>
		<p>
			Predictably, the <a href="#macro_bl" class="macro">Bl</a> and <a href="#macro_el"
				class="macro">El</a> enclosure consists of list items, begun by the multi-line <a href="#macro_it"
				class="macro">It</a> macro lines.  Like <a href="#macro_sh" class="macro">Sh</a>, the <a
				href="#macro_it" class="macro">It</a> macro has its scope closed by subsequent invocations of <a
				href="#macro_it" class="macro">It</a>.  As expected, its scope also closes when the surrounding list
			is closed with <a href="#macro_el" class="macro">El</a>.
		</p>
		<p>
			Until now, we've discussed only macros and macro arguments.  But a handful of macros &mdash; <a
				href="#macro_bl" class="macro">Bl</a> included &mdash; also accept flags which themselves may have
			arguments.  In our example, the <span class="macroflag">tag</span> flag to <a href="#macro_bl"
				class="macro">Bl</a> stipulates a tagged list.  A tagged list entry consists of two parts: a tag and data,
			similar to the <span class="screen">&lt;DL&gt;</span> descriptive lists in <a href="#html">HTML</a>
			consisting of a key and data.  <a href="#macro_bl" class="macro">Bl</a> accepts a second flag, <span
				class="macroflag">width</span>, which accepts the argument <span class="macroarg">Ds</span>.  This instructs the
			formatter that the tag portion of the list has width <span class="screen">Ds</span>, which is shorthand for default
			spacing.
		</p>
		<p>
			Next, let's look closer at the input line 
		</p>
		<div class="mdocin">
			.Ar prefix .
		</div>
		<p>
			Note that it's correctly rendered with the period flushed up against the text, whereas the period is space-separated in
			the input.  (The period itself isn't font-decorated, although this is difficult to see in the media you're reading.)
		</p>
		<div class="mdocout">
			<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="mdoc-list mdoc-list-tag">
				<dt class="mdoc-list-tag">
					<i class="mdoc-arg">prefix</i></dt>
				<dd class="mdoc-list-tag" style="margin-left: 6.00ex;">
					Prefix the output with <i class="mdoc-arg">prefix</i>.</dd>
			</dl>
		</div>
		<p>
			By making the punctuation a separate argument, we distinguish it from the term <span class="screen">prefix</span>, and
			thus it is not underlined.  The formatter is smart enough to distinguish standalone punctuation.  When writing an <span
				class="lang">mdoc</span> manual, punctuation should always be separated from macro arguments unless it's part of
			the argument itself.  This allows the formatter to correctly intuit end-of-line spacing.
		</p>
		<p>
			If we hadn't done so, the formatter wouldn't distinguish period from word.  This is more intuitive when re-using the
			familiar <a href="#macro_qq" class="macro">Qq</a>.
		</p>
		<div class="mdocin">
			.Qq <span style="border: thin solid blue;">first</span> .
		</div>
		<div class="mdocin">
			.Qq <span style="border: thin solid blue;">second.</span>
		</div>
		<p>
			We can now see the difference in the placement of punctuation:
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				&#8220;<span style="border: thin solid blue;">first</span>&#8221;. 
				&#8220;<span style="border: thin solid blue;">second.</span>&#8221;
			</div>
		</div>
		<p>
			Let's piece this all together.  You'll recognise the <a href="#macro_dd" class="macro">Dd</a>, <a
				href="#macro_dt" class="macro">Dt</a>, and <a href="#macro_os" class="macro">Os</a>
			macros from the last section, although the <a href="#macro_dt" class="macro">Dt</a> argument has changed
			with our command name.
		</p>
		<div class="mdocin">
			.Dd May 30, 2011
			<br />
			.Dt HELLO 1
			<br />
			.Os
			<br />
			.Sh NAME
			<br />
			.Nm hello
			<br />
			.Nd print \(dqhello, world\(dq
			<br />
			.Sh SYNOPSIS
			<br />
			.Nm 
			<br />
			.Op Fl C 
			<br />
			.Op Fl o Ar output 
			<br />
			.Op Ar prefix 
			<br />
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Nm
			<br />
			function prints
			<br />
			.Qq hello, world
			<br />
			and returns.
			<br />
			.Pp 
			<br />
			Its arguments are as follows:
			<br />
			.Bl -tag -width Ds 
			<br />
			.It Fl C
			<br />
			Print only uppercase letters.
			<br />
			.It Fl o Ar output 
			<br />
			Write to file
			<br />
			.Ar output .
			<br />
			.It Ar prefix
			<br />
			Prefix the output with
			<br />
			.Ar prefix .
			<br />
			.El
		</div>
		<p>
			Notice that we don't repeat the <a class="macro" href="#macro_op">Op</a> macros in the <span
				class="sec">DESCRIPTION</span>, although we stipulate them in the <span class="sec">SYNOPSIS</span>.  This is
			because we document the flags and arguments themselves in the <span class="sec">DESCRIPTION</span>, not the calling
			syntax of the command.
		</p>
		<p>
			Finally, let's accomodate for command errors by stipulating the exit status of the command.  To do this, we add a new
			section to the end of the manual, <span class="sec">EXIT STATUS</span>, consisting of a single macro.  We didn't add
			this to <span class="file">hi.1</span> because we didn't stipulate any exit state; however, it's good practise to always
			include this section, even if your command only exits in one way.
		</p>
		<div class="mdocin">
			.Sh EXIT STATUS
			<br />
			.Ex -std
		</div>
		<p>
			The <a href="#macro_ex" class="macro">Ex</a> macro is special in that it always accepts a flag, <span
				class="macroflag">std</span>.  This is by convention.  Although you can specify an argument to <a
				href="#macro_ex" class="macro">Ex</a>, it works like <a href="#macro_nm"
				class="macro">Nm</a> without arguments in that it reproduces the name of the document as last invoked with <a
				href="#macro_nm" class="macro">Nm</a>.  It prints a standardised message about the exit status of
			the command.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>EXIT STATUS</h1>
				The <b class="mdoc-utility">hello</b> utility exits 0 on success, and &gt;0 if an error occurs.
			</div>
		</div>
		<p>
			With our manual complete, let's go over our checklist.
		</p>
		<dl>
			<dt>Did I describe the calling syntax of the command?</dt>
			<dd>Yes, including flags and arguments.</dd>
			<dt>Did I describe each flag and argument of the command?</dt>
			<dd>Yes for all flags and arguments.</dd>
			<dt>Did I describe the command's operation?</dt>
			<dd>Yes, that it prints <span class="screen">hello, world</span>.</dd>
			<dt>Did I describe the command's exit status?</dt>
			<dd>Yes, that it returns a non-zero exit code on failure.</dd>
			<dt>Did I describe referenced files and environment variables?</dt>
			<dd>This is not applicable to this manual.</dd>
		</dl>
		<p>
			Of course, most real manuals have many other useful bits of information, such as author names, referenced standards,
			files, and so on.  I'll describe these in detail in later chapters of this book.
		</p>
	</div>
	<div class="page">
		<h3 id="case_study_cmd">
			Case Study
		</h3>
		<p>
			I now introduce a case study of a real-world manual, in particular the <a href="#cmd_echo"
				class="cmd">echo</a> utility from <a class="term" href="#openbsd">OpenBSD</a>.  The original file
			may be viewed on-line at <a class="external"
				href="http://www.openbsd.org/cgi-bin/cvsweb/src/bin/echo/echo.1">src/bin/echo/echo.1</a>, file version 1.20.  I
			choose this mainly because of its simplicity.
		</p>
		<div class="mdocin">
			.\"&nbsp;&nbsp;&nbsp;&nbsp;$&#8203;OpenBSD: echo.1,v 1.20 2010/09/03 09:53:20 jmc Exp $&#8203;
			<br />
			.\"&nbsp;&nbsp;&nbsp;&nbsp;$&#8203;NetBSD: echo.1,v 1.7 1995/03/21 09:04:26 cgd Exp $&#8203;
		</div>
		<p>
			These initial comments are automatically created by the source-control system <a href="#cmd_cvs"
				class="cmd">cvs</a>, which fills in information about the last editor.  I'll talk about revision control and
			those funny dollar-sign enclosures in <a href="part3.html">Part 3</a>.  These particular comments indicate that the file
			was initially imported from <a class="term" href="#netbsd">NetBSD</a> in 1995, where it was last edited by
			<span class="screen">cgd</span> (a system name, not the user's real name).  It was last edited in OpenBSD, its current
			form, by <span class="screen">jmc</span> in 2010.
		</p>
		<p>
			If you're keeping your manual under source control, it's usually a good idea to begin your file with a similar line.
		</p>
		<div class="mdocin">
			.\"&nbsp;&nbsp;&nbsp;&nbsp;$&#8203;Id$
		</div>
		<p>
			A tab character separates the comment marker from the text.  Again, this will be covered later in this book &mdash;
			don't worry if it looks strange.
		</p>
		<div class="mdocin">
			.\" Copyright (c) 1990, 1993
			<br />
			.\"	The Regents of the University of California.  All rights reserved.
			<br />
			.\"
			<br />
			.\" This code is derived from software contributed to Berkeley by
			<br />
			.\" the Institute of Electrical and Electronics Engineers, Inc.
			<br />
			.\"
			<br />
			.\" Redistribution and use in source and binary forms, with or without
			<br />
			.\" modification, are permitted provided that the following conditions
			<br />
			.\" are met:
			<br />
			.\" 1. Redistributions of source code must retain the above copyright
			<br />
			.\"    notice, this list of conditions and the following disclaimer.
			<br />
			.\" 2. Redistributions in binary form must reproduce the above copyright
			<br />
			.\"    notice, this list of conditions and the following disclaimer in the
			<br />
			.\"    documentation and/or other materials provided with the distribution.
			<br />
			.\" 3. Neither the name of the University nor the names of its contributors
			<br />
			.\"    may be used to endorse or promote products derived from this software
			<br />
			.\"    without specific prior written permission.
			<br />
			.\"
			<br />
			.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
			<br />
			.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
			<br />
			.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
			<br />
			.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
			<br />
			.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
			<br />
			.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
			<br />
			.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
			<br />
			.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
			<br />
			.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
			<br />
			.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
			<br />
			.\" SUCH DAMAGE.
		</div>
		<p>
			This long comment is the license and copyright of the source file.  Of course, our use of this source file is compatible
			with the license, as may be read from the text itself!
		</p>
		<div class="mdocin">
			.\"	@(#)echo.1	8.1 (Berkeley) 7/22/93
		</div>
		<p>
			This comment is of historical note.  The <span class="screen">@(#)</span> sequence was inserted by the <a
				href="#cmd_sccs" class="cmd">sccs</a> utility (Source Code Control System).  Although this utility
			is part of <a class="term" href="#posix">POSIX</a>.1-2008, it has mostly been replaced by <a
				href="#cmd_cvs" class="cmd">cvs</a>.  You'll probably never encounter this string in your own
			manuals, so it's safe to disregard.
		</p>
		<p>
			At this point the manual content itself begins.
		</p>
		<div class="mdocin">
			.Dd $&#8203;Mdocdate: September 3 2010 &#8203;$
			<br />
			.Dt ECHO 1
			<br />
			.Os
		</div>
		<p>
			This indicates that the manual's title is <span class="screen">ECHO</span> in category <span class="cat">1</span>
			(utilities) for the current installed operating system.  The <span class="screen">$&#8203;Mdocdate$</span> enclosure is
			similar to that as defined at the top of the file with <span class="screen">$&#8203;OpenBSD$</span>.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm echo
			<br />
			.Nd write arguments to the standard output
		</div>
		<p>
			This documents a single command, the <a href="#cmd_echo" class="cmd">echo</a> command, which does as
			mentioned.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.Nm echo
			<br />
			.Op Fl n
			<br />
			.Op Ar string ...
		</div>
		<p>
			The command accepts a single optional flag, <span class="cmdflag">n</span>, and an arbitrary number of optional
			arguments <span class="cmdarg">string</span>.  Note that re-stating the command name for the <a
				href="#macro_nm" class="macro">Nm</a> is superfluous in this case.
		</p>
		<div class="mdocin">
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Nm
			<br />
			utility writes any specified operands, separated by single blank
			<br />
			.Pq Sq \ \&amp;
			<br />
			characters and followed by a newline
			<br />
			.Pq Sq \en
			<br />
			character, to the standard
			<br />
			output.
			<br />
			When no operands are given, only the newline is written.
		</div>
		<p>
			The <span class="sec">DESCRIPTION</span> opens with a brief explanation of the utility and its output.  The strange set
			of backslash-escaped characters <span class="screen">\ \&amp;</span> is required to make the doubly-nested macros <a
				href="#macro_pq" class="macro">Pq</a> and <a href="#macro_sq" class="macro">Sq</a>
			(parenthesise and single-quote, respectively) correctly enclose a single space.
		</p>
		<div class="mdocin">
			.Pp
			<br />
			The options are as follows:
			<br />
			.Bl -tag -width Ds
			<br />
			.It Fl n
			<br />
			Do not print the trailing newline character.
			<br />
			.El
		</div>
		<p>
			This follows the standard form of documenting flags and arguments as a term/definition list.  Each one &mdash; in this
			case only one &mdash; is documented in alphabetical order.
		</p>
		<div class="mdocin">
			.Sh EXIT STATUS
			<br />
			.Ex -std echo
		</div>
		<p>
			Notes the standard exit sequence.  Note that the argument to <a href="#macro_ex" class="macro">Ex</a> is
			superfluous, as only one command is listed for the manual.
		</p>
		<div class="mdocin">
			.Sh SEE ALSO
			<br />
			.Xr csh 1 ,
			<br />
			.Xr ksh 1 ,
			<br />
			.Xr printf 1
		</div>
		<p>
			Although these weren't cited in other sections of the manual, the author felt it necessary to link to them.  This is
			probably because both <span class="screen">csh</span> and <span class="screen">ksh</span> include internal
			implementations of a function by the same name.
		</p>
		<div class="mdocin">
			.Sh STANDARDS
			<br />
			The
			<br />
			.Nm
			<br />
			utility is compliant with the
			<br />
			.St -p1003.1-2008
			<br />
			specification.
			<br />
			.Pp
			<br />
			The flag
			<br />
			.Op Fl n
			<br />
			is an extension to that specification.
			<br />
			.Pp
			<br />
			.Nm
			<br />
			also exists as a built-in to
			<br />
			.Xr csh 1
			<br />
			and
			<br />
			.Xr ksh 1 ,
			<br />
			though with a different syntax.
		</div>
		<p>
			This last section fully describes the utility's conformance to the <a class="term" href="#posix">POSIX</a>
			standard, which is very important to those writing portable utilities.  The <a href="#macro_st"
				class="macro">St</a> macro expands into the relevant standard's full name, <span class="screen">IEEE Std
				1003.1-2008 (&#8220;POSIX.1&#8221;)</span>.  For a full list of standards, consult your local documentation for
			the macro.
		</p>
	</div>
	<div class="page">
		<h2 id="functions">
			Functions
		</h2>
		<p>
			Programming functions are a significant part of the UNIX canon, from the system call interface to the <a class="term"
				href="#libc">C library</a>.  If you're a C or C++ developer, chances are you've at least glanced
			through the manuals of functions such as <span class="func">socket</span>, <span class="func">printf</span>, or <span
				class="func">memmove</span>.
		</p>
		<p>
			In general, the <span class="lang">mdoc</span> macros used for documenting programming functions are the same as those
			used for <a href="#commands">Commands</a>; however, there are some domain-specific bits to annotate the
			various parts of function versus command invocation.  You'll see that each command invocation macro, such as 
			<a href="#macro_fl" class="macro">Fl</a> for a flag, has an analogue for programming functions, such as
			the <a href="#macro_fa" class="macro">Fa</a>, for a function argument.
		</p>
		<p>
			The <span class="lang">mdoc</span> format is used primarily for the <a class="term" href="#c">C language</a>
			and Fortran, but it works with C++, Perl, Tcl, and other imperative languages.  In fact, most any language with
			functions (or subroutines) and variables will work, typed or not.  In this book, I focus exclusively on the C language.
			This is due to the overwhelming presence of C libraries and functions documented with <span class="lang">mdoc</span>.
		</p>
		<p>
			Before beginning, we need to change our mental checklist for a complete manual.  Since function manuals can document
			more than just function parts, our manual must grow to account for complexity.
		</p>
		<ul>
			<li>Do I describe the preprocessing and linking information?</li>
			<li>Do I describe the calling syntax of each function and variable?</li>
			<li>Do I describe the type of each function and variable?</li>
			<li>Do I describe each argument in each calling syntax?</li>
			<li>Do I describe each function's operation?</li>
			<li>Do I describe each function's side effects?</li>
		</ul>
		<p>
			A function is any callable instruction, be it a C function, routine, or macro.  A variable may also be a C variable or
			macro.  I'll consistently use the function and variable terminology in this book.
		</p>
		<p>
			In general, you don't have to be knowledgeable of C to understand this section, but it helps to have a grasp of basic
			programming structure, such as functions, function prototypes, and header files.  In any event, I'll refer to a header
			file as a text file consisting of function prototypes.  Header files for the C language, such as in our examples, end
			with the <span class="file">.h</span> suffix.  A C function prototype indicates the calling syntax of a function, such
			as the following.
		</p>
		<div class="mdocin">
			int
			<br />
			isspace(int c);
		</div>
		<p>
			In this, the C function <span class="screen">isspace</span>, notationally referred to as <span
				class="func">isspace</span>, has a single argument <span class="screen">int c</span> (an integer named <span
				class="var">c</span>) and returns a value of type <span class="type">int</span> (another integer).  Multiple
			arguments are comma-separated.
		</p>
	</div>
	<div class="page">
		<h3>
			Simple Function
		</h3>
		<p>
			Let's study a simple C function, <span class="func">hi</span>, which prints <span class="screen">hello, world</span>
			just like in prior sections.  We begin with the familiar first macros.
		</p>
		<div class="mdocin">
			.Dd May 30, 2011
			<br />
			.Dt HI 3
			<br />
			.Os
			<br />
			.Sh NAME
			<br />
			.Nm hi
			<br />
			.Nd print \(dqhello, world\(dq
		</div>
		<p>
			All that's changed is the manual category, from <span class="cat">1</span> to <span class="cat">3</span>.  We'll discuss
			manual categories later in this book.  Suffice to say that programming functions and libraries (not system calls!) are
			in category <span class="cat">3</span>.
		</p>
		<p>
			The calling syntax of our function is documented in the <span class="sec">SYNOPSIS</span> section.  Assume that our
			function prototype is within the header file <span class="file">hi.h</span> as <span class="screen">void
				hi(void)</span>, which, in non-programming terms, declares that a function <span class="screen">hi</span>
			accepts no arguments and does not return a value.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.In hi.h
			<br />
			.Ft void
			<br />
			.Fn hi
		</div>
		<p>
			This introduces three unfamiliar macros.  The <a href="#macro_in" class="macro">In</a> macro specifies an
			include file that interfacing programmes will need to include.  The <a href="#macro_ft" class="macro">Ft</a>
			and <a href="#macro_fn" class="macro">Fn</a> macros collectively document the function (return) type and
			function name.  Since not all languages have return types, the <a href="#macro_ft" class="macro">Ft</a>
			macro is optional in this context.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<b class="mdoc-includes">#include &lt;<span class="mdoc-link-includes">hi.h</span>&gt;</b><p></p>
				<i class="mdoc-ftype">void</i>
				<br/>
				<b class="mdoc-fname">hi</b>();
			</div>
		</div>
		<p>
			By now it comes as no surprise that <a href="#macro_ft" class="macro">Ft</a> is scoped to the end of its
			line, as is <a href="#macro_fn" class="macro">Fn</a> in this example.  In fact, both of these macros are
			syntactically similar to the <a href="#macro_ar" class="macro">Ar</a> and <a href="#macro_fl"
				class="macro">Fl</a> found in the first chapter: their scopes are closed by subsequent macros on the same line.
		</p>
		<p>
			Since our function has no arguments or return values, all we need to do is add some bits in the <span
				class="sec">DESCRIPTION</span> section to complete this manual. 
		</p>
		<div class="mdocin">
			.Dd May 30, 2011
			<br />
			.Dt HI 3
			<br />
			.Os
			<br />
			.Sh NAME
			<br />
			.Nm hi
			<br />
			.Nd print \(dqhello, world\(dq
			<br />
			.Sh SYNOPSIS 
			<br />
			.In hi.h
			<br />
			.Ft void 
			<br />
			.Fn hi
			<br />
			.Sh DESCRIPTION 
			<br />
			The
			<br />
			.Fn hi
			<br />
			function prints
			<br />
			.Qq hello, world 
			<br />
			and returns.
			<br />
			.Pp
			<br />
			It has no arguments.
		</div>
		<p>
			Here, you'll notice a difference between a function and command manual.  It's clear that we refer back to our invoked
			command using <a href="#macro_fn" class="macro">Fn</a> instead of <a href="#macro_nm"
				class="cmd">Nm</a>.  Why is this?  The <a href="#macro_nm" class="macro">Nm</a> macro, when used in
			the body of a manual, refers to the command name, <i>not</i> the manual name, as we used <a href="#macro_nm"
				class="macro">Nm</a> to annotate that utility name in the <span class="sec">SYNOPSIS</span>.  In functions, we
			use the <a href="#macro_fn" class="macro">Fn</a> macro.  The difference is that <a href="#macro_fn"
				class="macro">Fn</a> won't repeat the manual name if used without arguments.  This complexity is simply the
			result of poor planning in the <span class="lang">mdoc</span> language.
		</p>
		<p>
			Let's visualise the output so far:
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">hi</b> &#8212; <span class="mdoc-desc">print &#34;hello, world&#34;</span>
			</div>
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<b class="includes">#include &lt;<span class="link-includes">hi.h</span>&gt;</b>
				<p></p>
				<i class="ftype">void</i>
				<br />
				<b class="fname">hi</b>();
			</div>
			<div class="mdoc-section">
				<h1>DESCRIPTION</h1> 
				The <b class="fname">hi</b>() function prints &#8220;hello, world&#8221; and returns.
				<p></p>
				It has no arguments.
			</div>
		</div>
		<p>
			Lastly, let's stipulate the function return value in its own section, <span class="sec">RETURN VALUES</span>.  This
			mirrors the <span class="sec">EXIT STATUS</span> introduced for <span class="file">hello.1</span>.  Although we don't
			have a return value, it's good practise to include this section anyway.
		</p>
		<div class="mdocin">
			.Sh RETURN VALUES
			<br />
			The
			<br />
			.Fn hi
			<br />
			function does not return a value.
		</div>
		<p>
			Although this example is instructive, it's quite simple.  Let's review our checklist before moving on.
		</p>
		<dl>
			<dt>Did I describe the preprocessing and linking information?</dt>
			<dd>Yes, a header file.  There is no linking information.</dd>
			<dt>Did I describe the calling syntax of each function and variable?</dt>
			<dd>Yes, the <span class="func">hi</span> function.</dd>
			<dt>Did I describe the type of each function and variable?</dt>
			<dd>Yes, as <span class="func">hi</span> has neither type nor value.</dd>
			<dt>Did I describe each argument in each calling syntax?</dt>
			<dd>This does not apply, as it has none.</dd>
			<dt>Did I describe each function's operation?</dt>
			<dd>Yes, in that it prints <span class="screen">hello, world</span>.</dd>
			<dt>Did I describe each function's side effects?</dt>
			<dd>This does not apply, as it has none.</dd>
		</dl>
		<p>
			Very few real-world functions are so simple.  In the next section, we introduce a more practical function with types and
			arguments.
		</p>
	</div>
	<div class="page">
		<h3 id="elaborate_function">
			Elaborate Function
		</h3>
		<p>
			Let's also study a function form of the elaborate command example.  Again, I'll use C as my example.  Since this is a
			bit more involved, you may feel a little lost if you're not familiar with C programming.  I'll keep the technical jargon
			to a minimum.
		</p>
		<p>
			Let's re-write <span class="func">hi</span> as <span class="func">hello</span>, accepting a Boolean (zero or one)
			integer of whether to capitalise, and an optional character string (a word) prefix.  Let's also stipulate an integer
			return value.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.In hello.h
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "int C"
			<br />
			.Fa "const char *prefix"
			<br />
			.Fc
		</div>
		<p>
			If you're not familiar with C, the <span class="screen">const char *</span> and <span class="screen">int</span> parts
			are part of the C language.  Note that the <span class="screen">C</span> and <span class="screen">prefix</span> names
			haven't changed.
		</p>
		<p>
			The include file (<a href="#macro_in" class="macro">In</a>) and function return type (<a
				href="#macro_ft" class="macro">Ft</a>) are unchanged but for the type (<span class="type">int</span>
			instead of <span class="type">void</span>).  I've added an explicit-scope macro pair <a href="#macro_fo"
				class="macro">Fo</a> and <a href="#macro_fc" class="macro">Fc</a>, syntactically like <a
				href="#macro_bl" class="macro">Bl</a> and <a href="#macro_el" class="macro">El</a>, that
			encloses the function's arguments.
		</p>
		<p>
			This renders as follows.  Note that the formatter is smart enough to comma-separate the <a href="#macro_fa"
				class="macro">Fa</a> macros.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<b class="mdoc-includes">#include &lt;<span class="mdoc-link-includes">hello.h</span>&gt;</b>
				<p></p>
				<i class="mdoc-ftype">int</i>
				<br/>
				<b class="mdoc-fname">hello</b>(<i class="mdoc-farg">int C</i>, <i class="mdoc-farg">const char *prefix</i>);
			</div>
		</div>
		<p>
			It's clear that the <a href="#macro_fo" class="macro">Fo</a> macro accepts the function name (as <a
				href="#macro_fn" class="macro">Fn</a> did for the simple example), but it also opens a function
			prototype scope.  This scope is closed by <a href="#macro_fc" class="macro">Fc</a>.  The contained <a
				href="#macro_fa" class="macro">Fa</a> macros are for function arguments.
		</p>
		<p>
			If you're wondering why I didn't use <a href="#macro_fn" class="macro">Fn</a> as in the last section, it's a
			matter of readability.  Using <a href="#macro_fn" class="macro">Fn</a> puts everything on one long line,
			such as the following.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.In hello.h
			<br />
			.Ft int
			<br />
			.Fn hello "int C" "const char *prefix"
		</div>
		<p>
			This works with two arguments, but can quickly run into long lines.  In general, your <span class="lang">mdoc</span>
			manual shouldn't exceed 78 characters per line.  Shorter lines are useful when managing manuals in <a class="cmd"
				href="#cmd_cvs">cvs</a> or other version management systems &mdash; we'll discuss this in later
			sections of this book.
		</p>
		<p>
			The quoted arguments to <a href="#macro_fa" class="macro">Fa</a> may seem superfluous, but each argument to the <a href="#macro_fa"
				class="macro">Fa</a>, for the C language, refers to a type and variable name.  Since one may specify several
			arguments to a single <a href="#macro_fa" class="macro">Fa</a>, the quotes are necessary for signifying a single argument type and
			name.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.In hello.h
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "<span style="border: thin solid blue;">int C</span>" 
			    "<span style="border: thin solid blue;">const char *prefix</span>"
			<br />
			.Fc
		</div>
		<p>
			This renders as follows, with the <a href="#macro_fa" class="macro">Fa</a> scope highlighted.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1> 
				<b class="mdoc-includes">#include &lt;<span class="link-includes">hi.h</span>&gt;</b>
				<p></p>
				<i class="mdoc-ftype">void</i>
				<br />
				<b class="mdoc-fname">hello</b>(<i class="mdoc-farg" style="border: thin solid blue;">int C</i>, 
				<i class="mdoc-farg" style="border: thin solid blue;">const char *prefix</i>);
			</div>
		</div>
		<p>
			In the C language, function prototypes don't necessarily need named function arguments.  However, it's good practise to
			name arguments when documenting them in the <span class="sec">SYNOPSIS</span> so that we can consistently refer to them later on in the
			manual.  Let's refer to them now in the <span class="sec">DESCRIPTION</span>, where we document our arguments.
		</p>
		<p>
			Note that there are no set conventions for documenting function arguments in the <span class="sec">DESCRIPTION</span>
			body.  Sometimes this is done within the flow of a regular sentence.  Other times, as below, we'll introduce each
			argument as part of a list.
		</p>
		<div class="mdocin">
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Fn hello
			<br />
			function prints
			<br />
			.Qq hello, world .
			<br />
			.Pp
			<br />
			It accepts the following arguments:
			<br />
			.Bl -tag -width Ds
			<br />
			.It Fa "int C"
			<br />
			Non-zero if the output should be uppercase.
			<br />
			.It Fa "const char *prefix"
			<br />
			A prefix to precede the output or NULL for no prefix.
			<br />
			.El
		</div>
		<p>
			Here, we see the familiar <a href="#macro_bl" class="macro">Bl</a> and <a href="#macro_el"
				class="macro">El</a> list enclosure.  Notice how I re-use the <a href="#macro_fa"
				class="macro">Fa</a> macro to document individual arguments, just like I re-used <a href="#macro_fl"
				class="macro">Fl</a> and <a href="#macro_ar" class="macro">Ar</a> when documenting command-line
			flags and arguments.  In the last section, I mentioned why we use <a href="#macro_fn" class="macro">Fn</a>
			instead of <a href="#macro_nm" class="macro">Nm</a> for re-stating the name.
		</p>
		<p>
			This renders as follows.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>DESCRIPTION</h1>
				The <b class="mdoc-name">hello</b>() function prints &#8220;hello, world&#8221;.<p></p>
				It accepts the following arguments:
				<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="mdoc-list mdoc-list-tag">
					<dt class="mdoc-list-tag" style="margin-top: 1.00em;">
						<i class="mdoc-farg">int C</i></dt>
					<dd class="mdoc-list-tag" style="margin-left: 6.00ex;">
						Non-zero if the output should be uppercase.</dd>
					<dt class="mdoc-list-tag" style="margin-top: 1.00em;">
						<i class="mdoc-farg">const char *prefix</i></dt>
					<dd class="mdoc-list-tag" style="margin-left: 6.00ex;">
						A prefix to precede the output or NULL for no prefix.</dd>
				</dl>
			</div>
		</div>
		<p>
			Finally, let's add a section documenting the return value of this function.  This will differ from the simple example in
			that we actually return a value.  
		</p>
		<div class="mdocin">
			.Sh RETURN VALUES
			<br />
			The
			<br />
			.Fn hello
			<br />
			function returns 1 on success, 0 on failure.
		</div>
		<p>
			Piecing this example together, we have the following the following respectable C function manual.
		</p>
		<div class="mdocin">
			.Dd May 30, 2011
			<br />
			.Dt HELLO 3
			<br />
			.Os
			<br />
			.Sh NAME
			<br />
			.Nm hello
			<br />
			.Nd print \(dqhello, world\(dq
			<br />
			.Sh SYNOPSIS
			<br />
			.In hello.h
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "int C" "const char *prefix"
			<br />
			.Fc
			<br />
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Fn hello
			<br />
			function prints
			<br />
			.Qq hello, world .
			<br />
			.Pp
			<br />
			It accepts the following arguments:
			<br />
			.Bl -tag -width Ds
			<br />
			.It Fa "int C"
			<br />
			Non-zero if the output should be uppercase.
			<br />
			.It Fa "const char *prefix"
			<br />
			A prefix to precede the output or NULL for no prefix.
			<br />
			.El
			<br />
			.Sh RETURN VALUES
			<br />
			The
			<br />
			.Nm
			<br />
			function returns 1 on success, 0 on failure.
		</div>
		<p>
			Running through our checklist, we see that we've described preprocessor information with the header file macro <a
				href="#macro_in" class="macro">In</a>; function calling syntax and types in the <span
				class="sec">SYNOPSIS</span>; and arguments in the <span class="sec">DESCRIPTION</span> along with function
			operation.  This contains all we need to know about the function.
		</p>
	</div>
	<div class="page">
		<h3>
			Case Study
		</h3>
		<p>
			I now introduce a case study of a real-world function manual, in particular the manual for the <span
				class="func">strtonum</span> function, which is an extension to the <a class="term" href="#libc">C
				Standard Library</a> found in <a class="term" href="#openbsd">OpenBSD</a>.  The original file may
			be viewed on-line at <a class="external"
				href="http://www.openbsd.org/cgi-bin/cvsweb/src/lib/libc/stdlib/strtonum.3">src/lib/libc/stdlib/strtonum.3</a>,
			file version 1.14.
		</p>
		<p>
			In this case study, I've chosen a manual with some bad behaviour &mdash; not broken, but bad.  This is intentional to
			show how real-world manuals deviate from recommended forms.  I'll explicitly note each instance of bad behaviour as we
			explore the manual's contents.
		</p>
		<div class="mdocin">
			.\"&nbsp;&nbsp;&nbsp;&nbsp;$&#8203;OpenBSD: strtonum.3,v 1.14 2007/05/31 19:19:31 jmc Exp $
			<br />
			.\"
			<br />
			.\" Copyright (c) 2004 Ted Unangst
			<br />
			.\"
			<br />
			.\" Permission to use, copy, modify, and distribute this software for any
			<br />
			.\" purpose with or without fee is hereby granted, provided that the above
			<br />
			.\" copyright notice and this permission notice appear in all copies.
			<br />
			.\"
			<br />
			.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
			<br />
			.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
			<br />
			.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
			<br />
			.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
			<br />
			.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
			<br />
			.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
			<br />
			.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
		</div>
		<p>
			This is the standard comment header to manual files in OpenBSD.  Indeed, most distributed manuals begin with a copyright
			notice, then a license.  The <span class="screen">$&#8203;OpenBSD$</span> line is automatically updated by the revision
			control system, <a href="#cmd_cvs" class="cmd">cvs</a>, whenever an update to the file is committed.  The
			line following is the copyright message, and following that is the text form of the <a class="term"
				href="#isc_license">ISC license</a>.
		</p>
		<div class="mdocin">
			.Dd $&#8203;Mdocdate: May 31 2007 $
			<br />
			.Dt STRTONUM 3
			<br />
			.Os
		</div>
		<p>
			These three standard macros establish the last modified date, manual title (same as the single documented function but
			capitalised), manual category <span class="cat">3</span> (functions), and the default operating system.  The <span
				class="screen">$&#8203;Mdocdate$</span> line, like the <span class="screen">$&#8203;OpenBSD$</span> line, is
			automatically updated by <a href="#cmd_cvs" class="cmd">cvs</a> whenever the document is committed to the
			source repository.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm strtonum
			<br />
			.Nd "reliably convert string value to an integer"
		</div>
		<p>
			Declares a single documented function, <span class="func">strtonum</span>, and its purpose.  The quotations within the
			<a href="#macro_nd" class="macro">Nd</a> macro are superfluous: like <a href="#macro_qq"
				class="macro">Qq</a> macro studied earlier, <a href="#macro_nd" class="macro">Nd</a> accepts an
			arbitrary number of arguments to format.  Quotation, in grouping these as one argument, serves little but to pass in
			whitespace (there is no special whitespace to pass in).
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.Fd #include &lt;stdlib.h&gt;
			<br />
			.Ft long long
			<br />
			.Fo strtonum
			<br />
			.Fa "const char *nptr"
			<br />
			.Fa "long long minval"
			<br />
			.Fa "long long maxval"
			<br />
			.Fa "const char **errstr"
			<br />
			.Fc
		</div>
		<p>
			This declares the function prototype and calling syntax.  First, let's examine the new <a href="#macro_fd"
				class="macro">Fd</a> macro.  The use of this macro for a header inclusion is obsolete: new manuals should always
			use <a href="#macro_in" class="macro">In</a>.  This makes it easier for parsers to understand a header file
			&mdash; and possibly link to it &mdash; instead of being a generic preprocessor statement.  The re-written form would
			begin as follows:
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.In stdlib.h
		</div>
		<p>
			Moving along, we see that each function argument includes its name (e.g., <span class="screen">nptr</span> and <span
				class="screen">minval</span>).  While not common in header file prototypes, this allows later references of
			function invocation in the manual to refer back to the prototype for type and context information.  In the previous
			section, we discussed the relevance of quotation with <a href="#macro_fa" class="macro">Fa</a>: the same is
			done here.
		</p>
		<p>
			While we could have used <a href="#macro_fn" class="macro">Fn</a>, it would have created an overly long input
			line.  Using <a href="#macro_fn" class="macro">Fn</a> instead of <a href="#macro_fo"
				class="macro">Fo</a> is purely a matter of convenience and has no effect on parsing or formatting.
		</p>
		<div class="mdocin">
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Fn strtonum
			<br />
			function converts the string in
			<br />
			.Fa nptr
			<br />
			to a
			<br />
			.Li long long
			<br />
			value.
		</div>
		<p>
			In the <span class="sec">SYNOPSIS</span>, the <a href="#macro_fa" class="macro">Fa</a> included the full type
			information.  Here, however,
			we use <a href="#macro_fa" class="macro">Fa</a> with just its name, <span
				class="screen">nptr</span>.  We could have done the same in the <span class="sec">SYNOPSIS</span>, but the C
			language includes all type information in its prototypes.
		</p>
		<p>
			The <a href="#macro_li" class="macro">Li</a> macro here isn't good practise: since the <span
				class="screen">long long</span> refers to a type, it should be of type <a href="#macro_vt"
				class="macro">Vt</a>.  This behaviour &mdash; using a presentation macro instead of a semantic one &mdash; is a
			holder from legacy manual forms that are purely presentational.  If you find yourself applying a style, think twice
			whether it's a good idea!
		</p>
		<div class="mdocin">
			The
			<br />
			.Fn strtonum
			<br />
			function was designed to facilitate safe, robust programming
			<br />
			and overcome the shortcomings of the
			<br />
			.Xr atoi 3
			<br />
			and
			<br />
			.Xr strtol 3
			<br />
			family of interfaces.
			<br />
			.Pp
			<br />
			The string may begin with an arbitrary amount of whitespace
			<br />
			(as determined by
			<br />
			.Xr isspace 3 )
			<br />
			followed by a single optional
			<br />
			.Ql +
			<br />
			or
			<br />
			.Ql -
			<br />
			sign.
			<br />
			.Pp
			<br />
			The remainder of the string is converted to a
			<br />
			.Li long long
			<br />
			value according to base 10.
			<br />
			.Pp
			<br />
			The value obtained is then checked against the provided
			<br />
			.Fa minval
			<br />
			and
			<br />
			.Fa maxval
			<br />
			bounds.
			<br />
			If
			<br />
			.Fa errstr
			<br />
			is non-null,
			<br />
			.Fn strtonum
			<br />
			stores an error string in
			<br />
			.Fa *errstr
			<br />
			indicating the failure.
		</div>
		<p>
			The remainder of the <span class="sec">DESCRIPTION</span> section has completely captured the calling syntax and
			behaviour of the function.  The usage of <a href="#macro_ql" class="macro">Ql</a> macro is simply to set
			aside non-alphanumeric letters from the regular stream of text.
		</p>
		<div class="mdocin">
			.Sh RETURN VALUES
			<br />
			The
			<br />
			.Fn strtonum
			<br />
			function returns the result of the conversion,
			<br />
			unless the value would exceed the provided bounds or is invalid.
			<br />
			On error, 0 is returned,
			<br />
			.Va errno
			<br />
			is set, and
			<br />
			.Fa errstr
			<br />
			will point to an error message.
			<br />
			.Fa *errstr
			<br />
			will be set to
			<br />
			.Dv NULL
			<br />
			on success;
			<br />
			this fact can be used to differentiate
			<br />
			a successful return of 0 from an error.
		</div>
		<p>
			Since this function returns a rather tricky error message, it's necessary to describe the effects of both the return
			value and the passed-in arguments.
		</p>
		<div class="mdocin">
			.Sh EXAMPLES
			<br />
			Using
			<br />
			.Fn strtonum
			<br />
			correctly is meant to be simpler than the alternative functions.
			<br />
			.Bd -literal -offset indent
			<br />
			int iterations;
			<br />
			const char *errstr;
			<br />
			<br />
			iterations = strtonum(optarg, 1, 64, &amp;errstr);
			<br />
			if (errstr)
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;errx(1, "number of iterations is %s: %s", errstr, optarg);
			<br />
			.Ed
			<br />
			.Pp
			<br />
			The above example will guarantee that the value of iterations is between
			<br />
			1 and 64 (inclusive).
		</div>
		<p>
			Many manual readers jump directly to the <span class="sec">EXAMPLES</span> section to gain an understanding of your
			function.  Thus, not only must the example compile and run, it must also demonstrate as many parts of the function as
			possible.  In the case of <span class="func">strtonum</span>, an error condition and a non-error condition are
			documented.  However, the header file inclusion(s) are missing, which may mislead readers.  In particular, the
			non-standard <span class="func">errx</span> function requires the <span class="header">err.h</span> header file.
		</p>
		<div class="mdocin">
			.Sh ERRORS
			<br />
			.Bl -tag -width Er
			<br />
			.It Bq Er ERANGE
			<br />
			The given string was out of range.
			<br />
			.It Bq Er EINVAL
			<br />
			The given string did not consist solely of digit characters.
			<br />
			.It Bq Er EINVAL
			<br />
			.Ar minval
			<br />
			was larger than
			<br />
			.Ar maxval .
			<br />
			.El
			<br />
			.Pp
			<br />
			If an error occurs,
			<br />
			.Fa errstr
			<br />
			will be set to one of the following strings:
			<br />
			.Pp
			<br />
			.Bl -tag -width "too largeXX" -compact
			<br />
			.It too large
			<br />
			The result was larger than the provided maximum value.
			<br />
			.It too small
			<br />
			The result was smaller than the provided minimum value.
			<br />
			.It invalid
			<br />
			The string did not consist solely of digit characters.
			<br />
			.El
		</div>
		<p>
			The <span class="sec">ERRORS</span> section will be rigorously covered in the section on <a
				href="#sec_system_call">System Calls</a>.  In brief, since the <span class="var">errno</span> global error
			variable is set, each possible value must be documented in a list using the <a href="#macro_er"
				class="macro">Er</a> macro.  These are always enclosed within <a href="#macro_bq" class="macro">Bq</a>.
		</p>
		<p>
			Furthermore, the error string in <span class="var">errstr</span> must also be documented.
		</p>
		<div class="mdocin">
			.Sh SEE ALSO
			<br />
			.Xr atof 3 ,
			<br />
			.Xr atoi 3 ,
			<br />
			.Xr atol 3 ,
			<br />
			.Xr atoll 3 ,
			<br />
			.Xr sscanf 3 ,
			<br />
			.Xr strtod 3 ,
			<br />
			.Xr strtol 3 ,
			<br />
			.Xr strtoul 3
		</div>
		<p>
			This section collects all references to other manuals made elsewhere in this manual, then adds more for completion.
			Note that the entries are alphabetically sorted.
		</p>
		<div class="mdocin">
			.Sh STANDARDS
			<br />
			.Fn strtonum
			<br />
			is an
			<br />
			.Ox
			<br />
			extension.
			<br />
			The existing alternatives, such as
			<br />
			.Xr atoi 3
			<br />
			and
			<br />
			.Xr strtol 3 ,
			<br />
			are either impossible or difficult to use safely.
			<br />
			.Sh HISTORY
			<br />
			The
			<br />
			.Fn strtonum
			<br />
			function first appeared in
			<br />
			.Ox 3.6 .
		</div>
		<p>
			Since this function is included in OpenBSD's <a href="#libc" class="term">C Standard Library</a>, the fact that the
			function is not standard must absolutely be documented.  In this, the <a href="#macro_ox" class="macro">Ox</a>
			macro indicates the OpenBSD operating system (each <a href="#bsd_unix" class="term">BSD UNIX</a> operating
			system has its own macro).
		</p>
	</div>
	<div class="page">
		<h2>
			Function Library
		</h2>
		<p>
			I've mentioned several times that the name provided to <a href="#macro_nm" class="macro">Nm</a> doesn't
			necessarily refer to the title of the manual in <a href="#macro_dt" class="macro">Dt</a>.  Let's study a
			simple function library, using both <span class="func">hi</span> and <span class="func">hello</span>, which demonstrates
			this concept.
		</p>
		<p>
			A function library is a collection of object files, which consist mainly of programming functions, within a single file
			called a library.  On most <a class="term" href="#unix">UNIX</a> systems, you can find libraries installed
			in <span class="path">/usr/local</span>, ending in <span class="file">.a</span> or <span class="file">.so</span>.
		</p>
		<p>
			This example applies to any number of functions belonging to the same library &mdash; not necessarily all functions in
			the library.  In fact, one commonly finds large libraries spread over many manuals, each of which contain several
			similar functions.
		</p>
		<p>
			For simplicity's sake, I'll call this C function library <span class="lib">libgreeting</span>, implying that the
			installed library is called <span class="file">libgreeting.a</span> or <span class="file">libgreeting.so</span>.  It
			will consist of two header files, <span class="header">hi.h</span> and <span class="header">hello.h</span>, containing
			the function prototypes for <span class="func">hi</span> and <span class="func">hello</span>, respectively.
		</p>
		<p>
			Let's begin with the first few macros, which are also called the manual prologue.
		</p>
		<div class="mdocin">
			.Dd May 30, 2011
			<br />
			.Dt GREETING 3
			<br />
			.Os
		</div>
		<p>
			Note that I've changed the document title to be <span class="screen">GREETING</span> instead of choosing between
			function names.  This is because the manual documents the entire function library, not just one particular function.  In
			general, a function library should have its name not include the leading <q>lib</q>.
		</p>
		<p>
			It's a good rule of thumb that the <a href="#macro_dt" class="macro">Dt</a> title of your document matches
			its filename.
		</p>
		<p>
			Next, I'll list the names of the functions being documented.  I also change the description of the manual to be more
			generic, just in case I want to add new functions, later.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm hello ,
			<br />
			.Nm hi
			<br />
			.Nd print greeting messages
		</div>
		<p>
			Here I've used <a href="#macro_nm" class="macro">Nm</a> twice to indicate that the manual documents two
			functions.  In doing so, I'll have to be careful when invoking <a href="#macro_nm" class="macro">Nm</a> in
			later parts of the manual, as it will produce <span class="screen">hi</span> if I don't specify a name, and this is
			probably not desired (nor should it be depended upon, as I may re-order the names).
		</p>
		<p>
			If we were only documenting a single function in a library, we would only assign <a href="#macro_nm"
				class="macro">Nm</a> and <a href="#macro_nd" class="macro">Nd</a> to the relevant function and not
			that of the library.
		</p>
		<p>
			It's good practise to alphabetise the function names in the <span class="sec">NAME</span> section.  We must also be sure
			to comma-separate each name, leaving the last invocation without a comma.  Let's look at the output so far.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">hello</b>, 
				<b class="mdoc-name">hi</b> &#8212; <span class="mdoc-desc">print greeting messages</span>
			</div>
		</div>
		<p>
			Even though that is hard to maintain and not very useful, some operating systems, for example FreeBSD and NetBSD,
			require a <span class="sec">LIBRARY</span> section for base system libraries.  For portable libraries,
			do not include such a section.
		</p>
		<div class="mdocin">
			.Sh LIBRARY
			<br />
			.Lb libgreeting
		</div>
		<p>
			This uses the macro <a href="#macro_lb" class="macro">Lb</a>, which accepts the name of the library
			starting with <q>lib</q>.  This macro is not portable because the list of known library names is system
			dependent, so it will produce different output on different systems, which is not desirable for a manual page.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">hello</b>, 
				<b class="mdoc-name">hi</b> &#8212; <span class="mdoc-desc">print greeting messages</span>
			</div>
			<div class="mdoc-section">
				<h1>LIBRARY</h1>
				<span class="mdoc-lib">library &#8220;libgreeting&#8221;</span>
			</div>
		</div>
		<p>
			The <span class="sec">SYNOPSIS</span> section will simply be a collection of the calling syntaxes for both functions,
			which we've already studied.  If we were only documenting one function, would list only that function here.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.In hello.h
			<br />
			.In hi.h
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "int C" "const char *prefix"
			<br />
			.Fc
			<br />
			.Ft void
			<br />
			.Fn hi
		</div>
		<p>
			Note that I've listed both include files prior to the function prototypes.  This is familiar to C programmers, where
			functions may have multiple include files that need a specific order.  The functions are listed in the same order as
			their <a href="#macro_nm" class="macro">Nm</a> listing. 
		</p>
		<p>
			Let's examine the output so far.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">hello</b>, 
				<b class="mdoc-name">hi</b> &#8212; <span class="mdoc-desc">print greeting messages</span>
			</div>
			<div class="mdoc-section">
				<h1>LIBRARY</h1>
				<span class="mdoc-lib">library &#8220;libgreeting&#8221;</span>
			</div>
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<b class="mdoc-includes">#include &lt;<span class="mdoc-link-includes">hello.h</span>&gt;</b><br/>
				<b class="mdoc-includes">#include &lt;<span class="mdoc-link-includes">hi.h</span>&gt;</b><p></p>
				<i class="mdoc-ftype">int</i><br/>
				<b class="mdoc-fname">hello</b>(<i class="mdoc-farg">int C</i>, <i class="mdoc-farg">const char *prefix</i>);<p></p>
				<i class="mdoc-ftype">void</i><br/>
				<b class="mdoc-fname">hi</b>();
			</div>
		</div>
		<p>
			Already, a manual reader has lots of pertinent information: the name of the library, its header file, and the function
			calling syntax.  Let's continue in documenting the functions and their arguments, but this time, we'll do so in a
			different style than before.
		</p>
		<p>
			Instead of using lists, we describe each function as a free-form stream of text.  We depend on the <span
				class="sec">SYNOPSIS</span> to hint the reader as to the function argument types; there's no need to re-state
			them.
		</p>
		<div class="mdocin">
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Fn hi
			<br />
			and
			<br />
			.Fn hello
			<br />
			functions print out greeting messages.
			<br />
			.Pp
			<br />
			The
			<br />
			.Fn hi
			<br />
			function accepts no arguments and prints out
			<br />
			.Qq hello, world .
			<br />
			.Pp
			<br />
			The
			<br />
			.Fn hello
			<br />
			function accepts a value
			<br />
			.Fa C ,
			<br />
			which if non-zero indicates output should be uppercase; and
			<br />
			.Fa prefix ,
			<br />
			which, if non-NULL, shall be prefixed to the output.
			<br />
			The
			<br />
			.Fa prefix
			<br />
			argument, if non-NULL, must be nil-terminated.
		</div>
		<p>
			Notice how each sentence in this fragment ends on its own line, for example,
		</p>
		<div class="mdocin">
			which, if non-NULL, shall be prefixed to the output.
			<br />
			The
			<br />
			.Fa prefix
		</div>
		<p>
			By doing so, the formatter is able to recognise the end of sentence and correctly handle sentential spacing.  In most
			cases, this means adding two spaces between the period and subsequent text.  From this follows a rule of thumb, <q>new
				sentence, new line</q>.
		</p>
		<p>
			In this <span class="sec">DESCRIPTION</span> we've captured what each function does and what its arguments are.  What
			remains are return values.
		</p>
		<div class="mdocin">
			.Sh RETURN VALUES
			<br />
			The
			<br />
			.Fn hi
			<br />
			function does not return a value.
			<br />
			.Pp
			<br />
			The
			<br />
			.Fn hello
			<br />
			function returns 1 on success, 0 on failure.
		</div>
		<p>
			Let's collect these fragments into a single document and see if it's enough to use as a programming reference.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">hello</b>, 
				<b class="mdoc-name">hi</b> &#8212; <span class="mdoc-desc">print greeting messages</span>
			</div>
			<div class="mdoc-section">
				<h1>LIBRARY</h1>
				<span class="mdoc-lib">library &#8220;libgreeting&#8221;</span>
			</div>
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<b class="mdoc-includes">#include &lt;<span class="mdoc-link-includes">hello.h</span>&gt;</b>
				<br/>
				<b class="mdoc-includes">#include &lt;<span class="mdoc-link-includes">hi.h</span>&gt;</b>
				<p></p>
				<i class="mdoc-ftype">int</i>
				<br/>
				<b class="mdoc-fname">hello</b>(<i class="mdoc-farg">int C</i>, <i class="mdoc-farg">const char *prefix</i>);
				<p></p>
				<i class="mdoc-ftype">void</i>
				<br/>
				<b class="mdoc-fname">hi</b>();
			</div>
			<div class="mdoc-section">
				<h1>DESCRIPTION</h1>
				The <b class="mdoc-fname">hi</b>() and <b class="mdoc-fname">hello</b>() functions print out greeting messages.
				<p></p>
				The <b class="mdoc-fname">hi</b>() function accepts no arguments and prints out &#8220;hello, world&#8221;.
				<p></p>
				The <b class="mdoc-fname">hello</b>() function accepts a value <i class="mdoc-farg">C</i>, which if non-zero indicates
				output should be uppercase; and <i class="mdoc-farg">prefix</i>, which, if non-NULL, shall be prefixed to the output.
				The <i class="mdoc-farg">prefix</i> argument, if non-NULL, must be nil-terminated.
			</div>
			<div class="mdoc-section">
				<h1>RETURN VALUES</h1>
				The <b class="mdoc-fname">hi</b>() function does not return a value.
				<p></p>
				The <b class="mdoc-fname">hello</b>() function returns 1 on success, 0 on failure.
			</div>
		</div>
		<p>
			We'll use our mental checklist as a guide.  First we stipulated linking information with the <a
				href="#macro_lb" class="macro">Lb</a> macro.  Then we introduced the calling syntax of each
			function, naming their arguments.  We also stipulated the necessary header files in the order they'd be included in
			source files.  In the <span class="sec">DESCRIPTION</span>, we described each function and its arguments in full.
			Lastly, we documented return values in the <span class="sec">RETURN VALUES</span> section.
		</p>
		<p>
			From this information, a programmer should be able to interface with our library.
		</p>
	</div>
	<div class="page">
		<h3>
			Case Study
		</h3>
		<p>
			I now introduce a case study of a real-world function library manual, in particular the manual for the <span
				class="func">getc</span>, <span class="func">fgetc</span>, <span class="func">getw</span>, and <span
				class="func">getchar</span> functions from <a class="term" href="#openbsd">OpenBSD</a>.  The
			original file may be viewed on-line at <a class="external"
				href="http://www.openbsd.org/cgi-bin/cvsweb/src/lib/libc/stdio/getc.3">src/lib/libc/stdio/getc.3</a>,
			file version 1.12.  This is not the manual for the full function library, but only a handful of similar functions.
		</p>
		<div class="mdocin">
			.\"&nbsp;&nbsp;&nbsp;&nbsp;$&#8203;OpenBSD: getc.3,v 1.12 2007/05/31 19:19:31 jmc Exp &#8203;$
			<br />
			.\"
			<br />
			.\" Copyright (c) 1990, 1991, 1993
			<br />
			.\"	The Regents of the University of California.  All rights reserved.
			<br />
			.\"
			<br />
			.\" This code is derived from software contributed to Berkeley by
			<br />
			.\" Chris Torek and the American National Standards Committee X3,
			<br />
			.\" on Information Processing Systems.
			<br />
			.\"
			<br />
			.\" Redistribution and use in source and binary forms, with or without
			<br />
			.\" modification, are permitted provided that the following conditions
			<br />
			.\" are met:
			<br />
			.\" 1. Redistributions of source code must retain the above copyright
			<br />
			.\"    notice, this list of conditions and the following disclaimer.
			<br />
			.\" 2. Redistributions in binary form must reproduce the above copyright
			<br />
			.\"    notice, this list of conditions and the following disclaimer in the
			<br />
			.\"    documentation and/or other materials provided with the distribution.
			<br />
			.\" 3. Neither the name of the University nor the names of its contributors
			<br />
			.\"    may be used to endorse or promote products derived from this software
			<br />
			.\"    without specific prior written permission.
			<br />
			.\"
			<br />
			.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
			<br />
			.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
			<br />
			.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
			<br />
			.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
			<br />
			.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
			<br />
			.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
			<br />
			.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
			<br />
			.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
			<br />
			.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
			<br />
			.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
			<br />
			.\" SUCH DAMAGE.
		</div>
		<p>
			This is the standard comment header to manual files in OpenBSD.  The <span class="screen">$&#8203;OpenBSD$</span> line
			is automatically updated by the revision control system, <a href="#cmd_cvs" class="cmd">cvs</a>, whenever an
			update to the file is committed.  The line following is the copyright message, and following that is the text form of
			the <a class="term" href="#bsd_license">BSD license</a>.
		</p>
		<div class="mdocin">
			.Dd $&#8203;Mdocdate: May 31 2007 &#8203;$
			<br />
			.Dt GETC 3
			<br />
			.Os
		</div>
		<p>
			This classifies our manual in category <span class="cat">3</span> as a function or function library.  The title of the
			manual, <span class="screen">GETC</span>, is chosen as the most general of those functions listed below in the <span
				class="sec">NAME</span> section.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm fgetc ,
			<br />
			.Nm getc ,
			<br />
			.Nm getchar ,
			<br />
			.Nm getw
			<br />
			.Nd get next character or word from input stream
		</div>
		<p>
			Lists (alphabetically) all the functions that will be documented, and some general notes about their collective
			function.  We next jump down into the <span class="sec">SYNOPSIS</span>; since this set of functions is part of the <a
				class="term" href="#libc">C Standard Library</a>, it needs no special linking information.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.Fd #include &lt;stdio.h&gt;
			<br />
			.Ft int
			<br />
			.Fn fgetc "FILE *stream"
			<br />
			.Ft int
			<br />
			.Fn getc "FILE *stream"
			<br />
			.Ft int
			<br />
			.Fn getchar "void"
			<br />
			.Ft int
			<br />
			.Fn getw "FILE *stream"
		</div>
		<p>
			This documents the calling syntax of all functions.  Note that the <a href="#macro_fd" class="macro">Fd</a>
			macro is used instead of the <a href="#macro_in" class="macro">In</a> macro.  This invocation is
			historically relevant, but new manuals should always use <a href="#macro_in" class="macro">In</a>.
		</p>
		<div class="mdocin">
			.In stdio.h
		</div>
		<p>
			Next, each function and its arguments is explained as a free-flowing paragraph.  This was probably chosen instead of
			using a list item for each argument (with <a href="#macro_bl" class="macro">Bl</a>) due to the small number
			of arguments.
		</p>
		<div class="mdocin">
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Fn fgetc
			<br />
			function obtains the next input character (if present) from the stream
			<br />
			pointed at by
			<br />
			.Fa stream ,
			<br />
			or the next character pushed back on the stream via
			<br />
			.Xr ungetc 3 .
			<br />
			.Pp
			<br />
			The
			<br />
			.Fn getc
			<br />
			function acts essentially identically to
			<br />
			.Fn fgetc ,
			<br />
			but is a macro that expands in-line.
			<br />
			.Pp
			<br />
			The
			<br />
			.Fn getchar
			<br />
			function is equivalent to
			<br />
			.Fn getc
			<br />
			with the argument
			<br />
			.Em stdin .
			<br />
			.Pp
			<br />
			The
			<br />
			.Fn getw
			<br />
			function obtains the next
			<br />
			.Li int
			<br />
			(if present)
			<br />
			from the stream pointed at by
			<br />
			.Fa stream .
		</div>
		<p>
			The usage of the <a href="#macro_em" class="macro">Em</a> macro is not correct: the <a
				href="#macro_va" class="macro">Va</a> or <a href="#macro_dv" class="macro">Dv</a> macro
			would have been more appropriate.  The same applies to the <a href="#macro_li" class="macro">Li</a>.  The
			<span class="lang">mdoc</span> language is semantic, so using presentation macros such as <a
				href="#macro_li" class="macro">Li</a> and <a href="#macro_em" class="macro">Em</a> is
			discouraged.
		</p>
		<div class="mdocin">
			.Sh RETURN VALUES
			<br />
			If successful, these routines return the next requested object from the
			<br />
			.Fa stream .
			<br />
			If the stream is at end-of-file or a read error occurs, the routines return
			<br />
			.Dv EOF .
			<br />
			The routines
			<br />
			.Xr feof 3
			and
			<br />
			.Xr ferror 3
			<br />
			must be used to distinguish between end-of-file and error.
			<br />
			If an error occurs, the global variable
			<br />
			.Va errno
			<br />
			is set to indicate the error.
			<br />
			The end-of-file condition is remembered, even on a terminal, and all
			<br />
			subsequent attempts to read will return
			<br />
			.Dv EOF
			<br />
			until the condition is cleared with
			<br />
			.Xr clearerr 3 .
			<br />
			.Sh SEE ALSO
			<br />
			.Xr ferror 3 ,
			<br />
			.Xr fopen 3 ,
			<br />
			.Xr fread 3 ,
			<br />
			.Xr putc 3 ,
			<br />
			.Xr ungetc 3
		</div>
		<p>
			All possible return values are correctly documented in the <span class="sec">RETURN VALUES</span> section and relevant
			functions cross-linked in the <span class="sec">SEE ALSO</span> section.  Note that the cross-linked manuals are also
			alphabetically sorted.
		</p>
		<div class="mdocin">
			.Sh STANDARDS
			<br />
			The
			<br />
			.Fn fgetc ,
			<br />
			.Fn getc ,
			<br />
			and
			<br />
			.Fn getchar
			<br />
			functions conform to
			<br />
			.St -ansiC .
		</div>
		<p>
			Noting standards conformance is extremely important: it allows programmers and administrators to depend on your
			component in a cross-platform fashion.  These functions are part of the <a class="term" href="#libc">C
				Standard Library</a>.
		</p>
		<div class="mdocin">
			.Sh BUGS
			<br />
			Since
			<br />
			.Dv EOF
			<br />
			is a valid integer value,
			<br />
			.Xr feof 3
			<br />
			and
			<br />
			.Xr ferror 3
			<br />
			must be used to check for failure after calling
			<br />
			.Fn getw .
			<br />
			.Pp
			<br />
			Since the size and byte order of an
			<br />
			.Vt int
			<br />
			may vary from one machine to another,
			<br />
			.Fn getw
			<br />
			is not recommended for portable applications.
		</div>
		<p>
			The <span class="sec">BUGS</span> section should be used very carefully &mdash; bugs preferably should be fixed.  In
			this section, design bugs have been documented.  Whether the <span class="sec">CAVEATS</span> section would be more
			appropriate is up to the manual author.
		</p>
		<p>
			We found several inconsistent uses of <span class="lang">mdoc</span> in this manual.  In general, if you find unusual or
			erroneous macros or styles in UNIX manuals, notify the authors!  A bug in a manual is just as important as a bug in the
			code.
		</p>
	</div>
	<div class="page">
		<h2 id="sec_system_call">
			System Call
		</h2>
		<p>
			A system call differs from a user-land function in that it triggers the operating system kernel to perform some
			operation.  This usually applies to I/O, such as reading from files or sockets with <span class="func">write</span>.
			Other than that, system calls are no different than regular functions &mdash; they're invoked, have return values, and
			so on.
		</p>
		<p>
			In <span class="lang">mdoc</span>, however, a system call is a special function consisting of at least one section not
			found in ordinary function manuals.
		</p>
		<p>
			The first difference between ordinary functions and system calls is the manual category.  Let's study a function <span
				class="func">khello</span>, <q>kernel hello</q>, which is similar to the <span class="func">hello</span>
			function described earlier.
		</p>
		<div class="mdocin">
			.Dd May 30, 2011
			<br />
			.Dt KHELLO 2
			<br />
			.Os
		</div>
		<p>
			All system calls are in category <span class="cat">2</span>.  Furthermore, unless under special circumstances, system call
			are each accorded their own manual.
		</p>
		<p>
			I'll use the same descriptive text as in the <span class="func">hello</span> example.  Note that for system calls, the
			<span class="header">hello.h</span> header file should be in the compiler's standard include path.  This is usually
			<span class="path">/usr/include</span> on UNIX systems.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm hello
			<br />
			.Nd print greeting messages
			<br />
			.Sh SYNOPSIS
			<br />
			.In hello.h
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "int C" "const char *prefix"
			<br />
			.Fc
			<br />
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Nm
			<br />
			function prints out a greeting message.
			<br />
			.Pp
			<br />
			It accepts a value
			<br />
			.Fa C ,
			<br />
			which if non-zero indicates output should be uppercase; and
			<br />
			.Fa prefix ,
			<br />
			which, if not
			<br />
			.Dv NULL ,
			<br />
			shall be prefixed to the output.
			<br />
			The
			<br />
			.Fa prefix
			<br />
			argument, if not
			<br />
			.Dv NULL ,
			<br />
			must be nil-terminated.
		</div>
		<p>
			You'll notice I've omitted the <span class="sec">LIBRARY</span> section in this example, as system calls by definition
			aren't a part of a library.  Furthermore, I've used the <a href="#macro_dv" class="macro">Dv</a> macro to
			annotate the term <span class="screen">NULL</span> as a constant variable.
		</p>
		<p>
			Let's examine the output so far.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">hello</b> &#8212; <span class="mdoc-desc">print greeting messages</span>
			</div>
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<b class="mdoc-includes">#include &lt;<span class="mdoc-link-includes">hello.h</span>&gt;</b>
				<p></p>
				<i class="mdoc-ftype">int</i>
				<br/>
				<b class="mdoc-fname">hello</b>(<i class="mdoc-farg">int C</i>, <i class="mdoc-farg">const char *prefix</i>);
			</div>
			<div class="mdoc-section">
				<h1>DESCRIPTION</h1>
				The <b class="mdoc-name">hello</b> function prints out a greeting message.
				<p></p>
				It accepts a value <i class="mdoc-farg">C</i>, which if non-zero indicates output should be uppercase; and <i
					class="mdoc-farg">prefix</i>, which, if not <span class="mdoc-define">NULL</span>, shall be prefixed to the
				output. The <i class="mdoc-farg">prefix</i> argument, if not <span class="mdoc-define">NULL</span>, must be
				nil-terminated.
			</div> 
		</div>
		<p>
			In the <span class="func">hello</span> example, I included a section <span class="sec">RETURN VALUES</span> detailing
			the return value of the function.  System calls, however, usually return a standard value and have a side effect of
			setting the C library <span class="var">errno</span> variable when invoked within a C language context.  This is
			documented with a special macro <a href="#macro_rv" class="macro">Rv</a>.
		</p>
		<div class="mdocin">
			.Sh RETURN VALUES
			<br />
			.Rv -std
		</div>
		<p>
			The <span class="macroflag">std</span> flag is by convention always specified.  This macro will produce standard text
			regarding the <span class="var">errno</span> value and that the function returns <span class="value">-1</span> on
			failure and <span class="value">0</span> on success.
		</p>
		<p>
			If you have multiple functions specified in your manual, you must list them individually as arguments to <a
				href="#macro_rv" class="macro">Rv</a>.
		</p>
		<p>
			Next, the possible values of <span class="var">errno</span> must be specified in the <span class="sec">ERRORS</span>
			section as a list.  Let's assume that <span class="var">EFAULT</span> may be set if the pointer is invalid.
		</p>
		<div class="mdocin">
			.Sh ERRORS
			<br />
			.Bl -tag -width Er
			<br />
			.It Er EFAULT
			<br />
			.Fa prefix
			<br />
			points outside the allocated address space.
			<br />
			.El
		</div>
		<p>
			The syntax of this list differs from lists we've already encountered.  Earlier we used the special term <span
				class="screen">Ds</span> as an argument to <span class="macroflag">width</span> to specify a generic width.
			Here, we used <a href="#macro_er" class="macro">Er</a>, which is also specified at the start of each list
			tag (lines beginning with <a href="#macro_it" class="macro">It</a>).
		</p>
		<p>
			The macro <a href="#macro_er" class="macro">Er</a> specifies a possible value of <span
				class="var">errno</span>.  There are many standard variable names for <span class="var">errno</span> values,
			such as <span class="var">EFAULT</span> used in our example.  When we stipulate this as the argument of <span
				class="macroflag">width</span>, the formatter is able to translate this into a generic width of most <a
				href="#macro_er" class="macro">Er</a> macro contents.
		</p>
		<p>
			You should avoid using this construct unless it's in a conventional way, as it is here.
		</p>
		<p>
			If your system call is part of an operating system, it's common to add some lines as to when it was added.  Let's assume
			you're adding the function to a fictional Foo OS.  Most modern UNIX operating systems have their own macros, such as <a
				href="#macro_bx" class="macro">Bx</a> for <a class="term" href="#bsd_unix">BSD UNIX</a>.
			Be sure to note the version of the operating system.
		</p>
		<div class="mdocin">
			.Sh HISTORY
			<br />
			The
			<br />
			.Nm
			<br />
			function call appeared in Foo OS version 1.0.
		</div>
		<p>
			Let's put all of these sections together and preview the output.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">hello</b> &#8212; <span class="mdoc-desc">print greeting messages</span>
			</div>
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<b class="mdoc-includes">#include &lt;<span class="mdoc-link-includes">hello.h</span>&gt;</b>
				<p></p>
				<i class="mdoc-ftype">int</i><br/>
				<b class="mdoc-fname">hello</b>(<i class="mdoc-farg">int C</i>, <i class="mdoc-farg">const char *prefix</i>);
			</div>
			<div class="mdoc-section">
				<h1>DESCRIPTION</h1>
				The <b class="mdoc-name">hello</b> function prints out a greeting message.
				<p></p>
				It accepts a value <i class="mdoc-farg">C</i>, which if non-zero indicates output should be uppercase; and <i
					class="mdoc-farg">prefix</i>, which, if not <span class="mdoc-define">NULL</span>, shall be prefixed to
				the output. The <i class="mdoc-farg">prefix</i> argument, if not <span class="mdoc-define">NULL</span>, must be
				nil-terminated.
			</div> 
			<div class="mdoc-section">
				<h1>RETURN VALUES</h1>
				The <b class="mdoc-fname">hello</b>() function returns the value 0 if successful; otherwise the value -1 is
				returned and the global variable <b class="mdoc-var">errno</b> is set to indicate the error.
			</div>
			<div class="mdoc-section">
				<h1>ERRORS</h1>
				<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="mdoc-list list-tag">
					<dt class="mdoc-list-tag" style="margin-top: 1.00em;">
						<span class="mdoc-errno">EFAULT</span></dt>
					<dd class="mdoc-list-tag" style="margin-left: 17.00ex;">
						<i class="mdoc-farg">prefix</i> points outside the allocated address space.</dd>
				</dl>
			</div>
			<div class="mdoc-section">
				<h1> HISTORY</h1>
				The <b class="mdoc-name">hello</b> function call appeared in Foo OS version 1.0.
			</div>
		</div>
		<p>
			We can make sure the manual is complete by reviewing the checklist for function documentation.
		</p>
		<p>
			First we implied linking information by using category two (which does not need to be specially linked).  Then we
			introduced the calling syntax of the function, naming its arguments.  We also stipulated the necessary header files.  In
			the <span class="sec">DESCRIPTION</span>, we described the function and its arguments in full.  Lastly, we documented
			return values in the <span class="sec">RETURN VALUES</span> section and the errors set in <span
				class="sec">ERRORS</span>.
		</p>
		<p>
			We also added a <span class="sec">HISTORY</span> section, which isn't mentioned as part of our checklist but is
			considered good practise for system calls.  In general, a note on historical information is useful to put your component
			in the general context of related machinery.
		</p>
	</div>
	<div class="page">
		<h3>
			Case Study
		</h3>
		<p>
			I now introduce a case study of a real-world system call manual, in particular the manual for the <span
				class="func">fsync</span> function from <a class="term" href="#openbsd">OpenBSD</a>.  The
			original file may be viewed on-line at <a class="external"
				href="http://www.openbsd.org/cgi-bin/cvsweb/src/lib/libc/sys/fsync.2">src/lib/libc/sys/fsync.2</a>, file version
			1.9.
		</p>
		<div class="mdocin">
			.\"&nbsp;&nbsp;&nbsp;&nbsp;$&#8203;OpenBSD: fsync.2,v 1.9 2011/04/29 07:12:44 jmc Exp $
			<br />
			.\"&nbsp;&nbsp;&nbsp;&nbsp;$&#8203;NetBSD: fsync.2,v 1.4 1995/02/27 12:32:38 cgd Exp $
			<br />
			.\"
			<br />
			.\" Copyright (c) 1983, 1993
			<br />
			.\"	The Regents of the University of California.  All rights reserved.
			<br />
			.\"
			<br />
			.\" Redistribution and use in source and binary forms, with or without
			<br />
			.\" modification, are permitted provided that the following conditions
			<br />
			.\" are met:
			<br />
			.\" 1. Redistributions of source code must retain the above copyright
			<br />
			.\"    notice, this list of conditions and the following disclaimer.
			<br />
			.\" 2. Redistributions in binary form must reproduce the above copyright
			<br />
			.\"    notice, this list of conditions and the following disclaimer in the
			<br />
			.\"    documentation and/or other materials provided with the distribution.
			<br />
			.\" 3. Neither the name of the University nor the names of its contributors
			<br />
			.\"    may be used to endorse or promote products derived from this software
			<br />
			.\"    without specific prior written permission.
			<br />
			.\"
			<br />
			.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
			<br />
			.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
			<br />
			.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
			<br />
			.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
			<br />
			.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
			<br />
			.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
			<br />
			.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
			<br />
			.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
			<br />
			.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
			<br />
			.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
			<br />
			.\" SUCH DAMAGE.
			<br />
			.\"
			<br />
			.\"     @(#)fsync.2	8.1 (Berkeley) 6/4/93
		</div>
		<p>
			The <a href="#cmd_cvs" class="cmd">cvs</a> identifiers (both from the current system, <a class="term"
				href="#openbsd">OpenBSD</a>, and the import source system, <a class="term"
				href="#netbsd">NetBSD</a>), copyright, license, and <a href="#cmd_sccs"
				class="cmd">sccs</a> identifier (from the original system) are presented in the usual way: the the <span
				class="screen">$&#8203;OpenBSD$</span> and <span class="screen">$&#8203;NetBSD$</span> lines are automatically
			updated by the revision control system, <a href="#cmd_cvs" class="cmd">cvs</a>, whenever an update to the
			file is committed.  The line following is the copyright message, and following that is the text form of the <a
				class="term" href="#bsd_license">BSD license</a>.
		</p>
		<div class="mdocin">
			.Dd $&#8203;Mdocdate: April 29 2011 $
			<br />
			.Dt FSYNC 2
			<br />
			.Os
		</div>
		<p>
			The manual's last-modified date is maintained with the automatically-updated <span
				class="screen">$&#8203;Mdocdate$</span> sequence.  Its title is set to the single function's capitalised form,
			category <span class="cat">2</span> for system calls under the current operating system.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm fsync
			<br />
			.Nd "synchronize a file's in-core state with that on disk"
		</div>
		<p>
			The <a href="#macro_nd" class="macro">Nd</a> macro's arguments are superfluously quoted again.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.Fd #include &lt;unistd.h&gt;
			<br />
			.Ft int
			<br />
			.Fn fsync "int fd"
		</div>
		<p>
			Again, in historical manuals, <a href="#macro_fd" class="macro">Fd</a> is sometimes used instead of the
			modern <a href="#macro_in" class="macro">In</a> macro.  Note also the inclusion of the function argument's
			name, <span class="screen">fd</span>, where regular C prototypes would usually only include the type.
		</p>
		<div class="mdocin">
			.Sh DESCRIPTION
			<br />
			.Fn fsync
			<br />
			causes all modified data and attributes of
			<br />
			.Fa fd
			<br />
			to be moved to a permanent storage device.
			<br />
			This normally results in all in-core modified copies
			<br />
			of buffers for the associated file to be written to a disk.
			<br />
			.Pp
			<br />
			.Fn fsync
			<br />
			should be used by programs that require a file to be in a known state,
			<br />
			for example, in building a simple transaction facility.
		</div>
		<p>
			Since <span class="func">fsync</span> is a simple function, its description is fairly straightforward.  The single
			function argument <span class="screen">fd</span> is fully described as well.
		</p>
		<div class="mdocin">
			<br />
			.Sh RETURN VALUES
			<br />
			A 0 value is returned on success.
			<br />
			A \-1 value indicates an error.
		</div>
		<p>
			This is not correct, as it omits information on the <span class="var">errno</span> global error being set.  The <a
				href="#macro_rv" class="macro">Rv</a> macro should be used instead.
		</p>
		<div class="mdocin">
			.Sh ERRORS
			<br />
			The
			<br />
			.Fn fsync
			<br />
			fails if:
			<br />
			.Bl -tag -width Er
			<br />
			.It Bq Er EBADF
			<br />
			.Fa fd
			<br />
			is not a valid descriptor.
			<br />
			.It Bq Er EINVAL
			<br />
			.Fa fd
			<br />
			refers to a socket, not to a file.
			<br />
			.It Bq Er EIO
			<br />
			An I/O error occurred while reading from or writing to the file system.
			<br />
			.El
		</div>
		<p>
			Most (if not all) system calls set the <span class="var">errno</span> global error upon failure.  This, erroneously, was
			not mentioned in the <span class="sec">RETURN VALUES</span> section, but is documented here.
		</p>
		<div class="mdocin">
			.Sh SEE ALSO
			<br />
			.Xr sync 2 ,
			<br />
			.Xr sync 8
			<br />
			.Sh HISTORY
			<br />
			The
			<br />
			.Fn fsync
			<br />
			function call appeared in
			<br />
			.Bx 4.2 .
		</div>
		<p>
			Note that the cross-references in <span class="sec">SEE ALSO</span> are ordered first by section, then alphabetically.
			The <a href="#macro_bx" class="macro">Bx</a> is referenced as the origin of the system call.  The <span
				class="sec">STANDARDS</span> section is sorely missing, as <span class="func">fsync</span> is a function
			specified by <a href="#posix" class="term">POSIX</a>.1-2008 standard.
		</p>
		<p>
			We again found several inconsistent uses of <span class="lang">mdoc</span> in this case study.  Let this serve as a
			reminder that if you find bad or unusual <span class="lang">mdoc</span> in your manuals, notify the authors!  A bug in a
			manual is just as important as a bug in the code.
		</p>
	</div>
	<div class="page">
		<h1>
			Manual Syntax and Structure
		</h1>
		<p>
			In the last part, I introduced some <span class="lang">mdoc</span> language syntax by way of example.  We covered <a
				href="#commands">Commands</a> and <a href="#functions">Functions</a>.  In this part,
			I'll study the structure of the UNIX manual itself.
		</p>
		<p>
			Historically, the syntax and structure of <span class="lang">mdoc</span> derive from <a class="lang term"
				href="#roff">roff</a>, a text processing language predating even <a class="term"
				href="#unix">UNIX</a>.  <span class="lang">mdoc</span> was in fact a bundle of macros expanded by a
			formatter into <span class="lang">roff</span> &mdash; not a separate language.  Only recently has <span
				class="lang">mdoc</span> been mature enough to consider as a standalone language.
		</p>
		<p>
			The general syntax of <span class="lang">roff</span> (and thus <span class="lang">mdoc</span>) can be traced to the <a
				class="term" href="#runoff">RUNOFF</a> command from the mid-sixties!  The conventions of section
			names and manual categories were formalised later, in the early seventies, with the Version 1 AT&amp;T UNIX <a
				class="term" href="#unix_programmers_manual">Programmer's Manual</a>.
		</p>
		<p>
			Although the focus of this book is obviously on <span class="lang">mdoc</span>, a great deal of its idiosyncrasies
			derive from <span class="lang">roff</span>, so we'll spend some time discussing seemingly-unnecessary complexity in the
			context of general text processing.
		</p>
		<p>
			I reiterate that this is <i>not</i> a canonical <span class="lang">mdoc</span> reference: <span class="lang">mdoc</span>
			is not a standard, and varies in subtle ways across formatters and operating systems.  In this part, I'll discuss only
			the portable parts of <span class="lang">mdoc</span>.
		</p>
	</div>
	<div class="page">
		<h2>
			Syntax
		</h2>
		<p>
			Before studying the structure of <span class="lang">mdoc</span> manuals, let's review the language we've seen so far.
			Foremost, we've noticed that <span class="lang">mdoc</span> documents consist only of printable <a class="term"
				href="#ascii">ASCII</a> characters.  We noted that a period at the beginning of a line indicates a
			<span class="lang">mdoc</span> macro:
		</p>
		<div class="mdocin">
			.Qq hello, world
		</div>
		<p>
			It's safe to say, in this case, that <span class="lang">mdoc</span> is line-oriented in that programme flow is in part
			governed by position on a line.  In the case of <a href="#macro_qq" class="macro">Qq</a>, we saw how the
			macro extends to the end of the line.  This is also the first notion of scope, specifically scoping to the end of line.
			We then saw examples where scope covers multiple lines and accommodates for nested macros as well as text.
		</p>
		<div class="mdocin">
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Nm
			<br />
			utility...
		</div>
		<p>
			We were briefly introduced to the concept of macros accepting flags and flag arguments.
		</p>
		<div class="mdocin">
			.Bl -tag -width Ds
			<br />
			.It List key.
			<br />
			List value.
			<br />
			.El
		</div>
		<p>
			Finally, we noted that double-quotes have special semantic significance, which led to the topic of escaped terms such as
			<span class="screen">\(dq</span> for a double-quote character.  We also saw how punctuation is treated in special ways
			when lying at line boundaries.
		</p>
		<div class="mdocin">
			End of sentence, end of line.
			<br />
			Same goes with
			<br />
			.Em macros .
		</div>
		<p>
			In this chapter, we'll formalise these concepts.  I'll draw my terminology from the literature of formal languages and
			grammar, but it's not necessary to be familiar with the terms beforehand.
		</p>
	</div>
	<div class="page">
		<h3>
			Input Encoding
		</h3>
		<p>
			Without exception, a well-formed <span class="lang">mdoc</span> document consists only of <a class="term"
				href="#ascii">ASCII</a> printable characters, the space character, the newline character, and in
			some cases the tab character.  Most modern formatters allow for CR+LF newlines <span class="screen">\r\n</span>, but
			this is not portable.  Modern formatters also accomodate for unlimit to line length; this is not necessarily the case
			for legacy formatters.
		</p>
		<p>
			Unilaterally, the backslash <span class="screen">\</span> is always interpreted as the beginning of an <a
				href="#escape_sequences">escape sequence</a>.  If an escape precedes a newline, it escapes the
			current line:
		</p>
		<div class="mdocin">
			.Em This is considered one \
			<br />
			line of input.
		</div>
		<h4 id="macro_line">
			Macro Line
		</h4>
		<p>
			Formally speaking, a macro line is one beginning with a control character.  In <span class="lang">mdoc</span>, this is
			traditionally the <span class="screen">.</span> character, although historical documents may also use the <span
				class="screen">'</span> character.  This notation extends back to the historical <a class="term"
				href="#runoff">RUNOFF</a> utility.
		</p>
		<blockquote cite="http://mit.edu/Saltzer/www/publications/CC-244.html">
			<p>
				<span class="under">Control Words</span>:
			</p>
			<p>
				Input generally consists of English text, 360 or  fewer characters to a line.  Control words must begin a new
				line, and begin with a period so that they  may  be  distinguished from other text.  RUNOFF does not print the
				control  words.
			</p>
		</blockquote>
		<p>
			A line with only a control character followed by zero or more whitespace characters is stripped from input.
		</p>
		<p>
			A macro line may, in some circumstances, contain more macros.  The first macro &mdash; the one following the control
			character &mdash; may then be distinguished as the line macro.
		</p>
		<p>
			On macro lines the following non-alphanumeric characters are syntactically meaningful as follows.  These characters are
			collectively called reserved characters.
		</p>
		<table id="reserved" class="tbl">
			<col style="width: 5em;" />
			<col />
			<tbody>
				<tr>
					<td><span class="screen">!</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">&quot;</span></td>
					<td>control character (<a href="#quotation">quotation</a>)</td>
				</tr>
				<tr>
					<td><span class="screen">(</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">)</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">,</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">-</span></td>
					<td>control character (<a href="#macros">macro argument</a>)</td>
				</tr>
				<tr>
					<td><span class="screen">.</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">:</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">;</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">?</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">[</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">\</span></td>
					<td>control character (<a href="#escape_sequences">escape sequence</a>)</td>
				</tr>
				<tr>
					<td><span class="screen">]</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
				<tr>
					<td><span class="screen">|</span></td>
					<td><a href="#punctuation">punctuation</a></td>
				</tr>
			</tbody>
		</table>
		<p>
			To pass these characters along as literal text, you must either escape or quote them.
		</p>
		<p>
			If an unescaped space character is encountered on a macro line, it is used to delimit macros, macro arguments, and
			flags.  Multiple consecutive space characters have no effect on output.
		</p>
		<div class="mdocin">
			.Em Hello,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;World
			<br />
			.Em Hello, World
		</div>
		<p>
			The spaces between <span class="screen">Hello,</span> and <span class="screen">world</span> delimit arguments in this
			case, and produce the same output of <i>Hello, World</i> without extra spaces.
		</p>
		<h4 id="text_line">
			Text Line
		</h4>
		<p>
			A text line is any line <i>not</i> beginning with a control character.  Text lines are never parsed for macros and may
			consist of printable ASCII character.  Text lines are concatenated together when forming output, so unless in certain
			circumstances, newlines are stripped from input.  Using a blank text line as a vertical separator is not portable.
		</p>
		<p>
			If a space character is encountered on a text line, it is reproduced verbatim in the output.
		</p>
		<div class="mdocin">
			Hello,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;World
			<br />
			Hello, World
		</div>
		<p>
			The spaces between <span class="screen">Hello,</span> and <span class="screen">world</span> will be reproduced in both
			cases as-is.  However, it is considered non-portable to use spaces on a text-line to shape output: <a class="term"
				href="#html">HTML</a>, for example, by default collapses whitespace.  Secondly, consider whether
			controlled spacing between text in an otherwise free-form text sequence is appropriate.  In most space-retaining cases,
			such as in source code examples, you're better off with a literal display mode such as covered at the end of this
			section.
		</p>
		<p>
			<b>Do not</b> use the space-retaining feature to create double-spaces following a sentential period!  See <a
				href="#sentential_punctuation">Sentential Punctuation</a> for how to do this properly.
		</p>
		<p>
			If the first letter of a text line is a space character, the output line shall be preceded by a newline.  This creates
			the effect of an implicit literal display.
		</p>
		<div class="mdocin">
			Hello, World.
			<br />
			&nbsp;&nbsp;The newline, leading spaces, and in-line&nbsp;&nbsp;&nbsp;&nbsp;spacing are retained.
			<br />
			This is free-form text.
		</div>
		<p>
			The portability of this behaviour is unknown.  For greater portability (and semantic annotation), a literal display mode
			should be opened instead with, for example, the <a class="macro" href="#macro_bd">Bd</a> <span
				class="macroflag">literal</span>:
		</p>
		<div class="mdocin">
			Hello, World.
			<br />
			.Bd -literal -compact
			<br />
			&nbsp;&nbsp;The newline and leading spaces are retained.
			<br />
			.Ed
			<br />
			While this is not.
		</div>
		<p>
			In this example, the <span class="macroflag">compact</span> flag prevents leading vertical space.  To effect a vertical
			space following the literal display, use a <a class="macro" href="#macro_pp">Pp</a>.
		</p>
		<div class="mdocin">
			Consider the following example:
			<br />
			.Bd -literal
			<br />
			int a_function(int *foo, int bar) {
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;*foo += bar;
			<br />
			}
			<br />
			.Ed
			<br />
			.Pp
			<br />
			This is subsequent text.
		</div>
	</div>
	<div class="page">
		<h3 id="escape_sequences">
			Escape Sequences
		</h3>
		<p>
			An escape sequence is any grouping of characters following a backslash <span class="screen">\</span>.  This may happen
			anywhere in input.  What follows the escape sequence syntactically depends upon the first letter.  The following
			sections describe common escape sequences.  The use of any other sequence is strongly discouraged for portable manuals;
			in fact, the use of any escape beyond <span class="screen">\&amp;</span> should be strongly avoided: it makes manuals in
			different output formats inconsistent depending on their methods of glyph rendering.
		</p>
		<h4 id="special_characters">
			Special Characters
		</h4>
		<p>
			Special characters allow the encoding of non-<a class="term" href="#ascii">ASCII</a> characters and, in <a
				class="term" href="#macro_line">macro lines</a>, the use of <a
				href="#reserved">reserved characters</a>.  Special characters may be invoked anywhere in input.
		</p>
		<p>
			There are three forms of special character, distinguished by the number of letters in the sequence.
		</p>
		<table class="tbl">
			<col style="width: 5em;" />
			<col />
			<tbody>
				<tr>
					<td><span class="screen">\n</span></td>
					<td>one-letter</td>
				</tr>
				<tr>
					<td><span class="screen">\(nn</span></td>
					<td>two-letter</td>
				</tr>
				<tr>
					<td><span class="screen">\[N]</span></td>
					<td><i>n</i>-letter</td>
				</tr>
			</tbody>
		</table>
		<p>
			The <i>n</i>-letter form may be used to express any of the others.  For example, <span class="screen">\&amp;</span> (a
			zero-width space) is equivalent to <span class="screen">\[&amp;]</span>.  The most common escape sequence is in fact
			<span class="screen">\&amp;</span>, a non-printing, zero-width space.  When preceding a word, it automatically causes it
			to be rendered as regular text:
		</p>
		<div class="mdocin">
			The following flags are also macros:
			<br />
			.Fl \&amp;Ar
		</div>
		<p>
			If the <span class="screen">Ar</span> were not preceded with an escape, it would have be interpreted as the <a
				class="macro" href="#macro_ar">Ar</a> macro instead of the flags <span class="cmdflag">Ar</span>.  An
			alternative to this is to quote the argument (see <a href="#quotation">Quotation</a>).  The zero-width
			escape is found more readily in literal contexts beginning with a period, such as
		</p>
		<div class="mdocin">
			.Bd -literal
			<br />
			\&amp;.Fl Ar
			<br />
			.Ed
		</div>
		<h4>
			Predefined Strings
		</h4>
		<p>
			An alternative form of special character is the predefined string.  These are legacy <a class="term"
				href="#roff">roff</a> constructs of an escape sequence that may be programmatically set or unset.
			The syntax for predefined strings follows:
		</p>
		<table class="tbl">
			<col style="width: 5em;" />
			<col />
			<tbody>
				<tr>
					<td><span class="screen">\*n</span></td>
					<td>one-letter</td>
				</tr>
				<tr>
					<td><span class="screen">\*(nn</span></td>
					<td>two-letter</td>
				</tr>
				<tr>
					<td><span class="screen">\*[N]</span></td>
					<td><i>n</i>-letter</td>
				</tr>
			</tbody>
		</table>
		<p>
			The use of predefined strings is discouraged in portable manuals, as available strings may differ between
			implementations and formatters.
		</p>
	</div>
	<div class="page">
		<h3>
			Comments
		</h3>
		<p>
			Comments &mdash; words in an <span class="lang">mdoc</span> document not interpreted by the formatter &mdash; are
			indicated by the <a href="#special_characters">special character</a> <span class="screen">\&quot;</span>.
		</p>
		<div class="mdocin">
			Regular text. \" In a comment.
			<br />
			.Em A macro . \" Another comment.
		</div>
		<p>
			The comment extends from the special character to the end of the line.  If the newline is escaped, the comment only
			applies to the current line.  In other words, the newline escape is commented.
		</p>
		<div class="mdocin">
			Not in a comment, \" in a comment \
			<br />
			Not in a comment.
		</div>
		<p>
			A comment may span an entire line if it's specified as a pseudo-macro, that is, following the control character <span
				class="screen">.</span>.
		</p>
		<div class="mdocin">
			.\" This is a full-line comment.
		</div>
	</div>
	<div class="page">
		<h3 id="macros">
			Macros
		</h3>
		<p>
			So far we've considered several different types of macros.  A macro is usually a terse, two or three-character sequence
			specified on a <a href="#macro_line">macro line</a>.  In this section I formalise the various types of
			macros, categorised by their scope rules.  As with many other languages, macros instructions are either scoped to one
			line (following a single instruction), which I call in-line; or to multiple lines (bracketed between instructions),
			which I call blocked.  Block macros are usually invoked on a line of their own, as with <a class="macro"
				href="#macro_bd">Bd</a>, but may also be invoked within a line.
		</p>
		<p>
			Generally speaking, a macro is syntactically defined as having a macro name, and optionally flags and with optional flag
			arguments.  The arguments to a macro depend on its scope rules.
		</p>
		<div class="mdocsyntax">
			<span class="macro">Name</span> 
			<span class="macroopt">
				<span class="macroflag">Flag</span> 
				<span class="macroopt">
					<span class="macroarg">Arg</span>
				</span>
			</span>
		</div>
		<p>
			The hyphen <span class="screen">-</span> indicates a macro flag only when the preceding macro accepts arguments.
		</p>
		<h4 id="inline_macros">
			In-line Macro
		</h4>
		<p>
			An in-line macro's arguments are scoped to the current line.  Its scope may also be closed out by subsequent macros: an
			in-line macro can never contain a nested macro.  For a complete reference, see <a class="external"
				href="#x496e2d6c696e65">In-Line</a> macros in the <a class="external lang"
				href="http://mdocml.bsd.lv/mdoc.7.html">mdoc</a> reference.
		</p>
		<div class="mdocsyntax">
			<span class="macro">Name</span>
			<span class="macroopt">
				<span class="macroflag">Flag</span> 
				<span class="macroopt">
					<span class="macroarg">Flag Arg</span>
				</span>
			</span>
			<span class="macroopt">
				<span class="macroarg">Arg...</span>
			</span>
		</div>
		<p>
			Not all in-line macros accept arguments, and some in-line macros accept a fixed number of arguments.
		</p>
		<p>
			For example, the regular way of structuring command-line arguments, as described initially in the <a
				href="#elaborate_function">Elaborate Function</a> guide, is a command flag, followed by flag
			arguments, followed by regular arguments.  We can put most invocation forms on one line as follows.
		</p>
		<div class="mdocsyntax">
			.<span style="border: 1px dashed green; padding: 2px;"><a class="macro" href="#macro_op">Op</a>
				<span style="border: 1px solid blue;"><a class="macro" href="#macro_ar">Fl</a>
					<span class="macroarg">W</span></span>
				<span style="border: 1px solid blue;"><a class="macro" href="#macro_ns">Ns</a></span>
				<span style="border: 1px solid blue;"><a class="macro" href="#macro_ar">Ar</a>
					<span class="macroarg">level</span></span>
			</span>
		</div>
		<p>
			In this example, <a href="#macro_ar" class="macro">Ar</a>, <a href="#macro_fl"
				class="macro">Fl</a>, and <a href="#macro_ns" class="macro">Ns</a> are in-line macros.  The <a
				href="#macro_op" class="macro">Op</a> is a block partial-implicit.  The <a
				href="#macro_fl" class="macro">Fl</a> macro opens within the <a href="#macro_op"
				class="macro">Op</a> and is closed by the <a href="#macro_ns" class="macro">Ns</a>, which accepts no
			arguments at all.  This suppresses the space between the flag and its arguments (this alternative style is used at
			times, but discouraged).  The arguments are opened by <a href="#macro_ar" class="macro">Ar</a> and close at
			the end of the line.
		</p>
		<p>
			The following is an example of macros with a fixed number of arguments:
		</p>
		<div class="mdocsyntax">
			.<span style="border: 1px solid blue;"><a class="macro" href="#macro_xr">Xr</a>
				<span class="macroarg">mandoc</span>
				<span class="macroarg">1</span></span>
			<span style="border: 1px solid blue;"><a class="macro" href="#macro_ap">Ap</a></span>
			s
		</div>
		<p>
			The <a class="macro" href="#macro_xr">Xr</a> macro accepts the <span class="macroarg">mandoc</span> and
			<span class="macroarg">1</span> arguments, then reverts to accepting text.  The <a class="macro"
				href="#macro_ap">Ap</a> accepts no arguments, so it immediately reverts to the trailing text.
		</p>
		<p>
			Finally, an example of an in-line macro accepting flags follows:
		</p>
		<div class="mdocsyntax">
			.<span style="border: 1px solid blue;"><a class="macro" href="#macro_st">St</a>
				<span class="macroflag">ansiC</span></span>
		</div>
		<p>
			The argument to <a class="macro" href="#macro_st">St</a> specifies the standard to be printed.
		</p>
		<h4 id="block_partial_implicit">
			Block Partial Implicit
		</h4>
		<p>
			A block partial macro is similar to an <a href="#inline_macros">in-line macro</a> in that its scope is restricted to the
			current line: it is <i>implicitly</i> closed by the end of line (as opposed to <a href="#block_partial_explicit">block
				partial explicit</a> macros) and <i>partial</i> in that it only extends to the current line (as opposed to <a
				href="#block_full_implicit">block full implicit</a> macros).  Unlike an in-line macro, it accepts nested macros
			(hence <i>block</i> macro).  For a complete reference, see <a class="external"
				href="#x426c6f636b207061727469616c2d696d706c69636974">Block Partial Implicit</a>
			macros in the <a class="external lang" href="http://mdocml.bsd.lv/mdoc.7.html">mdoc</a> reference.
		</p>
		<div class="mdocsyntax">
			<span class="macro">Name</span>
			<span class="macroopt">
				<span class="macroflag">Flag</span> 
				<span class="macroopt">
					<span class="macroarg">Flag Arg</span>
				</span>
			</span>
			<span class="macroopt">
				<span class="macroarg">Arg|Macro...</span>
			</span>
		</div>
		<p>
			The scope of a partial block macro is always closed by the end of the line; any macros between it and the end of line
			are interpreted as nested macros.  We began this book with the block partial implicit macro <a class="macro"
				href="#macro_qq">Qq</a>.  The nested qualities of this macro category may be seen by embedding <a
				class="macro" href="#macro_qq">Qq</a> and <a class="macro" href="#macro_pq">Pq</a>
		</p>
		<div class="mdocsyntax">
			.<span style="border: 1px dashed green; padding: 2px;"><a class="macro" href="#macro_pq">Pq</a>
				<span style="border: 1px solid blue;"><a class="macro" href="#macro_qq">Qq</a>
					<span class="macroarg">Parenthesised quotation .</span>
				</span>
			</span>
		</div>
		<p>
			Be warned.  If you open but do not close a <a href="#block_partial_explicit">block partial explicit</a> macro before the
			end of the line, behaviour is not always well-defined as the scope is broken.
		</p>
		<h4 id="block_full_implicit">
			Block Full Implicit
		</h4>
		<p>
			A macro seen early on, the <a class="macro" href="#macro_sh">Sh</a> macro, is block full implicit.  Unlike
			<a href="#block_partial_implicit">block partial implicit</a> macros, these consist of multiple lines (they are
			<i>blocks</i>) and treat the line arguments and multi-line arguments differently (<i>full</i>).
			For a complete reference, see <a class="external"
				href="#x426c6f636b2066756c6c2d696d706c69636974">Block Full Implicit</a>
			macros in the <a class="external lang" href="http://mdocml.bsd.lv/mdoc.7.html">mdoc</a> reference.
		</p>
		<div class="mdocsyntax">
			.<span class="macro">Begin</span>
			<span class="macroopt">
				<span class="macroflag">Flag</span> 
				<span class="macroopt">
					<span class="macroarg">Flag Arg</span>
				</span>
			</span>
			<span class="macroopt">
				<span class="macroarg">Arg...</span>
			</span>
			<br />
			<span class="macroopt">
				<span class="macroarg">Arg...</span>
			</span>
		</div>
		<p>
			The scope of <span class="macro">Begin</span> is closed out implicitly &mdash; by one of several possible macros or the
			end of file.  The notion of a <i>full</i> macro is obvious when considering <a class="macro"
				href="#macro_sh">Sh</a>:
		</p>
		<div class="mdocsyntax">
			<div style="border: 1px solid blue; padding: 2px;">
				.<span style="border: 1px dashed green;"><a class="macro" href="#macro_st">Sh</a> 
					<span class="macroargs">SECTION 1</span></span>
				<br style="margin: 2px;" />
				<span style="border: 1px dashed green;">Sectional text.</span>
			</div>
			<div style="border: 1px solid blue; padding: 2px;">
				.<span style="border: 1px dashed green;"><a class="macro" href="#macro_st">Sh</a> 
					<span class="macroargs">SECTION 2</span></span>
				<br style="margin: 2px;" />
				<span style="border: 1px dashed green;">Sectional text.</span>
			</div>
		</div>
		<p>
			In this, the macro must separately decorate its line arguments and multi-line arguments.  In this case, the line
			arguments must be bolded while the multi-line arguments must be indented.  The <a class="macro"
				href="#macro_sh">Sh</a> macro is closed out by a subsequent <a class="macro"
				href="#macro_sh">Sh</a> or the end of file.  Compare this to <a class="macro"
				href="#macro_ss">Ss</a>, which closes out with a subsequent <a class="macro"
				href="#macro_sh">Sh</a>, <a class="macro" href="#macro_ss">Ss</a>, or end of file.
		</p>
		<h4 id="block_partial_explicit">
			Block Partial Explicit
		</h4>
		<p>
			The simplest multi-line macro is the block partial explicit, which is opened and closed by two separate
			(<i>explicit</i>) macros.  It is <i>partial</i> because it does not differentiate between arguments on the current line
			or subsequent lines, as opposed to <a href="#block_full_explicit">block full explicit</a> macros.  The pair of macros
			involved in a full block macro are called the beginning and ending macros.
			For a complete reference, see <a class="external"
				href="#x426c6f636b207061727469616c2d6578706c69636974">Block Partial Explicit</a>
			macros in the <a class="external lang" href="http://mdocml.bsd.lv/mdoc.7.html">mdoc</a> reference.
		</p>
		<div class="mdocsyntax">
			.<span class="macro">Begin</span>
			<span class="macroopt">
				<span class="macroflag">Flag</span> 
				<span class="macroopt">
					<span class="macroarg">Flag Arg</span>
				</span>
			</span>
			<span class="macroopt">
				<span class="macroarg">Arg...</span>
			</span>
			<br />
			<span class="macroopt">
				<span class="macroarg">Arg...</span>
			</span>
			<br />
			.<span class="macro">End</span>
		</div>
		<p>
			One must be careful, in full block macros, not to break the scope of other block macros, or behaviour is undefined.
		</p>
		<p>
			We have not yet considered a block partial explicit macro pair in this book.  But we can do so by considering <a
				href="#macro_oo" class="macro">Oo</a> and <a class="macro" href="#macro_oc">Oc</a>.  This pair of
			macros, for option open and option close, extend the behaviour of <a href="#macro_op" class="macro">Op</a>
			to multiple lines.
		</p>
		<div class="mdocsyntax">
			.<a class="macro" href="#macro_fl">Fl</a> 
			<span class="macroarg">W</span>
			<a class="macro" href="#macro_oo">Oo</a>
			<br />
			<span class="macroarg">warn</span>|<span class="macroarg">error</span>|<span class="macroarg">fatal</span>
			<br />
			.<a class="macro" href="#macro_oc">Oc</a>
		</div>
		<h4 id="block_full_explicit">
			Block Full Explicit
		</h4>
		<p>
			The block full explicit macros are <i>full</i> in the sense that arguments on the macro line and arguments following are
			treated differently (like <a href="#block_full_implicit">block full implicit</a> macros).  The earliest example of this
			is the <a href="#macro_bl" class="macro">Bl</a>.  These macros are <i>explicitly</i> closed by a closing
			macro and may contain nested macros.  For a complete reference, see <a class="external"
				href="#x426c6f636b2066756c6c2d6578706c69636974">Block Full Explicit</a> macros
			in the <a class="external lang" href="http://mdocml.bsd.lv/mdoc.7.html">mdoc</a> reference.
		</p>
		<p>
			Consider the <a href="#macro_bd" class="macro">Bd</a> macro, which does not accept line arguments (most
			block full explicit macros do not accept line arguments).  It is manually closed by <a href="#macro_ed"
				class="macro">Ed</a>.
		</p>
		<div class="mdocsyntax">
			<div style="border: 1px solid blue; padding: 2px;">
				.<span style="border: 1px dashed green;"><a class="macro" href="#macro_bd">Bd</a> 
					<span class="macroflag">ragged</span>
					<span class="macroflag">offset</span>
					<span class="macroargs">indent</span></span>
				<div style="border: 1px dashed green; margin: 2px;">
					Display text.
					<br />
					More display text.
				</div>
				.<a class="macro" href="#macro_ed">Ed</a> 
			</div>
		</div>
		<p>
			In this example, the text between the <a class="macro" href="#macro_bd">Bd</a> and <a class="macro"
				href="#macro_ed">Ed</a> are treated specially.
		</p>
	</div>
	<div class="page">
		<h3 id="punctuation">
			Punctuation
		</h3>
		<p>
			The <span class="lang">mdoc</span> language, in descending from the type-setting language <a class="lang term"
				href="#roff">roff</a>, has significant type-setting capabilities.  Punctuation is treated
			specially in all <span class="lang">mdoc</span> documents, both in terms of macro and text lines.
		</p>
		<p>
			The following characters are considered punctuation:
		</p>
		<table id="punctuation_table" class="tbl">
			<col style="width: 5em;" />
			<col />
			<tbody>
				<tr>
					<td><span class="screen">!</span></td>
					<td>ending sentence</td>
				</tr>
				<tr>
					<td><span class="screen">&quot;</span></td>
					<td>ending enclosure</td>
				</tr>
				<tr>
					<td><span class="screen">(</span></td>
					<td>opening enclosure</td>
				</tr>
				<tr>
					<td><span class="screen">)</span></td>
					<td>ending enclosure</td>
				</tr>
				<tr>
					<td><span class="screen">,</span></td>
					<td>ending</td>
				</tr>
				<tr>
					<td><span class="screen">.</span></td>
					<td>ending sentence</td>
				</tr>
				<tr>
					<td><span class="screen">:</span></td>
					<td>ending</td>
				</tr>
				<tr>
					<td><span class="screen">;</span></td>
					<td>ending</td>
				</tr>
				<tr>
					<td><span class="screen">?</span></td>
					<td>ending sentence</td>
				</tr>
				<tr>
					<td><span class="screen">[</span></td>
					<td>opening enclosure</td>
				</tr>
				<tr>
					<td><span class="screen">]</span></td>
					<td>ending enclosure</td>
				</tr>
				<tr>
					<td><span class="screen">|</span></td>
					<td>intervening</td>
				</tr>
			</tbody>
		</table>
		<p>
			These are treated specially by the formatter when used in macro lines and at the end of text lines.
		</p>
		<h4 id="sentential_punctuation">
			Sentential Punctuation
		</h4>
		<blockquote>
			<p>
				End of Sentence, End of Line.
			</p>
		</blockquote>
		<p>
			The end of a sentence should always be at the end of a line.  This way, the formatter can recognise a sentence by the
			punctuation used and insert the correct amount of spaces.  If supported by the output media (<a class="term"
				href="#html">HTML</a>, for example, does not), all modern <span class="lang">mdoc</span>
			formatters use <a class="term" href="#english_spacing">English spacing</a> to mark sentence boundaries.
			The <q>ending sentence</q> punctuation in the <a href="#punctuation_table">punctuation table</a> marks an end of sentence.
		</p>
		<p>
			In <a href="#text_line">text lines</a>, sentence punctuation should always occur at the end of the line.
		</p>
		<div class="mdocin">
			End of sentence.
			<br />
			End of line.
			<br />
			(&quot;Even with nested sentences.&quot;)
		</div>
		<p>
			Note, in the last sentence, that the formatter will recognise sentence punctuation even when followed by <q>ending
				enclosure</q> punctuation as noted in the <a href="#punctuation_table">punctuation table</a>. 
		</p>
		<p>
			However, take care that non-sentence punctuation, such as for abbreviations, does not happen to fall at
			the line boundary.
		</p>
		<div class="mdocin">
			Paging Dr.
			<br />
			Freud.
		</div>
		<p>
			In this case, the formatter will interpret <span class="screen">Dr.</span> as ending a sentence.  In this event, you can
			either restructure your line or add a zero-width escape following the period.
		</p>
		<div class="mdocin">
			Paging Dr.\&amp;
			<br />
			Freud.
		</div>
		<p>
			<a href="#macro_line">Macro lines</a> are slightly more complicated.  The same rules apply, but
			punctuation marks must be separated by spaces.  The formatter will understand the role of the punctuation and remove the
			spaces accordingly, or reorder sentence and closing punctuation.
		</p>
		<div class="mdocin">
			Text (parenthesised
			<br />
			.Em text ) .
			<br />
			.Qq Properly period-closed quotation .
		</div>
		<p>
			The punctuation may be escaped by either a trailing escape, as in the text case, or a preceding escape.  In this case it
			is not considered punctuation, but regular text.  Note that this will also cause an intervening space to be printed.
		</p>
		<div class="mdocin">
			.Em End of sentence .
			<br />
			.Em Not end of sentence \&amp;.
			<br />
			.Em Not end of sentence .\&amp;
		</div>
		<h4>
			Regular Punctuation
		</h4>
		<p>
			Non-sentential text line punctuation &mdash; commas, parenthesis, quotes, etc.&mdash; is a matter of literal printing.
		</p>
		<div class="mdocin">
			Some text (punctuation), another "clause".
		</div>
		<p>
			The rules for macro lines are the same but for <a href="#inline_macros">in-line macros</a>, which might
			decorate individual terms with text.  In this case, punctuation as a standalone argument is specially treated in that it
			is not decorated, and whitespace removed according to the punctuation type (opening, closing).
		</p>
		<div class="mdocin">
			.Em ( Nicely spaced and decorated . )
			<br />
			.Em (All text decorated, no end-of-sentence.)
			<br />
			.Em ( Text alright , excepting the period \&amp;. )
		</div>
		<p>
			In the second example, <span class="screen">(All</span> and <span class="screen">end-of-sentence.)</span> are considered
			arguments, and thus not accommodated for in terms of punctuation.  In the third, the period is escaped and thus
			considered regular text.
		</p>
	</div>
	<div class="page">
		<h3 id="quotation">
			Quotation
		</h3>
		<p>
			Several times I've mentioned how to interpret macro arguments as text &mdash; instead of, say, other macros &mdash; by
			quotation.  In this section, I formalise the notion of quoting arguments.  The issue of quotation is fairly complex
			owing to <span class="lang">mdoc</span>'s predecessor, <a class="term lang" href="#roff">roff</a>.  
		</p>
		<p>
			In short, quoting arguments to macros passes the enclosed text verbatim as a single argument.  An obvious case follows:
		</p>
		<div class="mdocin">
			.Fl "Ar"
		</div>
		<p>
			By quoting <span class="screen">Ar</span>, it is passed verbatim to <a class="macro" href="#macro_fl">Fl</a>
			If not, it would be interpreted as the macro <a class="macro" href="#macro_ar">Ar</a> and open a new macro
			scope.  What's worse is that the syntax is entirely legal!  This illustrates a minor short-coming of <span
				class="lang">mdoc</span>: beginners may unwittingly invoke macros (such as <a class="macro"
				href="#macro_ar">Ar</a> in our example).  Printing a warning would cause more harm than good with
			well-formed manuals; thus, it's the responsibility of the document author to double-check that macro instructions are
			properly treated. 
		</p>
		<p>
			This condition could have been avoided by beginning the argument <span class="screen">Ar</span> with a zero-width
			escape, such as <span class="screen">\&amp;Ar</span>.  The need for quotation is more obvious with the <a class="macro"
				href="#macro_fn">Fn</a> macro:
		</p>
		<div class="mdocin">
			.Fn 
			<span style="border: 1px dashed green;">int</span> 
			<span style="border: 1px dashed green;">foo</span> 
			<span style="border: 1px dashed green;">int</span>
			<span style="border: 1px dashed green;">bar</span>
		</div>
		<p>
			The syntax of <a class="macro" href="#macro_fn">Fn</a> is that it first accepts an optional function type,
			then a function name, then arguments to the function.  These arguments usually include a type followed by a name.  In
			our example, <span class="screen">int</span> refers to the function type, <span class="screen">foo</span> to the name,
			and both <span class="screen">int</span> and <span class="screen">bar</span> as separate arguments.
		</p>
		<p>
			Our intention, however, was to have <span class="screen">int bar</span> considered a single argument.  To do so, we
			would need to quote.
		</p>
		<div class="mdocin">
			.Fn 
			<span style="border: 1px dashed green;">int</span> 
			<span style="border: 1px dashed green;">foo</span> 
			"<span style="border: 1px dashed green;">int bar</span>"
		</div>
		<p>
			The <span class="screen">int bar</span> argument is now passed intact to the macro.
		</p>
		<p>
			To include quotation marks in quoted text, use two quotation marks in a row.
		</p>
		<div class="mdocin">
			.Li <span style="border: 1px dashed green;">"""&nbsp;&nbsp;&nbsp;&nbsp;"</span>
		</div>
		<p>
			This artificial invocation passes a quotation mark followed by four whitespaces to the <a href="#macro_li"
				class="macro">Li</a> macro.  It is, however, unwise to use this language component: it's jarring to those
			expecting symmetric quotes, and easy to mis-type, leaving runaway quotes.  It's safer to use an escape, such as <span
				class="screen">\(dq</span>, instead of pair-wise quotations.
		</p>
	</div>
	<div class="page">
		<h2>
			Structure
		</h2>
		<p>
			An <span class="lang">mdoc</span> manual is divided into two logical parts: the prologue and the document body.
		</p>
		<div class="mdocin">
			.\" Prologue follows:
			<br />
			.Dd May 26 2011
			<br />
			.Dt MDOC 7
			<br />
			.Os
			<br />
			.\" Document body follows:
			<br />
			.Sh NAME
			<br />
			.Nm mdoc
			<br />
			.Nd mdoc language reference
			<br />
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Nm mdoc
			<br />
			language is used to format
			<br />
			.Bx
			<br />
			.Ux
			<br />
			manuals.
		</div>
		<p>
			The prologue specifies information regarding the manual's classification.  For the most part, this information does not
			change over the course of development.  It specifies the manual's title (which may encompass multiple documented
			components) and category, the date of last editing, the other information.
		</p>
		<div class="mdocin">
			.Dd May 26 2011
			<br />
			.Dt MDOC 7
			<br />
			.Os
		</div>
		<p>
			The document body consists of the documentation content.  This material changes over the course of development, and is
			the bulk of the manual page.  It minimally consists of the component name, invocation syntax (if applicable), and a
			description of operation.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm mdoc
			<br />
			.Nd mdoc language reference
			<br />
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Nm mdoc
			<br />
			language is used to format
			<br />
			.Bx
			<br />
			.Ux
			<br />
			manuals.
		</div>
	</div>
	<div class="page">
		<h3>
			Prologue
		</h3>
		<p>
			The prologue consists at most of the <a href="#macro_dd" class="macro">Dd</a>, <a
				href="#macro_dt" class="macro">Dt</a>, and <a href="#macro_os" class="macro">Os</a>
			macros.  These always occur at the beginning of a manual.
		</p>
		<div class="mdocin">
			.Dd May 26 2011
			<br />
			.Dt MDOC 7
			<br />
			.Os
		</div>
		<p>
			The only firm requirement of the <span class="lang">mdoc</span> prologue is that the <a href="#macro_dd"
				class="macro">Dd</a> macro comes first: many formatting systems will read up to the first macro to determine the
			formatting language.  If <a href="#macro_dd" class="macro">Dd</a> is not encountered first, the <span
				class="lang">mdoc</span> format may not be recognised.
		</p>
		<p>
			Following the <a href="#macro_dd" class="macro">Dd</a>, the prologue is conventionally ordered as first <a
				href="#macro_dt" class="macro">Dt</a> and then <a href="#macro_os" class="macro">Os</a>.
			The <a href="#macro_os" class="macro">Os</a> macro is usually left without arguments, meaning that the
			manual applies to the current system.
		</p>
		<p>
			After parsing the document prologue, the following is known:
		</p>
		<ul>
			<li>The date of last modification.</li>
			<li>The canonical title of the manual.</li>
			<li>The manual category (<q>manual section</q>).</li>
			<li>Whether the manual relates to a particular hardware architecture.</li>
			<li>The relevant operating system.</li>
		</ul>
		<h4>
			Date
		</h4>
		<p>
			The date is specified by the <a href="#macro_dd" class="macro">Dd</a> macro.
		</p>
		<div class="mdocsyntax">
			.<a href="#macro_dd" class="macro">Dd</a> <span class="macroarg">date</span>
		</div>
		<p>
			While no particular date format is required, it's best to use the <span class="screen">month day, year</span> format,
			where <span class="screen">month</span> is the month in English; <span class="screen">day</span> is the day of month;
			and <span class="screen">year</span> is the four-digit year.  Arbitrary white-space may separate the tokens, which may
			also be quoted.
		</p>
		<p>
			Example of canonical form:
		</p>
		<div class="mdocin">
			.Dd June 03, 1991
		</div>
		<p>
			Example of not zero-padded digit form:
		</p>
		<div class="mdocin">
			.Dd June 3, 1991
		</div>
		<p>
			Example of quoted-string form:
		</p>
		<div class="mdocin">
			.Dd "June 3, 1991"
		</div>
		<p>
			All of the above examples will normalise to the third of June, 1991.  It's especially important that the month be in
			English, as not all operating systems support localisation.
		</p>
		<p>
			Some formatters also support a special date format as follows:
		</p>
		<div class="mdocin">
			.Dd $Mdocdate: January 1 2012 $
		</div>
		<p>
			This is usually used in conjunction with source-code control systems that automatically change the date.  Consult your
			formatter's manual for whether it supports this feature.
		</p>
		<h4>
			Title
		</h4>
		<p>
			A manual's title identifies the entire manual document.  It is always specified in uppercase as the first argument of
			the <a href="#macro_dt" class="macro">Dt</a> macro, which conventionally follows the initial <a
				href="#macro_dd" class="macro">Dd</a> macro.
		</p>
		<div class="mdocsyntax">
			.<a href="#macro_dt" class="macro">Dt</a> <span class="macroarg">TITLE</span> <span
				class="macroarg">category</span> <span class="macroopt"><span class="macroarg">architecture</span></span>
		</div>
		<p>
			The title usually corresponds to the file-name of the document, but this is not necessarily the case.
		</p>
		<p>
			In the case of a single-component manual, such as the manual for a single UNIX command or programming function, the
			title corresponds to the manual name as specified with the <span class="sec">SYNOPSIS</span> <a
				href="#macro_nm" class="macro">Nm</a> macro argument.
		</p>
		<p>
			In the event of multiple components, such as a programming library, the title usually corresponds to the library name.
			If multiple commands are specified, such as with aliased names, the canonical form should be used.
		</p>
		<p>
			Example of a title for the <a href="#cmd_ls" class="cmd">ls</a> utility:
		</p>
		<div class="mdocin">
			.Dt LS 1
		</div>
		<p>
			Example of a title for the <span class="lib">libgreeting</span> function library, consisting of the <span
				class="func">hi</span> and <span class="func">hello</span> functions:
		</p>
		<div class="mdocin">
			.Dt GREETING 3
		</div>
		<p>
			If the title is left unspecified by omitting the <a href="#macro_dt" class="macro">Dt</a> macro, behaviour
			is undefined.  Usually a formatter will default to an empty string or <span class="screen">LOCAL</span>.  In general,
			however, a manual without <a href="#macro_dt" class="macro">Dt</a> may be considered incomplete.
		</p>
		<h4>
			Category
		</h4>
		<p>
			The category of a manual, sometimes called the manual section, specifies the type of component a manual describes.  It
			is specified in the second argument of the <a href="#macro_dt" class="macro">Dt</a> macro.
		</p>
		<div class="mdocsyntax">
			.<a href="#macro_dt" class="macro">Dt</a> <span class="macroarg">TITLE</span> <span
				class="macroarg">category</span> <span class="macroopt"><span class="macroarg">architecture</span></span>
		</div>
		<p>
			These categories are dictated by convention extending to the Version 1 AT&amp;T UNIX <a class="term"
				href="#unix_programmers_manual">Programmer's Manual</a>.
		</p>
		<blockquote cite="http://www.cs.bell-labs.com/who/dmr/1stEdman.html">
			<p>
				This manual is divided into seven sections:
			</p>
			<ol style="list-style-type: upper-roman">
				<li>Commands</li>
				<li>System calls</li>
				<li>Subroutines</li>
				<li>Special files</li>
				<li>File formats</li>
				<li>User-maintained programs</li>
				<li>Miscellaneous</li>
			</ol>
			<p>
				Commands are programs intended to be invoked directly by the user, in contradistinction to subroutines, which
				are intended to be called by the user's programs. Commands generally reside in directory <span
					class="under">bin</span> (for binary programs). 
			</p>
		</blockquote>
		<p>
			These sections have been expanded and formalised in the intervening years, amounting to the following modern conventions.
		</p>
		<dl>
			<dt><span class="cat">1</span>: user utilities.</dt>
			<dd>
				Most commands fall under this category.  A user utility is usable by all operators of a UNIX system.  Common
				examples: <a href="#cmd_ls" class="cmd">ls</a>, <a href="#cmd_man" class="cmd">man</a>,
				<a href="#cmd_cat" class="cmd">cat</a>.
			</dd>
			<dt><span class="cat">2</span>: system calls.</dt>
			<dd>
				These are a special class of programming function, usually in C, that do not need header file or linking
				information.  Common examples: <span class="func">open</span>, <span class="func">close</span>, <span
					class="func">write</span>.
			</dd>
			<dt><span class="cat">3</span>: user programming functions.</dt>
			<dd>
				Most functions fall under this category.  A user programming function is available as standalone or library
				function, although some, such as the C library, need not be explicitly linked.  Common examples: <span
					class="func">strcpy</span>, <span class="func">isascii</span>.
			</dd>
			<dt><span class="cat">4</span>: device interfaces.</dt>
			<dd>
				This category is not as common as categories <span class="cat">1</span>&ndash;<span class="cat">3</span>; in
				fact, not all systems use this section at all.  When used, it consists of manuals for hardware device drivers.
				These manuals are usually tied to a particular architecture.
			</dd>
			<dt><span class="cat">5</span>: file formats.</dt>
			<dd>
				This category is not as common as categories <span class="cat">1</span>&ndash;<span class="cat">3</span>.  When
				used, it consists of structure text file documentation.  Common example: <span class="file">passwd</span>.
			</dd>
			<dt><span class="cat">6</span>: games (and user utility miscellanea).</dt>
			<dd>
				This category is not as common as categories <span class="cat">1</span>&ndash;<span class="cat">3</span>, many
				systems do not come pre-supplied with games.  When used, it refers to games or arcana utilities.
			</dd>
			<dt><span class="cat">7</span>: miscellaneous.</dt>
			<dd>
				Introductory materials or general text.  This category is common, but its contents vary from system to system.
			</dd>
			<dt><span class="cat">8</span>: administrative utilities.</dt>
			<dd>
				This consists of utilities for system administration, which may not be accessible or executable by general users
				(see category <span class="cat">1</span>).  Common examples: <a href="#cmd_dump"
					class="cmd">dump</a>, <a href="#cmd_restore" class="cmd">restore</a>, <a
					href="#cmd_fsck" class="cmd">fsck</a>.
			</dd>
			<dt><span class="cat">9</span>: kernel programming functions.</dt>
			<dd> 
				This category is found on few operating systems.  Where applicable, it consists of those functions used in
				operating system internal development (<q>kernel</q> development).
			</dd>
		</dl>
		<p>
			There are several refinements to the numerical category convention.  Perl, Fortran, and Tcl libraries are often grouped
			under category <span class="cat">3p</span>, <span class="cat">3f</span>, and <span class="cat">3tcl</span>,
			respectively.  Perl modules may also fall under <span class="cat">3pm</span>.  Tcl libraries are also found in the <span
				class="cat">n</span> category.
		</p>
		<p>
			Although some common libraries are traditionally referred to with a custom suffix, such as <span class="cat">3ssl</span>
			for the OpenSSL library, this notation is heavily discouraged.
		</p>
		<p>
			Manuals for the X Window System, traditionally bundled with UNIX systems, are categorised under <span
				class="cat">X11</span>.  Manuals for the popular X11R6 distribution of the X Window System may also be listed
			under <span class="cat">X11R6</span>.
		</p>
		<p>
			The <span class="cat">paper</span> category historically consisted of longer papers, the <span class="cat">draft</span>
			category consists of draft manuals, <span class="cat">unass</span> consists of uncategorised manuals, and <span
				class="cat">local</span> consists of local system documentation.  These categories are rarely used and should be
			avoided for portable, readable manuals.
		</p>
		<h4>
			Architecture
		</h4>
		<p>
			Some manuals, especially those in category <span class="cat">4</span> or <span class="cat">9</span>, relate only to a
			particular hardware architecture.  This is a useful specifier in the machine-dependent manuals for category <span
				class="cat">9</span> manuals.
		</p>
		<p>
			These use the optional third argument of the <a href="#macro_dt" class="macro">Dt</a> macro.
		</p>
		<div class="mdocsyntax">
			.<a href="#macro_dt" class="macro">Dt</a> <span class="macroarg">TITLE</span> <span
				class="macroarg">category</span> <span class="macroopt"><span class="macroarg">architecture</span></span>
		</div>
		<p>
			For a list of possible architectures, consult your local documentation.  A safe example is <span
				class="screen">i386</span>, for 32-bit x86-based systems; or <span class="screen">amd64</span> for 64-bit AMD
			systems.
		</p>
		<p>
			A device referring to a particular architecture uses this to explicitly note its relevant architecture.  In normal
			manuals, this should not be used.
		</p>
		<h4>
			Operating System
		</h4>
		<p>
			Similar to architecture, some manuals only pertain to a particular operating system.  This system may be specified to
			the <a href="#macro_os" class="macro">Os</a> macro of the prologue.
		</p>
		<div class="mdocsyntax">
			.<a href="#macro_os" class="macro">Os</a> <span class="macroopt"><span class="macroarg">system</span></span>
		</div>
		<p>
			If <span class="macroarg">system</span> is unspecified, the manual is assumed to apply to any operating system.
		</p>
		<p>
			This form is useful when multiple operating systems have access to local-network administrative manuals, such as in a
			networked file-system environment.  Otherwise, it is rarely used.
		</p>
	</div>
	<div class="page">
		<h3>
			Document Body
		</h3>
		<p>
			The document body begins with the first macro not in the prologue set (<a href="#macro_dd"
				class="macro">Dd</a>, <a href="#macro_dt" class="macro">Dt</a>, and <a href="#macro_os"
				class="macro">Os</a>).  The document body consists of the manual content itself, and varies significantly
			between categories and, of course, the material itself.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm mdoc
			<br />
			.Nd mdoc language reference
			<br />
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Nm mdoc
			<br />
			language is used to format
			<br />
			.Bx
			<br />
			.Ux
			<br />
			manuals.
		</div>
		<p>
			The content of the document body is divided into sections.  Sections are indicated by the <a
				href="#macro_sh" class="macro">Sh</a> macro.
		</p>
		<div class="mdocsyntax">
			.<a href="#macro_sh" class="macro">Sh</a> <span class="macroarg">SECTION NAME</span>
			<br />
			Text within the section...
		</div>
		<p>
			As described in the introduction, a section consists of its line arguments and all subsequent lines until the end of
			file or another <a href="#macro_sh" class="macro">Sh</a> macro.
		</p>
		<p>
			By convention, <a href="#macro_sh" class="macro">Sh</a> arguments are capitalised.  I'll describe
			conventional sections at length in the next chapter, as for the most part follow long-standing document conventions.
		</p>
		<p>
			In general, the document body requires at least the <span class="sec">NAME</span> and <span
				class="sec">DESCRIPTION</span> sections, and usually the <span class="sec">SYNOPSIS</span> section as well.  The
			first section must be <span class="sec">NAME</span>, optionally followed by <span class="sec">SYNOPSIS</span>.  The
			<span class="sec">DESCRIPTION</span> section must follow either the <span class="sec">NAME</span> or <span
				class="sec">SYNOPSIS</span>.
		</p>
	</div>
	<div class="page">
		<h2>
			Layout
		</h2>
		<p>
			An <span class="lang">mdoc</span> document body is divided into sections.  The names and ordering of these sections is
			dictated by convention extending to the Version 1 AT&amp;T UNIX <a class="term"
				href="#unix_programmers_manual">Programmer's Manual</a>.
		</p>
		<blockquote cite="http://www.cs.bell-labs.com/who/dmr/1stEdman.html">
			<ul>
				<li>
					The <span class="under">name</span> section repeats the entry name and gives a very short description of its purpose.
				</li>
				<li>
					The <span class="under">synopsis</span> summarizes the use of the program being described. A few conventions are used, particularly
					in the Commands section.  Underlined words are considered literals, and are typed just as they appear.
					Square brackets ([]) around an argument indicate that the argument is optional. When an argument is
					given as name, it always refers to a file name.  Ellipses ... are used to show that the previous
					argument-prototype may be repeated.  A final convention is used by the commands themselves. An argument
					beginning with a minus sign - is often taken to mean some sort of flag argument even if it appears in a
					position where a file name could appear. Therefore, it is unwise to have files whose names begin with -.
					The description section discusses in detail the subject at hand.
				</li>
				<li>
					The <span class="under">files</span> section gives the names of files which are built into the program.
				</li>
				<li> 
					A <span class="under">see also</span> section gives pointers to related information.
				</li>
				<li>
					A <span class="under">diagnostics</span> section discusses the diagnostics that may be produced. This section tends to be as
					terse as the diagnostics themselves.
				</li>
				<li>
					The <span class="under">bugs</span> section gives known bugs and sometimes deficiencies. occasionally also the suggested fix
					is described.
				</li>
				<li>
					The <span class="under">owner</span> section gives the name of the person or persons to be consulted in case of difficulty.
					The rule has been that the last one to modify something owns it, so the owner is not necessarily the
					author.
				</li>
			</ul>
		</blockquote>
		<p>
			These conventional sections haven't changed much over the years, although more sections have been added and several have
			changed with evolving UNIX operating system conventions.  The full set of modern sections, and their order, is as
			follows.
		</p>
		<dl>
			<dt><span class="sec">NAME</span></dt>
			<dd>Name of all documented components and a collective description.</dd>
			<dt><span class="sec">SYNOPSIS</span></dt>
			<dd>Calling syntax of the components.</dd>
			<dt><span class="sec">DESCRIPTION</span></dt>
			<dd>Description of all components.  This constitutes the bulk of the manual.</dd>
			<dt><span class="sec">IMPLEMENTATION NOTES</span></dt>
			<dd>Specific notes on the implementation of a generic (e.g., standardised) component.</dd>
			<dt><span class="sec">RETURN VALUES</span></dt>
			<dd>Return values, if the components are functions.</dd>
			<dt><span class="sec">ENVIRONMENT</span></dt>
			<dd>Environmental variables affecting the components' operation.</dd>
			<dt><span class="sec">FILES</span></dt>
			<dd>Files affecting the components' operation.</dd>
			<dt><span class="sec">EXIT STATUS</span></dt>
			<dd>Exit status, if the components are commands.</dd>
			<dt><span class="sec">EXAMPLES</span></dt>
			<dd>Brief examples of invocation.</dd>
			<dt><span class="sec">DIAGNOSIS</span></dt>
			<dd>Error conditions, if a command or device driver.</dd>
			<dt><span class="sec">ERRORS</span></dt>
			<dd>Error conditions, if a function or library.</dd>
			<dt><span class="sec">SEE ALSO</span></dt>
			<dd>Links to other relevant manuals or references.</dd>
			<dt><span class="sec">STANDARDS</span></dt>
			<dd>Implemented or referenced standards.</dd>
			<dt><span class="sec">HISTORY</span></dt>
			<dd>A brief history of the components.</dd>
			<dt><span class="sec">AUTHORS</span></dt>
			<dd>The authors of the components.</dd>
			<dt><span class="sec">CAVEATS</span></dt>
			<dd>Caveats regarding the components' operation.</dd>
			<dt><span class="sec">BUGS</span></dt>
			<dd>Known bugs in the components.</dd>
			<dt><span class="sec">SECURITY CONSIDERATIONS</span></dt>
			<dd>Security precautions beyond the scope of the components.</dd>
		</dl>
		<p>
			Only the <span class="sec">NAME</span> and <span class="sec">DESCRIPTION</span> sections are required in the document
			body, although a <span class="sec">SYNOPSIS</span> should appear for most manuals as well.
		</p>
		<p>
			Other sections may be necessary depending on the category.  For example, <span class="sec">RETURN VALUES</span> is found
			for most category <span class="cat">3</span> and <span class="cat">2</span> manuals; while <span class="sec">EXIT
				STATUS</span> is found for most category <span class="cat">1</span>, <span class="cat">6</span>, and <span
				class="cat">8</span> manuals.
		</p>
	</div>
	<div class="page">
		<h3>
			Required Sections
		</h3>
		<p>
			As discussed previously, a section is begun by the <a href="#macro_sh" class="macro">Sh</a> macro and
			continues until the end of file or another section.
		</p>
		<div class="mdocsyntax">
			.<a href="#macro_sh" class="macro">Sh</a> <span class="macroarg">SECTION NAME</span>
			<br />
			Text and macros within the section.
		</div>
		<p>
			What follows is a description of each required section: if your manual does not have the documented section, it should
			not be considered as well-formed.  Do note, however, that some types of manuals lack the <span
				class="sec">SYNOPSIS</span> section.
		</p>
		<h4>
			NAME
		</h4>
		<p>
			The <span class="sec">NAME</span> section immediately follows the document prologue and is thus usually the first macro
			of the document body.  It specifies the name of each documented component, and provides a brief description of the
			components as a whole.
		</p>
		<p>
			The following is an example of the <span class="sec">NAME</span> section for a single utility, <span class="cmd">hi</span>.
		</p>
		<div class="mdocin">
			.Sh NAME
			<br />
			.Nm foo
			<br />
			.Nd print a simple greeting
		</div>
		<p>
			The <a href="#macro_nd" class="macro">Nd</a> macro should consist of a single line without trailing
			punctuation or leading capitalisation.  As a rule of thumb, this description should be a sentence clause in the
			imperative mood for commands and functions, or simply a noun phrase for file formats, devices, and miscellanea.
		</p>
		<p>
			Example imperative:
		</p>
		<div class="mdocin">
			.Nm foo
			<br />
			.Nd print a simple greeting
		</div>
		<p>
			Example noun phrase:
		</p>
		<div class="mdocin">
			.Nm mdoc
			<br />
			.Nd mdoc language reference
		</div>
		<p>
			In the event of multiple named components, such as a function library or aliased commands, comma-separate each command
			but for the last.  It's common to alphabetically order this listing.
		</p>
		<div class="mdocin">
			.Nm hello ,
			<br />
			.Nm hi
			<br />
			.Nd print greetings
		</div>
		<p>
			Note that the punctuation should be separate from the macro argument.  This allows the formatter to distinguish between
			the name and trailing punctuation.
		</p>
		<h4>
			SYNOPSIS
		</h4>
		<p>
			The <span class="sec">SYNOPSIS</span> section, if specified, follows the <span class="sec">NAME</span> section.  It
			specifies the calling syntax of a component, thus, it is necessary for functions and commands.  The <span
				class="sec">SYNOPSIS</span> section has a layout dictated by convention, and depends upon the category.
		</p>
		<h5>
			Commands
		</h5>
		<p>
			For command manuals in category <span class="cat">1</span>, <span class="cat">6</span>, and <span class="cat">9</span>,
			each command must have its full syntax stipulated.
		</p>
		<div class="mdocin">
			.Nm hello
			<br />
			.Op Fl a
			<br />
			.Op Fl o Ar output
			<br />
			.Op Ar prefix
		</div>
		<p>
			This defines three optional arguments for the <span class="cmd">hi</span> command: a flag, a flag with an argument, and
			an argument.  Flags should be purely alphabetical, without regard to whether a flag takes an argument.  Arguments should
			also be alphabetised.
		</p>
		<p>
			Note that if your manual only documents one component, it's unnecessary to re-write the command name for <a
				href="#macro_nm" class="macro">Nm</a>.  If omitted, the last specified <a
				href="#macro_nm" class="macro">Nm</a> in the <span class="sec">NAME</span> will be used.
		</p>
		<p>
			Multiple commands are specified in the order they appear within the <span class="sec">NAME</span> section.
		</p>
		<div class="mdocin">
			.Nm hello
			<br />
			.Op Fl a
			<br />
			.Op Fl o Ar output
			<br />
			.Op Ar prefix
			<br />
			.Nm hi
		</div>
		<p>
			Since there are multiple <a href="#macro_nm" class="macro">Nm</a> macros in the <span
				class="sec">NAME</span> section, it's necessary that we specify the name of each command.  In this example, an
			additional command <span class="cmd">hi</span> is specified, which has neither flags nor arguments.
		</p>
		<h5>
			Functions
		</h5>
		<p>
			Function libraries are more complicated, as they involve more diverse content.  A function library <span
				class="sec">SYNOPSIS</span> section consists of all documented material, including header files, functions,
			variables, macros, and so on.
		</p>
		<p>
			A minimum function manual consists of a single function call and the header file of its prototype (if in a language
			requiring header files, such as C):
		</p>
		<div class="mdocin">
			.In greeting.h
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "int C"
			<br />
			.Fa "const char *output"
			<br />
			.Fc
		</div>
		<p>
			The header file comes before those functions it describes.  If one or more header files are required, list them in the
			order of inclusion in source files.
		</p>
		<div class="mdocin">
			.In sys/types.h
			<br />
			.In greeting.h
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "u_int C"
			<br />
			.Fa "const char *output"
			<br />
			.Fc
		</div>
		<p>
			If multiple functions are documented, list them in the order they appear in the <span class="sec">NAME</span> section.
		</p>
		<div class="mdocin">
			.In sys/types.h
			<br />
			.In greeting.h
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "u_int C"
			<br />
			.Fa "const char *output"
			<br />
			.Fc
			<br />
			.Ft void
			<br />
			.Fn hi
		</div>
		<p>
			List any global variables with the <a href="#macro_vt" class="macro">Vt</a> and/or <a
				href="#macro_va" class="macro">Va</a> macro following function prototypes.
		</p>
		<div class="mdocin">
			.In sys/types.h
			<br />
			.In greeting.h
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "u_int C"
			<br />
			.Fa "const char *output"
			<br />
			.Fc
			<br />
			.Ft void
			<br />
			.Fn hi
			<br />
			.Vt extern const char * const * greetings;
		</div>
		<p>
			Macro definitions, however, should come before the function prototypes.  These use the <a href="#macro_fd"
				class="macro">Fd</a> macro and must include the preprocessor directive for the macro.
		</p>
		<div class="mdocin">
			.In sys/types.h
			<br />
			.In greeting.h
			<br />
			.Fd #define GREETING
			<br />
			.Ft int
			<br />
			.Fo hello
			<br />
			.Fa "u_int C"
			<br />
			.Fa "const char *output"
			<br />
			.Fc
			<br />
			.Ft void
			<br />
			.Fn hi
			<br />
			.Vt extern const char * const * greetings;
		</div>
		<p>
			Some manuals define a range of functions with differing header dependencies.  In general it's not a good idea to group
			these within the same manual. However, if necessary, arrange the functions and variables underneath their header file
			<a href="#macro_in" class="macro">In</a> macros.  These need not necessarily much with the <span
				class="sec">NAME</span> section ordering, but should be as close as possible.
		</p>
		<h4>
			DESCRIPTION
		</h4>
		<p>
			This section documents the component itself, and is usually the longest.  For commands, each command is described in
			detail along with its arguments.  For functions, each function must be described along with its types and arguments.
		</p>
		<h5>
			Commands
		</h5>
		<p>
			A command or set of commands is documented in <span class="sec">DESCRIPTION</span> with a brief explanation of
			behaviour, default usage, then a list of arguments.  Some utilities state default usage following the argument list;
			however, manpages beginning with these statements are more readable and economical.
		</p>
		<div class="mdocin">
			The
			<br />
			.Nm
			<br />
			command prints a mixed-case greeting to standard output.
			<br />
			.Pp
			<br />
			The arguments are as follows:
			<br />
			.Bl -tag -width Ds
			<br />
			.It Fl C
			<br />
			Whether to uppercase the output.
			<br />
			.It Fl o Ar output
			<br />
			A file into which output should be written.
			<br />
			.It Ar prefix
			<br />
			A string prefixed to the output.
			<br />
			.El
		</div>
		<p>
			If multiple commands are included, they should be listed in the order they appear in <span class="sec">NAME</span> and
			<span class="sec">DESCRIPTION</span>.  Remember to specify a documented command, in this case, whenever invoking the <a
				href="#macro_nm" class="macro">Nm</a> macro.  Command exit statuses are documented in <span
				class="sec">EXIT STATUS</span>.
		</p>
		<h5>
			Functions
		</h5>
		<p>
			Functions do not share the <span class="screen">The arguments are as follows</span> convention that commands enjoy.
			Most often, a function is described in paragraph form.
		</p>
		<div class="mdocin">
			The
			<br />
			.Fn hello
			<br />
			function prints a greeting to standard out.
			<br />
			If
			<br />
			.Fa C
			<br />
			is non-zero, output is upper-cased.
			<br />
			If
			<br />
			.Fa prefix
			<br />
			is non-NULL, it is prefixed to the output.
		</div>
		<p>
			A function with many variables, or complicated variables, may wish to choose the same listed-argument notation of
			commands.
		</p>
		<div class="mdocin">
			The
			<br />
			.Fn hello
			<br />
			function prints a greeting to standard out.
			<br />
			The arguments are as follows:
			<br />
			.Bl -tag -width Ds
			<br />
			.It Fa "C"
			<br />
			If non-zero, output is upper-cased.
			<br />
			.It Fa "prefix"
			<br />
			If non-NULL,
			<br />
			.Fa prefix
			<br />
			is prefixed to the output.
			<br />
			.El
		</div>
		<p>
			Above all, you must be careful to document each argument to each function.  Function return values are usually
			documented in <span class="sec">RETURN VALUES</span>.
		</p>
	</div>
	<div class="page">
		<h3>
			Optional Sections
		</h3>
		<p>
			As discussed previously, a section is begun by the <a href="#macro_sh" class="macro">Sh</a> macro and
			continues until the end of file or another section.
		</p>
		<div class="mdocsyntax">
			.<a href="#macro_sh" class="macro">Sh</a> <span class="macroarg">SECTION NAME</span>
			<br />
			Text and macros within the section.
		</div>
		<p>
			What follows is a description of each optional section.  An optional section is not required for a well-formed manual,
			but may be necessary for a manual of a given type.  For example, the <span class="sec">EXIT STATUS</span> section is not
			required, but is necessary for utilities.
		</p>
		<h4>
			IMPLEMENTATION NOTES
		</h4>
		<p>
			For components describing an algorithm, or implementing a generic interface, it's at time useful to document the
			implementation itself.  As this is not relevant to the calling syntax or description of a component, this is relegated
			to the <span class="sec">IMPLEMENTATION NOTES</span> section.
		</p>
		<p>
			Consider a simple sorting function, <span class="func">mysort</span>.
		</p>
		<div class="mdocin">
			.Sh SYNOPSIS
			<br />
			.In mysort.h
			<br />
			.Ft void
			<br />
			.Fn mysort "int *input"
			<br />
			.Sh DESCRIPTION
			<br />
			The
			<br />
			.Fn mysort
			<br />
			function in-place sorts an integer array
			<br />
			.Fa input .
			<br />
			.Sh IMPLEMENTATION NOTES
			<br />
			The
			<br />
			.Fn mysort
			<br />
			function uses a bubble-sort algorithm for sorting and thus operates in
			<br />
			O(n^2) time with respect to input size.
			<br />
			Since swapping is in-place, a constant number of allocations occur.
		</div>
		<p>
			In general, <span class="sec">IMPLEMENTATION NOTES</span> is not used, and is thus rarely found in UNIX manuals. 
		</p>
		<h4>
			RETURN VALUES
		</h4>
		<p>
			Manuals describing functions (categories <span class="cat">2</span>, <span class="cat">3</span>, and <span
				class="cat">9</span>) must use the <span class="sec">RETURN VALUES</span> section to document each function's
			return value.  If a manual documents functions in a language without return values, or functions do not return a value,
			they need not use this section.
		</p>
		<p>
			System calls (category <span class="cat">2</span>) usually employ the <a href="#macro_rv"
				class="macro">Rv</a> macro to stipulate a standard return value statement.
		</p>
		<div class="mdocin">
			.Sh RETURN VALUES
			<br />
			.Rv -std
		</div>
		<p>
			Note that the <span class="macroflag">std</span> flag is a required argument to <a href="#macro_rv"
				class="macro">Rv</a>, for historical reasons.
		</p>
		<p>
			For non-system functions, be as brief as possible.
		</p>
		<div class="mdocin">
			.Sh RETURN VALUES
			<br />
			The
			<br />
			.Fn hello
			<br />
			function returns zero on success and non-zero on failure.
		</div>
		<h4>
			ENVIRONMENT
		</h4>
		<p>
			Both commands and functions may be affected by UNIX environmental variables.  These must be documented in the <span
				class="sec">ENVIRONMENT</span> section of the manual.  Each variable should be listed as a <a
				href="#macro_ev" class="macro">Ev</a> along with its effect on the component.
		</p>
		<div class="mdocin">
			.Sh ENVIRONMENT
			<br />
			.Bl -tag -width Ds
			<br />
			.It Ev TZ
			<br />
			The time zone for when displaying dates.
			<br />
			.El
		</div>
		<p>
			Some historical manuals use <span class="sec">ENVIRONMENT VARIABLES</span> instead of <span
				class="sec">ENVIRONMENT</span>.
		</p>
		<h4>
			FILES
		</h4>
		<p>
			Both commands and functions may also be affected by files, although this is mainly the purview of commands.  These files
			should be listed in the <span class="sec">FILES</span> section in a tagged list.
		</p>
		<div class="mdocin">
			.Sh FILES
			<br />
			.Bl -tag -width Ds
			<br />
			.It Pa ~/.profile
			<br />
			User's login profile.
			<br />
			.El
		</div>
		<h4>
			EXIT STATUS
		</h4>
		<p>
			This section is the dual of <span class="sec">RETURN VALUES</span> for commands in categories <span
				class="cat">1</span>, <span class="cat">6</span>, and <span class="cat">8</span>.  It documents the exit status
			of commands.  
		</p>
		<p>
			If your utility exits with zero on success and greater than zero on failure (the standard for most utilities), use the
			<a href="#macro_ex" class="macro">Ex</a> macro.
		</p>
		<div class="mdocin">
			.Sh EXIT STATUS
			<br />
			.Ex -std
		</div>
		<p>
			More complex commands should document all possible exit status.
		</p>
		<h4>
			EXAMPLES
		</h4>
		<p>
			In many situations of casual use, the <span class="sec">EXAMPLES</span> section is the first visited in a manual.  It
			should consist of concise, documented examples of the most common uses of your component.  
		</p>
		<p>
			For commands, the <span class="sec">EXAMPLES</span> section should contain a handful of common use cases.  In general,
			these should consist of standalone invocations and, if the input and output correspond to other utilities, invocations
			as part of a pipeline.
		</p>
		<p>
			Although the <span class="cmd">hello</span> example is almost too trivial for documentation, consider if it were used to
			greet new users to a Unix system.  Thus, a common example would be the following:
		</p>
		<div class="mdocin">
			.Sh EXAMPLES
			<br />
			The following sends a greeting message to the new user
			<br />
			.Qq joe .
			<br />
			.Pp
			<br />
			.Dl $ hello \(dqDear Joe, \(dq \(bv mail -s \(dqHi!\(dq joe
		</div>
		<p>
			The <a href="#macro_dl" class="macro">Dl</a>, used for one-line literal displays, is a common macro in the
			<span class="sec">EXAMPLES</span> section.  For multi-line displays, use the <a href="#macro_bd"
				class="macro">Bd</a> <span class="macroflag">literal</span> environment, usually with a default indentation with
			<span class="macroflag">offset</span> <span class="macroarg">indent</span>.
		</p>
		<div class="mdocin">
			.Sh EXAMPLES
			<br />
			The following sends a greeting message to the new user
			<br />
			.Qq joe .
			<br />
			.Bd -literal -offset indent
			<br />
			$ hello \(dqDear Joe, \(dq \(bv \e
			<br />
			&nbsp;&nbsp;mail -s \(dqHi!\(dq joe
			<br />
			.Ed
		</div>
		<p>
			For functions and function libraries, it's more common to include a single, thorough source example than individual
			examples for each function.  These always use the <a href="#macro_bd" class="macro">Bd</a> <span
				class="macroflag">literal</span> display environment and an indentation.
		</p>
		<div class="mdocin">
			.Sh EXAMPLES
			<br />
			The following is a simple utility interfacing with the
			<br />
			.Nm
			<br />
			library:
			<br />
			.Bd -literal -offset indent
			<br />
			#include &lt;stdlib.h&gt;
			<br />
			#include "hello.h"
			<br />
			&nbsp;
			<br />
			int
			<br />
			main(int argc, char *argv[]) {
			<br />
			&nbsp;&nbsp;hello(0, argc &gt; r ? argv[1] : NULL);
			<br />
			&nbsp;&nbsp;return(EXIT_SUCCESS);
			<br />
			}
			<br />
			.Ed
		</div>
		<p>
			Use terse syntax for your example, without error checking for functions not being documented, e.g., <span
				class="func">open</span> or <span class="func">scanf</span>.
		</p>
		<p>
			Some manuals will use the <span class="screen">vS</span> and <span class="screen">vE</span> macros around source code.
			These are not <span class="lang">mdoc</span> and should be avoided in portable manuals.
		</p>
		<h4>
			DIAGNOSTICS
		</h4>
		<p>
			If your component emits regular debug, status, error, or warning messages, document the syntax of these messages in
			<span class="sec">DIAGNOSTICS</span>.
		</p>
		<p>
			Some historic manuals document function return values in this section, but modern practise is to do in <span
				class="sec">RETURN VALUES</span> or, if setting the error constant of the C library, <span
				class="sec">ERRORS</span>.
		</p>
		<p>
			The <a href="#macro_bl" class="macro">Bl</a> <span class="macroflag">diag</span> lists are most often used
			for documenting emitted messages.
		</p>
		<div class="mdocin">
			.Sh DIAGNOSTICS
			<br />
			.Bl -diag
			<br />
			.It "%file:%line:%col: %msg[: %extra]"
			<br />
			An error occured when processing
			<br />
			.Cm %file
			<br />
			at line and column
			<br />
			.Cm %line
			<br />
			and
			<br />
			.Cm %col ,
			<br />
			respectively.
			<br />
			The error message
			<br />
			.Cm %msg
			<br />
			may be followed by additional debugging information in
			<br />
			.Cm %extra .
			<br />
			.El
		</div>
		<h4>
			ERRORS
		</h4>
		<p>
			This section is used exclusively by functions that set or return a regular error code.  The most common use is for
			system calls (category two) setting error constants in the C library.  In either case, this section should consist of a
			single list documenting all possible error codes.  In the latter case, each error should be labelled within the <a
				href="#macro_er" class="macro">Er</a> macro.
		</p>
		<h4>
			SEE ALSO
		</h4>
		<p>
			This section consists of cross-references to other manuals or literature.  It is a standard section in most UNIX
			manuals.  Any components referenced in your manual should be duplicated here along with any other bibliographic texts.
		</p>
		<p>
			For UNIX manual cross-references, use the <a href="#macro_xr" class="macro">Xr</a> macro.  These should be
			specified in a list ordered first by section, then by name.  Non-terminal references should be comma-separated.
		</p>
		<div class="mdocin">
			.Sh SEE ALSO
			<br />
			.Xr mandoc 1 ,
			<br />
			.Xr mandoc 3 ,
			<br />
			.Xr man 7 ,
			<br />
			.Xr mdoc 7
		</div>
		<p>
			If your manual references other documents or literature, you may include them in this section within a bibliographic
			reference as well.  The <a href="#macro_rs" class="macro">Rs</a> block is used for bibliographic references.
			These should be specified after any UNIX manual cross-references.
		</p>
		<div class="mdocin">
			.Sh SEE ALSO
			<br />
			.Xr mandoc 1 ,
			<br />
			.Xr mandoc 3 ,
			<br />
			.Xr man 7 ,
			<br />
			.Xr mdoc 7
			<br />
			.Rs
			<br />
			.%A Brian W. Kernighan
			<br />
			.%A Lorinda L. Cherry
			<br />
			.%T System for Typesetting Mathematics
			<br />
			.%J Communications of the ACM
			<br />
			.%V 18
			<br />
			.%P 151\(en157
			<br />
			.%D March, 1975
			<br />
			.Re
		</div>
		<p>
			Bibliographic references should be ordered by document title.  Advanced references will be covered later in this book.
		</p>
		<h4>
			STANDARDS
		</h4>
		<p>
			If your component references any standards literature, it should be mentioned here.  Most standards (e.g., POSIX, ANSI,
			etc.) may be semantically noted with the <a href="#macro_st" class="macro">St</a> macro.  When implementing
			standardised wire protocols, references to RFC and other literature should also be mentioned here.  These differ from
			referenced standards in terms of being implemented versus referred.
		</p>
		<div class="mdocin">
			.Sh STANDARDS
			<br />
			The
			<br />
			.Nm
			<br />
			utility is compliant with the
			<br />
			.St -xpg4
			<br />
			specification.
		</div>
		<p>
			If your component consists of deviations from a given standard, they should be mentioned in this section as well.  Some
			historic manuals use a special <span class="sec">COMPATIBILITY</span> section for this, but this is discouraged unless
			when discussing compatibility with non-standard but common utilities.
		</p>
		<p>
			This section has also been referred to as <span class="sec">CONFORMING TO</span> on some GNU/Linux manuals.
		</p>
		<h4>
			HISTORY
		</h4>
		<p>
			Some components have a historical basis: this should be included here.  Keep this information terse and, above all,
			correct.
		</p>
		<p>
			If your manual includes prior implementations of your component, for example, it's common to include the dates and
			developers of those prior implementations.
		</p>
		<h4>
			AUTHORS
		</h4>
		<p>
			Another standard section for UNIX manuals is the <span class="sec">AUTHORS</span> section, which should always mention
			the current contact for the utility.  The traditional text for this section is as follows.
		</p>
		<div class="mdocin">
			.Sh AUTHORS
			<br />
			The
			<br />
			.Nm
			<br />
			reference was written by
			<br />
			.An Joe Foo Aq joe@example.com .
		</div>
		<p>
			However, in as e-mail addresses are a ubiquitous form of contact, it's considered good practise to use the correct
			semantic notation.
		</p>
		<div class="mdocin">
			.Sh AUTHORS
			<br />
			The
			<br />
			.Nm
			<br />
			reference was written by
			<br />
			.An Joe Foo ,
			<br />
			.Mt joe@example.com .
		</div>
		<p>
			The term <span class="screen">reference</span> in this fragment should reflect the content of the manual.
		</p>
		<h4>
			CAVEATS
		</h4>
		<p>
			The <span class="sec">CAVEATS</span> section is not often used.  It consists of text relevant to unexpected (but
			unchangeable) behaviour of the component.
		</p>
		<h4>
			BUGS
		</h4>
		<p>
			If the component has known bugs, they should be listed here.  In some historic manuals, authors used this section to
			list <q>no bugs present</q>; however, this text can be misleading for machine-readers of manuals and should be avoided
			in new manuals.
		</p>
		<h4>
			SECURITY CONSIDERATIONS
		</h4>
		<p>
			The <span class="sec">SECURITY CONSIDERATIONS</span> section is reserved for components whose deployment may be
			sensitive to security conditions, such as network daemons.  It should include suggestions on security measures beyond
			the scope of the component.
		</p>
		<p>
			This section was historically called <span class="sec">SECURITY</span>.
		</p>
	</div>
	<div class="page">
		<h1>
			Tools
		</h1>
		<p>
			By now we've discussed the <span class="lang">mdoc</span> language by way of example and a non-authoritative reference.
			I've even referenced some formatters, such as <a class="cmd" href="#cmd_mandoc">mandoc</a> and <a
				class="cmd" href="#cmd_nroff">nroff</a>.  In this part, I'll focus on the environment of <span
				class="lang">mdoc</span>: formatters, project integration, and so on.
		</p>
		<p>
			After reading this part, you'll have a much better idea of how to read, write, and format <span class="lang">mdoc</span>
			on your operating system.  The bias of this part, however, will be toward <a class="term"
				href="#unix">UNIX</a> systems.
		</p>
	</div>
	<div class="page">
		<h2>
			Formatters
		</h2>
		<p>
			The most important part of the <span class="lang">mdoc</span> tools is the formatter, which compiles an <span
				class="lang">mdoc</span> document into an output format.
		</p>
		<div class="mdocout">
			<div class="mdoc-section">
				<h1>NAME</h1>
				<b class="mdoc-name">cat</b> &#8212; <span class="mdoc-desc">concatenate and print files</span></div>
			<div class="mdoc-section">
				<h1>SYNOPSIS</h1>
				<table class="mdoc-synopsis">
					<col style="width: 3.00ex;"/>
					<col/>
					<tbody>
						<tr>
							<td>
								cat
							</td>
							<td>
								&#91;<span class="mdoc-opt"><b class="mdoc-flag">&#45;benstuv</b></span>&#93; 
								&#91;<span class="mdoc-opt"><i class="mdoc-arg">file ...</i></span>&#93;
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="mdoc-section">
				<h1>DESCRIPTION</h1>
				The <b class="mdoc-name">cat</b> utility reads files sequentially, writing them to the standard output. The <i
					class="mdoc-arg">file</i> operands are processed in command-line order.  If <i class="mdoc-arg">file</i>
				is a single dash (&#8216;&#8203;-&#39;) or absent, <b class="mdoc-name">cat</b> reads from
				the standard input.
			</div>
		</div>
		<p>
			All formatters must adhere to the general conventions set forth in the Version 1 AT&amp;T UNIX <a class="term"
				href="#unix_programmers_manual">Programmer's Manual</a>, which details the terms that are in bold
			and those that are italicised (rendered with underlines in terminals).
		</p>
		<p>
			Most formatters also support printer-friendly output, usually to <a href="#ps" class="term">PS</a> or <a
				href="#pdf" class="term">PDF</a>.  Some also include <a href="#html"
				class="term">HTML</a> or <a href="#xhtml" class="term">XHTML</a> for web publication.
		</p>
		<p>
			In this book, I'll focus only on contemporary formatters.  Originally, <span class="lang">mdoc</span>, as a macro set
			for the <a href="#roff" class="term lang">roff</a> language, was exclusively formatted by the <a
				href="#cmd_troff" class="cmd">troff</a> and <a href="#cmd_nroff" class="cmd">nroff</a>
			utilities as distributed with <a class="term" href="#bsd_unix">BSD UNIX</a>.  Historically, <a
				href="#cmd_troff" class="cmd">troff</a> was tailored for printers and graphical output, while <a
				href="#cmd_nroff" class="cmd">nroff</a> focussed on <a href="#terminal"
				class="term">terminal</a> output.
		</p>
		<p>
			Most modern utilities, however, encompass both of these capabilities.  
		</p>
	</div>
	<div class="page">
		<h3 id="groff_sec">
			groff (GNU troff)
		</h3>
		<p>
			The <a class="term" href="#gnu">GNU</a> project wrote the <a href="#cmd_groff"
				class="cmd">groff</a> utility as a reimplementation of <a href="#cmd_ditroff"
				class="cmd">ditroff</a>, which encompassed the functionality of the historical <a class="cmd"
				href="#cmd_nroff">nroff</a> and <a class="term cmd" href="#cmd_troff">troff</a>
			utilities.  The first version was released in 1990, and it is still actively maintained.  <a
				href="#cmd_groff" class="cmd">groff</a> is significant in that it is the predominant implementation
			of <a href="#cmd_nroff" class="cmd">nroff</a> and <a href="#cmd_troff" class="cmd">troff</a> on
			contemporary UNIX operating systems.
		</p>
		<p>
			On systems with <a href="#cmd_groff" class="cmd">groff</a> installed, both <a href="#cmd_troff"
				class="cmd">troff</a> and <a href="#cmd_nroff" class="cmd">nroff</a> invoke the underlying <a
				href="#cmd_groff" class="cmd">groff</a> utility.  It is able to produce the classical <a
				href="#terminal" class="term">terminal</a> and <a class="term" href="#ps">PS</a> output,
			along with more recent support for <a class="term" href="#xhtml">XHTML</a>, <a class="term"
				href="#html">HTML</a>, and <a class="term" href="#pdf">PDF</a>.  It has strong support
			for non-<a class="term" href="#ascii">ASCII</a> output on supporting media.  Consult your local <a
				href="#cmd_groff" class="cmd">groff</a> manual all possible outputs via the <span
				class="cmdflag">T</span> flag.
		</p>
		<p>
			The <span class="lang">mdoc</span> implementation in <a href="#cmd_groff" class="cmd">groff</a> was entirely
			re-written in version 1.17.  Prior to this, input documents had some severe restrictions.  Most notably, macro lines
			were limited to 9 arguments, <a href="#macro_bl" class="macro">Bl</a> column macros had a restricted syntax,
			and displays such as <a href="#macro_bd" class="macro">Bd</a> could not be nested.
		</p>
		<p>
			The <a href="#cmd_groff" class="cmd">groff</a> utility is supported on both UNIX and non-UNIX operating systems.
		</p>
		<h4>
			Examples
		</h4>
		<p>
			Paging a manual to a UNIX terminal:
		</p>
		<div class="cmdline">
			groff -Tascii -mandoc file.1 | less
		</div>
		<p>
			To strip the escape-character encoding of output to create clean, printable ASCII output:
		</p>
		<div class="cmdline">
			groff -Tascii -mandoc file.1 | col -b &gt;file.1.txt
		</div>
		<p>
			Generating PS output:
		</p>
		<div class="cmdline">
			groff -Tps -mandoc file.1 &gt;file.1.ps
		</div>
	</div>
	<div class="page">
		<h3 id="mandoc_sec">
			mandoc (mdocml)
		</h3>
		<p>
			The <a class="cmd" href="#cmd_mandoc">mandoc</a> utility is a specialised <span class="lang">mdoc</span>
			formatter: although it also supports some other UNIX manual formats, it does not accept general-purpose <a class="lang
				term" href="#roff">roff</a> input.  Development began in 2008 to replace <a class="cmd"
				href="#cmd_groff">groff</a> with an <a class="term" href="#isc_license">ISC licensed</a>,
			high-speed reimplementation.
		</p>
		<p>
			<a class="cmd" href="#cmd_mandoc">mandoc</a> may be invoked as <a href="#cmd_troff"
				class="cmd">troff</a> or <a href="#cmd_nroff" class="cmd">nroff</a> as its command-line arguments
			overlap.  It supports the classical <a class="term" href="#terminal">terminal</a> and <a class="term"
				href="#ps">PS</a> forms, and has very strong support for <a class="term"
				href="#html">HTML</a> and <a class="term" href="#xhtml">XHTML</a>.  <a class="term"
				href="#pdf">PDF</a> output is supported as well.
		</p>
		<p>
			By considering <span class="lang">mdoc</span> as a special language, <a href="#cmd_mandoc"
				class="cmd">mandoc</a> compiles its input into a representation of semantic content.  This diverges from <a
				href="#cmd_troff" class="cmd">troff</a> and its descendants, which compile <span
				class="lang">mdoc</span> into its basis form, <span class="lang">roff</span>, then into a presentational
			representation.  As such, <a href="#cmd_mandoc" class="cmd">mandoc</a> is also used for semantically
			querying manual content and for the rigorous validation of manuals.
		</p>
		<p>
			The <a href="#cmd_mandoc" class="cmd">mandoc</a> utility is supported on both UNIX and non-UNIX operating
			systems.
		</p>
		<h4>
			Examples
		</h4>
		<p>
			To validate a manual:
		</p>
		<div class="cmdline">
			mandoc -Tlint file.1
		</div>
		<p>
			To page a manual in the current <a class="term" href="#locale">locale</a> (if supported) so that non-ASCII
			special characters render as proper glyphs:
		</p>
		<div class="cmdline">
			mandoc -Tlocale file.1 | less
		</div>
		<p>
			Produce HTML with a style-sheet:
		</p>
		<div class="cmdline">
			mandoc -Thtml -Ostyle=file.css file.1 &gt;file.1.html
		</div>
	</div>
	<div class="page">
		<h2>
			Project Integration
		</h2>
		<p>
			<span class="lang">mdoc</span> documents fit perfectly into a <a class="term" href="#unix">UNIX</a>
			development environment.  In general, this is defined by a group of source files that produce executables as compiled
			and linked by <a class="cmd" href="#cmd_make">make</a>, called a build system.  Sources are usually
			version-controlled using <a class="cmd" href="#cmd_cvs">cvs</a>, called revision control.
		</p>
		<p>
			In this section, I discuss methods for integrating <span class="lang">mdoc</span> documents into a source-controlled
			build environment.  I'll focus on <a href="#cmd_mandoc" class="cmd">mandoc</a> as a formatter, but
			provide stubs for using <a href="#cmd_nroff" class="cmd">nroff</a>.
		</p>
		<p>
			Our examples will consider a project building a utility <span class="cmd">foo</span> from its single source file <span
				class="file">foo.c</span>.
		</p>
	</div>
	<div class="page">
		<h3>
			Build System
		</h3>
		<p>
			On modern <a class="term" href="#unix">UNIX</a> systems, the method for build management is overwhelmingly
			the <a class="cmd" href="#cmd_make">make</a> utility.  Although there are two disjoint <a
				href="#cmd_make" class="cmd">make</a> implementations in use (namely by for <a
				href="#gnu" class="term">GNU</a> and <a href="#bsd_unix" class="term">BSD UNIX</a>
			systems), I examine the syntax common to both.
		</p>
		<p>
			In this section, I'll assume the file <span class="file">Makefile</span> already exists, and is used to build a system
			where one wishes to incorporate <span class="lang">mdoc</span> files.
		</p>
		<div class="screen">
			all: foo
			<br />
			<br />
			clean:
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;rm -f foo foo.o
			<br />
			<br />
			install: all
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;install -m 0755 foo /usr/local/bin
			<br />
			<br />
			foo: foo.o
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;cc -o foo foo.o
		</div>
		<p>
			A rigorous analysis of this syntax is beyond the scope of this book (do consult your system's documentation for the <a
				href="#cmd_make" class="cmd">make</a> command with <span class="cmdline">man make</span>).  It
			defines the targets <span class="screen">all</span>, <span class="screen">clean</span>, and <span
				class="screen">install</span>: build, clean up, and install the utility, respectively.
		</p>
		<h4>
			File Extension
		</h4>
		<p>
			First, it's important to settle upon an input and output file extension, as <a href="#cmd_make"
				class="cmd">make</a> tracks file status by way of comparing the time-stamp of a file's input (which may be
			multiple files) and output (called the target).  In short, if the target is older than any of the input files, it is
			rebuilt.  The input files are created and maintained by the developer; the output files are built by <a
				href="#cmd_make" class="cmd">make</a>.
		</p>
		<p>
			For simplicity, I use the standard <span class="file">.1</span>, <span class="file">.2</span>, and so on convention for
			the target (the output).  I then use <span class="file">.in.1</span> and so on for input.  Thus, it is necessary to
			notify the <a href="#cmd_make" class="cmd">make</a> utility of these new extensions before all other rules;
		</p>
		<div class="screen">
			.SUFFIXES: .in.1 .1
		</div>
		<p>
			If more categories are built, these would need to be added (e.g., <span class="screen">.in.3 .3</span>, etc.).
		</p>
		<h4>
			Build Rules
		</h4>
		<p>
			A build rule is required to translate input to output.  Let's begin with a general rule to establish that the <span
				class="lang">mdoc</span> syntax is correct.  We'll add this to the target building the main system: this way,
			all changes to the <span class="lang">mdoc</span> input file will be syntax-checked when <span
				class="cmdline">make</span> is invoked.  We'll use <a href="#cmd_mandoc" class="cmd">mandoc</a> to
			syntax-check the document.
		</p>
		<div class="screen">
			.in.1.1:
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;mandoc -Tlint $&lt;
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;#nroff -mandoc $&lt; &gt;/dev/null
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;cp -f $&lt; $@
		</div>
		<p>
			We also need to build the target and clean it.  Assume that <span class="file">foo.1</span> is the output file and <span
				class="file">foo.in.1</span>, the input.
		</p>
		<div class="screen">
			all: foo foo.1
			<br />
			<br />
			clean:
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;rm -f foo foo.o foo.1
		</div>
		<h4>
			Result
		</h4>
		<p>
			Putting these together, the new <span class="file">Makefile</span> is as follows:
		</p>
		<div class="screen">
			.SUFFIXES: .in.1 .1
			<br />
			<br />
			all: foo foo.1
			<br />
			<br />
			clean:
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;rm -f foo foo.o foo.1
			<br />
			<br />
			install: all
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;install -m 0755 foo /usr/local/bin
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;install -m 0644 foo.1 /usr/local/share/man/man1
			<br />
			<br />
			foo: foo.o
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;cc -o foo foo.o
			<br />
			<br />
			.in.1.1:
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;mandoc -Tlint $&lt;
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;#nroff -mandoc $&lt; &gt;/dev/null
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;cp -f $&lt; $@
		</div>
		<h4>
			Formatted Output
		</h4>
		<p>
			Let's build an <a class="term" href="#html">HTML</a> manual with the <span class="cmdline">make www</span>
			rule.  For simplicity, we won't install this file; it's merely for instruction.  This rule will translate the built
			manual <span class="file">foo.1</span> into an HTML file <span class="file">foo.1.html</span>.
		</p>
		<div class="screen">
			.SUFFIXES: .in.1 .1 .1.html
		</div>
		<p>
			Let's let our rule include a <a class="term" href="#css">CSS</a> file.  Note that the traditional <a
				class="term cmd" href="#cmd_nroff">nroff</a> utility doesn't include HTML output.
		</p>
		<div class="screen">
			foo.1.html: style.css
			<br />
			<br />
			.1.1.html:
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;mandoc -Thtml -Ostyle=style.css $&lt; &gt;$@
		</div>
		<p>
			The target rule is simply as follows:
		</p>
		<div class="screen">
			www: foo.1.html
		</div>
		<p>
			The reason for building from <span class="file">foo.1</span> instead of <span class="file">foo.in.1</span> is that we
			may wish to postprocess the <span class="file">foo.1</span> file after it has been created.  However, this is entirely
			decision of the programmer.
		</p>
	</div>
	<div class="page">
		<h3>
			Revision Control
		</h3>
		<p>
			Several examples in this book have covered the topic of integrating <span class="lang">mdoc</span> documents into
			revision control systems.  In this section, I cover the few steps required to integrate these documents with <a
				class="cmd" href="#cmd_cvs">cvs</a>.
		</p>
		<p>
			Assume a file <span class="file">foo.in.1.</span> consists of our <span class="lang">mdoc</span> source.  I assume, for
			simplicity, that it is licensed with the <a class="term" href="#isc_license">ISC license</a> and
			copyright-protected, both of which lead the document as a series of comments.
		</p>
		<div class="mdocin">
			.\" Copyright (c) 2011 Kristaps Dzonsons &lt;kristaps@bsd.lv&gt;
			<br />
			.\"
			<br />
			.\" Permission to use, copy, modify, and distribute this software for any
			<br />
			.\" purpose with or without fee is hereby granted, provided that the above
			<br />
			.\" copyright notice and this permission notice appear in all copies.
			<br />
			.\"
			<br />
			.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
			<br />
			.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
			<br />
			.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
			<br />
			.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
			<br />
			.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
			<br />
			.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
			<br />
			.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
			<br />
			.\"
			<br />
			.Dd August 18 2011
			<br />
			.Dt FOO 1
			<br />
			.Os
		</div>
		<p>
			The first step is to add a useful message to the top of the file as the version of the file.  This is standard practise
			in revision controlled files.
		</p>
		<div class="mdocin">
			.\"&nbsp;&nbsp;&nbsp;&nbsp;$&#8203;Id$
			<br />
			.\"
			<br />
			.\" Copyright (c) 2011 Kristaps Dzonsons &lt;kristaps@bsd.lv&gt;
		</div>
		<p>
			Make sure that the first line has a tab character between the leading comment marker and <span
				class="screen">$&#8203;Id$</span>.  This sequence is filled in with the file's last editor, revision, and
			checkin date.
		</p>
		<p>
			Some <a href="#cmd_cvs" class="cmd">cvs</a> servers (e.g., those in <a class="term"
				href="#netbsd">NetBSD</a> and <a class="term" href="#openbsd">OpenBSD</a>) support the
			<span class="screen">Mdocdate</span> sequence.  This is filled by in <a href="#cmd_cvs" class="cmd">cvs</a>
			with the check-in date.
		</p>
		<div class="mdocin">
			.Dd $&#8203;Mdocdate$
			<br />
			.Dt FOO 1
			<br />
			.Os
		</div>
		<p>
			In performing these two steps, the file's last-modified date and source identifier will be properly filled in by the <a
				href="#cmd_cvs" class="cmd">cvs</a> server.  If your server does not support <span
				class="screen">Mdocdate</span>, you will have to maintain the date by hand, or possibly override the build rule
			for your file.
		</p>
	</div>
	<div class="page">
		<h2>
			Composition
		</h2>
		<p>
			Since the UNIX manual has such a rich history of development, it would be strange were it not to have a significant body
			of supporting tools for composition.  In fact, Version 7 AT&amp;T <a class="term" href="#unix">UNIX</a> was
			bundled with a set of tools, the UNIX <a class="term" href="#wwb">Writer's Workbench</a>, specifically for
			composing documents &mdash; spell-checking, grammar-checking, and so forth.  Even then, sophisticated editors had long
			since been a pivotal part of UNIX.
		</p>
		<p>
			Although the <a href="#cmd_ed" class="cmd">ed</a>, <a href="#cmd_ex" class="cmd">ex</a>, and <a
				href="#cmd_vi" class="cmd">vi</a> editors are stipulated by <a class="term"
				href="#posix">POSIX</a>.1-2008, the Writer's Workbench has long since been discontinued.  Even
			spell-checkers are not standard across modern UNIX systems, although many high-quality editors and composition utilities
			may be downloaded.
		</p>
		<p>
			In short, the situation is messy: composing <span class="lang">mdoc</span> documents (and in fact any <span
				class="lang">roff</span> document) is tricky to do without downloading special software.
		</p>
		<p>
			However, one of the best parts of <span class="lang">mdoc</span> is that none of these specific tools are necessary: an
			<span class="lang">mdoc</span> document is just a text file and may be composed in any editor, and its text contents
			analysed by any utility smart enough to ignore <span class="lang">mdoc</span> syntax.
		</p>
	</div>
	<div class="page">
		<h3>
			Editing
		</h3>
		<p>
			Since <span class="lang">mdoc</span> is an ASCII-clean text format, it may be edited in any text editor.  In this
			section, I introduce a variety of editors available on most <a class="term" href="#unix">UNIX</a> systems.
			Since this topic is exhaustively covered in most any introductory UNIX book, I only introduce portable editors.
		</p>
		<h4>
			Ed
		</h4>
		<p>
			The <a href="#cmd_ed" class="cmd">ed</a> utility is a line editor standardised by <a class="term"
				href="#posix">POSIX</a>.1-2008.  The concept of a line editor may be familiar to those who have used
			a typewriter or teleprinter, where only the current line of input may be edited (or viewed, in some cases) at a time.
		</p>
		<p>
			Its inclusion is largely for historical reasons, as using <a href="#cmd_ed" class="cmd">ed</a> can be a
			frustrating experience for those accustomed to visual editors.  I don't recommend using this utility for <span
				class="lang">mdoc</span>, although its function as a line editor makes it perfect for the task.
		</p>
		<h4>
			Ex, Vi
		</h4>
		<p>
			The <a href="#cmd_vi" class="cmd">vi</a> and <a href="#cmd_ex" class="cmd">ex</a> editors were
			powerful additions to the UNIX system: they allowed visual editing of files (versus line editing as with <a
				href="#cmd_ed" class="cmd">ed</a>).  This editor has inspired a raft of clones, but being
			standardised, some form of the utility is available on all UNIX systems.  Furthermore, the <a
				href="#cmd_vim" class="cmd">vim</a> clone of <a href="#cmd_vi" class="cmd">vi</a> comes
			bundled with <span class="lang">mdoc</span> syntax highlighting.
		</p>
	</div>
	<div class="page">
		<h3>
			Spell-checking
		</h3>
		<p>
			The right or wrong spelling of terms in technical documents is very important.  Thus, it's always important to carefully
			spell-check your manuals, making sure that both technical and general terms are correctly spelt.  
		</p>
		<p>
			Unfortunately, spell-checking a <span class="lang">mdoc</span> document is fairly difficult, as the spell-checker must
			have some knowledge of the language structure to discern text from macros.  Consider spell-checking checking the
			following snippet.
		</p>
		<div class="mdocin">
			.Fl Alu Ar input
		</div>
		<p>
			By now we understand that <a class="macro" href="#macro_fl">Fl</a> and <a class="macro"
				href="#macro_ar">Ar</a> are macros.  But it's unreasonable to expect a spell-checker to do so.  Thus,
			spell-checking manuals often raise many false-positives.
		</p>
		<h4>
			spell
		</h4>
		<p>
			The <a class="cmd" href="#cmd_spell">spell</a> utility is distributed with many <a class="term"
				href="#bsd_unix">BSD UNIX</a> operating systems as a simplistic spell-checker.  In fact, it was
			first distributed with Version 6 AT&amp;T UNIX.  <a href="#cmd_spell" class="cmd">spell</a> preprocesses its
			input with <a href="#cmd_deroff" class="cmd">deroff</a>, another historic utility with some functionality of
			stripping <span class="lang">roff</span> instructions from files.
		</p>
		<p>
			To print a list of all unknown words, you can explicitly invoke <a href="#cmd_deroff" class="cmd">deroff</a>
			and <a href="#cmd_spell" class="cmd">spell</a> as follows:
		</p>
		<div class="cmdline">
			deroff -w file.1 | spell
		</div>
		<p>
			A utility distributed with <a href="#cmd_mandoc" class="cmd">mandoc</a>, <a href="#cmd_demandoc"
				class="cmd">demandoc</a>, is significantly stronger than <a href="#cmd_deroff"
				class="cmd">deroff</a>.  If available, it should be used instead.  It has the same calling syntax of <a
				href="#cmd_deroff" class="cmd">deroff</a>.
		</p>
		<div class="cmdline">
			demandoc -w file.1 | spell
		</div>
		<p>
			You can also maintain a per-manual list of technical terms by using additional word lists.  In the case of <span
				class="file">file.1</span>, consider a sorted list of words <span class="file">file.1.words</span> we're
			maintaining with special words (such as names).  We could then augment a <a href="#cmd_make"
				class="cmd">make</a> rule to automatically make sure additions are spell-checked.
		</p>
		<div class="screen">
			file.1: file.1.words
			<br />
			<br />
			.in.1.1:
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;mandoc -Tlint $&lt;
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;test -z `demandoc -w $&lt; | spell -b +$@.words`
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;cp -f $&lt; $@
		</div>
		<p>
			This snippet first makes the build of <span class="file">file.1</span> depend upon its local word file, <span
				class="file">file.1.words</span>, a sorted list of words to ignore.  When <span class="file">file.in.1</span> or
			<span class="file">file.1.words</span> is updated, the rule is executed.  It first makes sure that <span
				class="file">file.in.1</span> is well-formed, then spell-checks it against the ignored-words file.
		</p>
		<p>
			The same can be accomplished on systems without <a href="#cmd_mandoc" class="cmd">mandoc</a>.
		</p>
		<div class="screen">
			file.1: file.1.words
			<br />
			<br />
			.in.1.1:
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;test -z `deroff -w $&lt; | spell -b +$@.words`
			<br />
			&nbsp;&nbsp;&nbsp;&nbsp;cp -f $&lt; $@
		</div>
		<h4>
			ispell, aspell
		</h4>
		<p>
			Another common spell-checker is <a class="cmd" href="#cmd_ispell">ispell</a> and its <a class="term"
				href="#gnu">GNU</a> replacement <a class="cmd" href="#cmd_aspell">aspell</a>.  I do not
			suggest using these utilities because of their poor internal support for <span class="lang">mdoc</span>.  It's possible,
			however, to send stripped files for checking in a manner similar to <a class="cmd"
				href="#cmd_spell">spell</a>:
		</p>
		<div class="cmdline">
			demandoc -w file.1 | ispell -l
		</div>
		<p>
			Or with <a href="#cmd_deroff" class="cmd">deroff</a>:
		</p>
		<div class="cmdline">
			deroff -w file.1 | ispell -l
		</div>
		<p>
			Both <a href="#cmd_ispell" class="cmd">ispell</a> and <a href="#cmd_aspell"
				class="cmd">aspell</a> also have a pipe mode for more meaningful output:
		</p>
		<div class="cmdline">
			demandoc -w file.1 | ispell -a
		</div>
	</div>
	<div class="page">
		<h3>
			Style &amp; Grammar
		</h3>
		<p>
			The utilities bundled with the historical UNIX <a class="term" href="#wwb">Writer's Workbench</a> also allow
			for grammar and style-checking of <span class="lang">mdoc</span> documents &mdash; indeed, any document.
		</p>
		<p>
			Like with spelling, these utilities cannot handle <span class="lang">mdoc</span> constructions.  Unlike spelling,
			grammar depends on correct flow of terms.  To wit, one must fully process input <span class="lang">mdoc</span> documents
			before passing them to such checks.
		</p>
		<h4>
			diction
		</h4>
		<p>
			The <a class="cmd" href="#cmd_diction">diction</a> utility is rarely distributed with default UNIX operating
			systems, although it may be separately downloaded.  The input to <a class="cmd"
				href="#cmd_diction">diction</a> is best when it consists of well-formed sentences, which only appear
			when manuals are post-formatted.
		</p>
		<div class="cmdline">
			mandoc file.1 | col -b | tail -n+2 | diction
		</div>
		<p>
			Alternatively, with <a href="#cmd_nroff" class="cmd">nroff</a>:
		</p>
		<div class="cmdline">
			nroff -mandoc file.1 | col -b | tail -n+2 | diction
		</div>
		<p>
			This first strips the text decoration (underlined and bold text) from <a href="#cmd_nroff"
				class="cmd">nroff</a> or <a class="cmd" href="#cmd_mandoc">mandoc</a> with <a
				href="#cmd_col" class="cmd">col</a>.  The header is then stripped with <a class="cmd"
				href="#cmd_tail">tail</a>.  Finally, the formatted output is fed to the <a class="cmd"
				href="#cmd_diction">diction</a> utility, which analyses text for readability.
		</p>
	</div>
	<div class="page">
		<h1>
			Appendices
		</h1>
		<p>
			This part consists of appendices to the book.  This will link heavily to external resources, although care is taken to
			provide enough information to make off-line reading meaningful.
		</p>
	</div>
	<div class="page">
		<h2>
			Appendix: Glossary
		</h2>
		<dl>
			<dt id="ascii">
				ASCII
			</dt>
			<dd>
				American Standard Code for Information Interchange.  The predominant computer encoding for the English alphabet.
			</dd>
			<dt id="bsd_license">
				BSD License
			</dt>
			<dd>
				A permissive open source license used for the <a class="term" href="#bsd_unix">BSD UNIX</a> operating systems
				(among many, many other tools).  May refer to either the <a class="external"
					href="http://www.opensource.org/licenses/bsd-license.php">two-part</a> or <a class="external"
					href="http://www.opensource.org/licenses/BSD-3-Clause">three-part</a> (deprecated) form.
			</dd>
			<dt id="bsd_unix">
				BSD UNIX
			</dt>
			<dd>
				A class of free implementations of the <a href="#unix" class="term">UNIX</a> operating system, originally
				deriving from the Version 6 AT&amp;T UNIX.  This class consists primarily of <a class="external"
					href="http://www.freebsd.org">FreeBSD</a>, <a class="external" href="http://www.netbsd.org">NetBSD</a>,
				and <a class="external" href="http://www.openbsd.org">OpenBSD</a>.  These operating systems are licensed either
				under the <a class="term" href="#bsd_license">BSD license</a> or the <a class="term" href="#isc_license">ISC
					license</a>.
			</dd>
			<dt id="c">
				C
			</dt>
			<dd>
				A programming language developed in 1969 by Dennis Ritchie at AT&amp;T Bell Labs.  This is the language of
				choice for <a class="term" href="#unix">UNIX</a> development.  A compiler for C first appeared in Version 6
				AT&amp;T UNIX, and one is stipulated now by <a class="term" href="#posix">POSIX</a>.1-2008.
			</dd>
			<dt id="cat_pages">
				Cat Pages
			</dt>
			<dd>
				Manual pages pre-formatted and installed with an operating system.  Historically, the <a class="cmd"
					href="#cmd_nroff">nroff</a> utility was quite slow: pre-formatted pages in a cache reduced
				the wait time for <a class="cmd" href="#cmd_man">man</a> to display a manual.  This has since become
				the convention for most <a class="term" href="#unix">UNIX</a> operating systems.
			</dd>
			<dt id="cddl">
				CDDL
			</dt>
			<dd>
				The <a href="http://www.opensource.org/licenses/CDDL-1.0" class="external">Common Development and Distribution
					License</a>, a free software license.
			</dd>
			<dt id="command_line">
				Command Line
			</dt>
			<dd>
				The text environment for operating <a class="term" href="#unix">UNIX</a> systems.  Often replaced by graphical
				windowing systems such as the <a class="external" href="http://www.xorg.org">X Window System</a>.
			</dd>
			<dt id="css">
				CSS
			</dt>
			<dd>
				Cascading style sheet, used primarily to style documents in <a class="term" href="#html">HTML</a> or <a
					class="term" href="#xhtml">XHTML</a>.  The language is a <a class="external"
					href="http://www.w3.org/Style/CSS/">standard</a> maintained by the <a class="external"
					href="http://www.w3.org">World Wide Web Consortium</a>.
			</dd>
			<dt id="docbook">
				DocBook
			</dt>
			<dd>
				A documentation system maintained by <a href="http://www.oasis-open.org/" class="external">OASIS</a> and
				developed at <a class="external" href="http://docbook.org">docbook.org</a>.
			</dd>
			<dt id="dos_prompt">
				DOS Prompt
			</dt>
			<dd>
				Text (command line) interface to the historical Disk Operating System, usually Microsoft's Disk Operating System
				(MS-DOS).
			</dd>
			<dt id="english_spacing">
				English Spacing
			</dt>
			<dd>
				The practise of using two spaces between sentences as punctuated by <span class="screen">.</span>, <span
					class="screen">!</span>, or <span class="screen">?</span>.  This applies even in the event that a sentence
				is quoted or parenthesised, where the spaces follow the final sentence enclosure.
			</dd>
			<dt id="gnu">
				GNU
			</dt>
			<dd>
				The <a class="external" href="http://www.gnu.org">GNU</a> project is a UNIX-like operating system licensed under
				on the <a class="term" href="#gpl">General Public License</a>.
			</dd>
			<dt id="gpl">
				GPL
			</dt>
			<dd>
				The <a href="http://www.gnu.org/copyleft/gpl.html" class="external">General Public License</a>.  This is the
				license of choice for the <a class="term" href="#gnu">GNU</a> project.
			</dd>
			<dt id="isc_license">
				ISC License
			</dt>
			<dd>
				A permissive free software license issued by ISC, the <a class="external" href="http://www.isc.org">Internet
					Systems Consortium</a>.  This is the license of choice for the <a class="external"
					href="#unix">UNIX</a> implementation.
			</dd>
			<dt id="html">
				HTML
			</dt>
			<dd>
				Hypertext markup language.  A structured mark-up language standardised by the <a class="external"
					href="http://www.w3.org">W3C</a>.  This is the predominant language for formatting world wide web
				content.
			</dd>
			<dt id="libc">
				libc
			</dt>
			<dd>
				The C Standard Library.  A set of functions (including <a class="term" href="#system_call">system calls</a>) in
				the <a class="term" href="#c">C programming language</a>.  Standardised by <a class="term"
					href="#posix">POSIX</a>, among other standards bodies.
			</dd>
			<dt id="locale">
				Locale
			</dt>
			<dd>
				A set of parameters defining a locality-specific user interface, such as special characters (glyphs), numerical
				representations, and so on.
			</dd>
			<dt id="man_pages">
				Man Pages
			</dt>
			<dd>
				Short form of <q>UNIX manual pages</q>.  System documentation for <a class="term" href="#unix">UNIX</a> systems.
				Usually viewed using the <a href="#cmd_man" class="cmd">man</a> utility, which pages formatted
				manual documents using to the screen.  Man pages are formatted by a utility such as <a
					href="#cmd_nroff" class="cmd">nroff</a> or <a class="cmd"
					href="#cmd_mandoc">mandoc</a>.
			</dd>
			<dt id="netbsd">
				NetBSD
			</dt>
			<dd>
				A free <a href="#bsd_unix" class="term">BSD UNIX</a> operating system, <a class="external"
					href="http://www.netbsd.org">NetBSD</a>.
			</dd>
			<dt id="openbsd">
				OpenBSD
			</dt>
			<dd>
				A free <a href="#bsd_unix" class="term">BSD UNIX</a> operating system, <a class="external"
					href="http://www.openbsd.org">OpenBSD</a>.
			</dd>
			<dt id="pdf">
				PDF
			</dt>
			<dd>
				The <a class="external" href="http://www.adobe.com/pdf/">Portable Document Format</a> language used to format
				documents, usually for printing.
			</dd>
			<dt id="posix">
				POSIX
			</dt>
			<dd>
				Portable Operating System Interface for Unix.  Most recently released as <a class="external"
					href="http://pubs.opengroup.org/onlinepubs/9699919799/">POSIX.1-2008</a>, IEEE Std 1003.1-2008.
					Informally called UNIX08.  Standards document for all UNIX implementations.
			</dd>
			<dt id="ps">
				PS
			</dt>
			<dd>
				The <a class="external" href="http://www.adobe.com/products/postscript/">PostScript</a> language, usually used
				as a page description language (e.g., printing).
			</dd>
			<dt id="roff">
				Roff
			</dt>
			<dd>
				A document language written for the original <a class="term" href="#unix">UNIX</a> implementation in 1970.  This
				language was used for text processing.
			</dd>
			<dt id="runoff">
				RUNOFF
			</dt>
			<dd>
				A simple text processing utility for the CTSS operating system, usually paired as <a class="external"
					href="http://mit.edu/Saltzer/www/publications/CC-244.html">TYPSET and RUNOFF</a>, developed before 1965.
			</dd>
			<dt id="rtf">
				RTF
			</dt>
			<dd>
				Rich text format.  Proprietary document file format used in some popular word processors.
			</dd>
			<dt id="system_call">
				System Call
			</dt>
			<dd>
				A machine instruction that triggers the operating system to perform a privileged operation on behalf of the
				user.  A typical example is to write a region of memory to a file.  In the <a class="term" href="#libc">C
					standard library</a>, these instructions are encoded as function calls such as <span
					class="func">write</span>.
			</dd>
			<dt id="terminal">
				Terminal
			</dt>
			<dd>
				The <a class="term" href="#command_line">command line</a> environment on a computer.  This can either refer to a
				terminal utility run within a graphical environment or the computer screen itself in text mode.
			</dd>
			<dt id="unix">
				UNIX
			</dt>
			<dd>
				Computer system originally developed by AT&amp;T Bell Labs in 1969.
				Modern open-source derivations include <a class="external" href="http://www.gnu.org">GNU/Linux</a>, <a
					class="external" href="#netbsd">NetBSD</a>,
				<a class="term" href="#openbsd">OpenBSD</a>, etc.
			</dd>
			<dt id="unix_programmers_manual">
				UNIX Programmer's Manual
			</dt>
			<dd>
				A historical manual for programming and operating the <a class="term" href="#unix">UNIX</a> operating system.
				The <a class="external" href="http://www.cs.bell-labs.com/who/dmr/1stEdman.html">First Edition</a>, 1971, is
				preserved for reading.
			</dd>
			<dt id="wwb">
				WWB
			</dt>
			<dd>
				The Writer's Workbench.  This was a set of writing utilities first distributed in the Seventh Edition of the <a
					class="term" href="#unix">UNIX</a> operating system.
			</dd>
			<dt id="xhtml">
				XHTML
			</dt>
			<dd>
				Extensible Hypertext markup language.  XML-based form of the popular <a class="term" href="#html">HTML</a>
				format.  Standardised by the <a class="external" href="http://www.w3.org">W3C</a>.
			</dd>
		</dl>
	</div>
	<div class="page">
		<h2>
			Appendix: Macros
		</h2>
		<p>
			This table consists of brief descriptions of <span class="lang">mdoc</span> macros referenced in this book (meaning:
			this is not a complete list!), then links to full descriptions according to the <a class="external"
				href="http://mdocml.bsd.lv/mdoc.7.html">mdoc</a> reference on <a class="external"
				href="http://mdocml.bsd.lv">http://mdocml.bsd.lv</a>.  <i>Disclaimer</i>: I'm the principle author of this
			system. 
		</p>
		<dl>
			<dt id="macro_ap">
				Ap
			</dt>
			<dd>
				Insert an apostrophe.  Reference: <a class="external" href="#x5c264170">Ap</a>.
			</dd>
			<dt id="macro_ar">
				Ar
			</dt>
			<dd>
				Argument to a command or flag.  Reference: <a class="external" href="#x5c264172">Ar</a>.
			</dd>
			<dt id="macro_bd">
				Bd
			</dt>
			<dd>
				Begin a display.  Reference: <a class="external" href="#x5c264264">Bd</a>.
			</dd>
			<dt id="macro_bl">
				Bl
			</dt>
			<dd>
				Begin a list.  Reference: <a class="external" href="#x5c26426c">Bl</a>.
			</dd>
			<dt id="macro_bq">
				Bq
			</dt>
			<dd>
				Square-bracket arguments.  Reference: <a class="external" href="#x5c264271">Bq</a>.
			</dd>
			<dt id="macro_bx">
				Bx
			</dt>
			<dd>
				BSD UNIX text.  Reference: <a class="external" href="#x5c264278">Bx</a>.
			</dd>
			<dt id="macro_dd">
				Dd
			</dt>
			<dd>
				Date of manual's last edit.  Reference: <a class="external" href="#x5c264464">Dd</a>.
			</dd>
			<dt id="macro_dl">
				Dl
			</dt>
			<dd>
				Display a line of literal text.  Reference: <a class="external" href="#x5c26446c">Dl</a>.
			</dd>
			<dt id="macro_dt">
				Dt
			</dt>
			<dd>
				Title and category of a manual.  Reference: <a class="external" href="#x5c264474">Dt</a>.
			</dd>
			<dt id="macro_dv">
				Dv
			</dt>
			<dd>
				Constant-value variables.  Reference: <a class="external" href="#x5c264476">Dv</a>.
			</dd>
			<dt id="macro_ed">
				Ed
			</dt>
			<dd>
				End a display.  Reference: <a class="external" href="#x5c264564">Ed</a>.
			</dd>
			<dt id="macro_el">
				El
			</dt>
			<dd>
				End a list.  Reference: <a class="external" href="#x5c26456c">El</a>.
			</dd>
			<dt id="macro_em">
				Em
			</dt>
			<dd>
				Text to be emphasised (presentational).  Reference: <a class="external" href="#x5c26456d">Em</a>.
			</dd>
			<dt id="macro_er">
				Er
			</dt>
			<dd>
				Error constant.  Reference: <a class="external" href="#x5c264572">Er</a>.
			</dd>
			<dt id="macro_ev">
				Ev
			</dt>
			<dd>
				Environment variable.  Reference: <a class="external" href="#x5c264576">Ev</a>.
			</dd>
			<dt id="macro_ex">
				Ex
			</dt>
			<dd>
				Exit code of a command.  Reference: <a class="external" href="#x5c264578">Ex</a>.
			</dd>
			<dt id="macro_fa">
				Fa
			</dt>
			<dd>
				Function argument.  Reference: <a class="external" href="#x5c264661">Fa</a>.
			</dd>
			<dt id="macro_fc">
				Fc
			</dt>
			<dd>
				Close multi-line function prototype.  Reference: <a class="external" href="#x5c264663">Fc</a>.
			</dd>
			<dt id="macro_fd">
				Fd
			</dt>
			<dd>
				A preprocessor macro definition.  Reference: <a class="external" href="#x5c264664">Fd</a>.
			</dd>
			<dt id="macro_fl">
				Fl
			</dt>
			<dd>
				Command flag (switch).  Reference: <a class="external" href="#x5c26466c">Fl</a>.
			</dd>
			<dt id="macro_fn">
				Fn
			</dt>
			<dd>
				Function name.  Reference: <a class="external" href="#x5c26466e">Fn</a>.
			</dd>
			<dt id="macro_fo">
				Fo
			</dt>
			<dd>
				Open multi-line function prototype.  Reference: <a class="external" href="#x5c26466f">Fo</a>.
			</dd>
			<dt id="macro_ft">
				Ft
			</dt>
			<dd>
				Function type.  Reference: <a class="external" href="#x5c264674">Ft</a>.
			</dd>
			<dt id="macro_in">
				In
			</dt>
			<dd>
				Include file (header file).  Reference: <a class="external" href="#x5c26496e">In</a>.
			</dd>
			<dt id="macro_lb">
				Lb
			</dt>
			<dd>
				Library name.  Reference: <a class="external" href="#x5c264c62">Lb</a>.
			</dd>
			<dt id="macro_li">
				Li
			</dt>
			<dd>
				Literal text (presentational).  Reference: <a class="external" href="#x5c264c69">Li</a>.
			</dd>
			<dt id="macro_nd">
				Nd
			</dt>
			<dd>
				A one-line description of the material.  Reference: <a class="external" href="#x5c264e64">Nd</a>.
			</dd>
			<dt id="macro_nm">
				Nm
			</dt>
			<dd>
				Set or get name of documented component.  Reference: <a class="external" href="#x5c264e6d">Nm</a>.
			</dd>
			<dt id="macro_ns">
				Ns
			</dt>
			<dd>
				Suppress the following space and reset formatting.  Reference: <a class="external" href="#x5c264e73">Ns</a>.
			</dd>
			<dt id="macro_os">
				Os
			</dt>
			<dd>
				Operating system applying to manual.  Reference: <a class="external" href="#x5c264f73">Os</a>.
			</dd>
			<dt id="macro_it">
				It
			</dt>
			<dd>
				List item.  Reference: <a class="external" href="#x5c264974">It</a>.
			</dd>
			<dt id="macro_oc">
				Oc
			</dt>
			<dd>
				Close an optional part block.  Reference: <a class="external" href="#x5c264f63">Oc</a>.
			</dd>
			<dt id="macro_oo">
				Oo
			</dt>
			<dd>
				Open an optional part block.  Reference: <a class="external" href="#x5c264f6f">Oo</a>.
			</dd>
			<dt id="macro_op">
				Op
			</dt>
			<dd>
				Optional part of a command invocation.  Reference: <a class="external" href="#x5c264f70">Op</a>.
			</dd>
			<dt id="macro_ox">
				Ox
			</dt>
			<dd>
				Format the OpenBSD operating system name.  Reference: <a class="external" href="#x5c264f78">Ox</a>.
			</dd>
			<dt id="macro_pp">
				Pp
			</dt>
			<dd>
				Separate paragraphs with vertical space.  Reference: <a class="external" href="#x5c265070">Pp</a>.
			</dd>
			<dt id="macro_pq">
				Pq
			</dt>
			<dd>
				Parenthesise arguments.  Reference: <a class="external" href="#x5c265071">Pq</a>.
			</dd>
			<dt id="macro_ql">
				Ql
			</dt>
			<dd>
				Enclose literal argument in single quotes.  Reference: <a class="external" href="#x5c26516c">Ql</a>.
			</dd>
			<dt id="macro_qq">
				Qq
			</dt>
			<dd>
				Enclose arguments in regular double quotes.  Reference: <a class="external" href="#x5c265171">Qq</a>.
			</dd>
			<dt id="macro_rs">
				Rs
			</dt>
			<dd>
				Begin a reference (bibliographic) block.  Reference: <a class="external" href="#x5c265273">Rs</a>.
			</dd>
			<dt id="macro_rv">
				Rv
			</dt>
			<dd>
				Function return value.  Reference: <a class="external" href="#x5c265276">Rv</a>.
			</dd>
			<dt id="macro_sh">
				Sh
			</dt>
			<dd>
				Begin a manual section.  Reference: <a class="external" href="#x5c265368">Sh</a>.
			</dd>
			<dt id="macro_sq">
				Sq
			</dt>
			<dd>
				Single-quote arguments.  Reference: <a class="external" href="#x5c265371">Sq</a>.
			</dd>
			<dt id="macro_ss">
				Ss
			</dt>
			<dd>
				Begin a manual subsection.  Reference: <a class="external" href="#x5c265373">Ss</a>.
			</dd>
			<dt id="macro_st">
				St
			</dt>
			<dd>
				Print a standard name.  Reference: <a class="external" href="#x5c265374">St</a>.
			</dd>
			<dt id="macro_va">
				Va
			</dt>
			<dd>
				Variable name.  Reference: <a class="external" href="#x5c265661">Va</a>.
			</dd>
			<dt id="macro_vt">
				Vt
			</dt>
			<dd>
				Variable type.  Reference: <a class="external" href="#x5c265674">Vt</a>.
			</dd>
			<dt id="macro_xr">
				Xr
			</dt>
			<dd>
				Manual cross-reference.  Reference: <a class="external" href="#x5c265872">Xr</a>.
			</dd>
		</dl>
	</div>
	<div class="page">
		<h2>
			Appendix: Commands
		</h2>
		<p>
			This is a list of all commands mentioned in this book and how to find them on-line.  All referenced utilities are
			open-source.
		</p>
		<dl>
			<dt id="cmd_aspell">
				Aspell
			</dt>
			<dd>
				A replacement of <a class="cmd" href="#cmd_ispell">ispell</a> with greater word-suggestion power and support for
				non-<a href="#ascii" class="term">ASCII</a> input.  Available at <a class="external"
					href="#gpl">GPL</a>.
			</dd>
			<dt id="cmd_cat">
				Cat
			</dt>
			<dd>
				Output a file directly to the <a class="term" href="#terminal">terminal</a>.  This utility is
				standardised by <a class="term" href="#posix">POSIX</a>.1-2008.
			</dd>
			<dt id="cmd_col">
				Col
			</dt>
			<dd>
				Filters line-feeds, usually used to strip backspaces from encoded documents.  Originally in Version 6 AT&amp;T
				UNIX, standardised in <a class="term" href="#posix">POSIX</a>.1-2008.
			</dd>
			<dt id="cmd_cvs">
				Cvs
			</dt>
			<dd>
				A revision management system (the concurrent version system).  Originally a client-server extension to prior
				revision systems.  Non-standard.  Available under the <a class="term" href="#gpl">GPL</a> at <a
					class="external" href="https://savannah.nongnu.org/projects/cvs">savannah.nongnu.org/projects/cvs</a> or
				the <a class="term" href="#isc_license">ISC license</a> at <a class="external"
					href="http://www.opencvs.org/">www.opencvs.org</a>.
			</dd>
			<dt id="cmd_echo">
				Echo
			</dt>
			<dd>
				Echo input arguments back to the <a class="term" href="#terminal">terminal</a>.  This utility is
				standardised by <a class="term" href="#posix">POSIX</a>.1-2008.
			</dd>
			<dt id="cmd_demandoc">
				Demandoc
			</dt>
			<dd>
				Remove all <span class="lang">mdoc</span> (and other UNIX manual format) control statements from a file by
				formally parsing input (via <a class="cmd" href="#cmd_mandoc">mandoc</a>).  Built to replace <a class="cmd"
					href="#cmd_deroff">deroff</a> for <span class="lang">mdoc</span> UNIX manuals.  Non-standard.  Available
				under the <a class="term" href="#isc_license">ISC license</a> at <a class="external"
					href="http://mdocml.bsd.lv">mdocml.bsd.lv</a>.
			</dd>
			<dt id="cmd_deroff">
				Deroff
			</dt>
			<dd>
				Remove [most] <span class="lang">roff</span> control statements from a file.  This utility uses heuristics
				instead of properly parsing its input.  Originally in Version 7 AT&amp;T UNIX (if not before?) and used heavily
				by the <a class="term" href="#wwb">Writer's Workbench</a>.  Non-standard. Available under the Lucent
				Public License at <a class="external"
					href="http://heirloom.sf.net/tools.html">heirloom.sf.net/tools.html</a> and under the
				<a class="term" href="#gpl">GPL</a> at <a class="external"
					href="http://marmaro.de/prog/deroff/">marmaro.de/prog/deroff</a>.
			</dd>
			<dt id="cmd_diction">
				Diction
			</dt>
			<dd>
				Checks the diction of a (German or English) document.  Originally in the Version 6 AT&amp;T UNIX <a class="term"
					href="#wwb">Writer's Workbench</a>.  Non-standard. A <a class="term" href="#gpl">GPL</a>
				version is available at <a class="external" href="https://www.gnu.org/s/diction/">www.gnu.org/s/diction</a>.
			</dd>
			<dt id="cmd_ditroff">
				Ditroff
			</dt>
			<dd>
				A historical utility merging the code-bases of the original <a class="cmd" href="#cmd_nroff">nroff</a> and <a
					class="cmd" href="#cmd_troff">troff</a> into a device-independent utility.  All modern <a class="cmd"
					href="#cmd_nroff">nroff</a> and <a class="cmd" href="#cmd_troff">troff</a> utilities are implemented by a
				<span class="cmd">ditroff</span> implementation such as <a href="#cmd_groff" class="cmd">groff</a>.  A version
				of the pre-<a href="#cmd_groff" class="cmd">groff</a> utility is available under the Lucent Public License at <a
					class="external"
					href="http://heirloom.sf.net/doctools.html">heirloom.sf.net/doctools.html</a>.
			</dd>
			<dt id="cmd_dump">
				Dump
			</dt>
			<dd>
				Backup a file-system.  This utility isn't standardised, but appears on most modern <a class="term"
					href="#unix">UNIX</a> implementations regardless.  Dumped file-systems may be restored with
				the dual <a class="cmd" href="#cmd_restore">restore</a> utility.
			</dd>
			<dt id="cmd_ed">
				Ed
			</dt>
			<dd>
				Edit a file line by line on a <a class="term" href="#terminal">terminal</a>.  This utility is
				standardised by <a class="term" href="#posix">POSIX</a>.1-2008.  It is the first editor to be
				bundled with UNIX, extending to Version 1 AT&amp;T <a class="term" href="#unix">UNIX</a>.
			</dd>
			<dt id="cmd_ex">
				Ex
			</dt>
			<dd>
				Extends <a href="#cmd_ed" class="cmd">ed</a> to operate in visual (screen) mode.  This utility is standardised
				by <a class="term" href="#posix">POSIX</a>.1-2008.  It first appeared in Version 8 AT&amp;T <a
					class="term" href="#unix">UNIX</a>, and is usually invoked as a special mode of <a
					class="cmd" href="#cmd_vi">vi</a>.
			</dd>
			<dt id="cmd_fsck">
				Fsck
			</dt>
			<dd>
				A file-system checker.  Although not standardised, this utility is present on most <a class="term"
					href="#unix">UNIX</a> systems.
			</dd>
			<dt id="cmd_groff">
				Groff
			</dt>
			<dd>
				The <a href="#gnu" class="term">GNU</a> re-implementation of <a class="cmd"
					href="#cmd_ditroff">ditroff</a>, thus providing <a class="cmd" href="#cmd_troff">troff</a> and <a
					class="cmd" href="#cmd_nroff">nroff</a> utilities.  Non-standard.  Available under the <a class="term"
					href="#gpl">GPL</a> at <a class="external"
					href="https://www.gnu.org/s/groff/">www.gnu.org/s/groff</a>.
			</dd>
			<dt id="cmd_ispell">
				Ispell
			</dt>
			<dd>
				A re-write of <a class="cmd" href="#cmd_spell">spell</a> for international dictionaries.  Non-standard.
				Available at <a class="external"
					href="http://lasr.cs.ucla.edu/geoff/ispell.html">lasr.cs.ucla.edu/geoff/ispell.html</a> under its own
				license.
			</dd>
			<dt id="cmd_ls">
				Ls
			</dt>
			<dd>
				List the contents of a file-system directory.  This utility is standardised by <a class="term"
					href="#posix">POSIX</a>.1-2008.
			</dd>
			<dt id="cmd_make">
				Make
			</dt>
			<dd>
				A build system that uses a graph of dependencies (by a file's last modified date) to determine when a target
				needs to be rebuilt.  This utility is standardised by <a class="term" href="#posix">POSIX</a>.1-2008
				and was first released in Version 7 AT&amp;T <a href="#unix" class="term">UNIX</a>.  It has two
				somewhat incompatible implementations, as the standardised syntax is fairly limited: under the <a class="term"
					href="#gpl">GPL</a> at <a class="external"
					href="https://www.gnu.org/software/make/">www.gnu.org/software/make</a>, referred to as <a class="term"
					href="#gnu">GNU</a> make; or distributed with <a class="term"
					href="#bsd_unix">BSD UNIX</a> systems as BSD make.
			</dd>
			<dt id="cmd_man">
				Man
			</dt>
			<dd>
				A <a class="term" href="#posix">POSIX</a>.1-2008 standardised utility for viewing UNIX manpages.
				The standard document only specifies that it accepts a name and returns output: no more.  <span
					class="cmd">man</span> usually looks up the manual to display in a set of directories reserved for
				manuals, then either pages pre-formatted manuals to the screen (<a href="#cat_pages"
					class="term">cat pages</a>) or formats it on the spot with <a class="term" href="#cmd_nroff">nroff</a>
				or <a class="term" href="#cmd_mandoc">mandoc</a>.
			</dd>
			<dt id="cmd_mandoc">
				Mandoc
			</dt>
			<dd>
				A specialised formatter for UNIX manuals designed to replace <a class="cmd" href="#cmd_groff">groff</a> for UNIX
				manual input.  Non-standard.  <a class="term" href="#isc_license">ISC licensed</a>.  Available at <a
					class="external" href="http://mdocml.bsd.lv">mdocml.bsd.lv</a>.
			</dd>
			<dt id="cmd_nroff">
				Nroff
			</dt>
			<dd>
				A re-write of the original formatter for the <span class="lang">roff</span> language (the name deriving from new
				roff).  Built to accomodate for <a class="term" href="#terminal">terminals</a>.  Modern uses of this
				utility are actually through a re-write, <a class="cmd" href="#cmd_ditroff">ditroff</a>.
			</dd>
			<dt id="cmd_restore">
				Restore
			</dt>
			<dd>
				The dual to <a class="cmd" href="#cmd_dump">dump</a>: restores a dumped file-system.  This utility is not
				standardised, but found on most <a class="term" href="#unix">UNIX</a> operating systems anyway.
			</dd>
			<dt id="cmd_sccs">
				Sccs
			</dt>
			<dd>
				Historically the dominant revision control system for <a class="term" href="#unix">UNIX</a> systems,
				and standardised by <a class="term" href="#posix">POSIX</a>.1-2008.  Despite being standardised, few
				UNIX systems include this utility.  It has largely been replaced by <a href="#cmd_cvs" class="cmd">cvs</a>.
			</dd>
			<dt id="cmd_spell">
				Spell
			</dt>
			<dd>
				The original (English-only) UNIX spell-checker distributed with Version 6 AT&amp;T UNIX.  Non-standard. <a
					class="term" href="#bsd_license">BSD licensed</a> and available at <a class="external"
					href="https://code.google.com/p/unix-spell/">code.google.com/p/unix-spell</a>.  Also may be emulated by
				<a class="cmd" href="#cmd_ispell">ispell</a> and <a class="cmd" href="#cmd_aspell">aspell</a>.
			</dd>
			<dt id="cmd_tail">
				Tail
			</dt>
			<dd>
				A standard <a class="term" href="#posix">POSIX</a>.1-2008 utility for outputting parts of a file.
			</dd>
			<dt id="cmd_troff">
				Troff
			</dt>
			<dd>
				Traditional name of a formatter for the <span class="lang">roff</span> langage.  First released in Version 6
				AT&amp;T UNIX as a printer and graphical-device version of <a class="cmd" href="#cmd_nroff">nroff</a> (the name
				deriving from typesetter roff).  Modern uses of this utility are actually through a re-write, <a class="cmd"
					href="#cmd_ditroff">ditroff</a>.
			</dd>
			<dt id="cmd_vi">
				Vi
			</dt>
			<dd>
				Extends <a href="#cmd_ed" class="cmd">ed</a> to operate in fully visual (screen) mode, extending <a
					href="#cmd_ex" class="cmd">ex</a> in its display handling capability.  This utility is standardised by
				<a class="term" href="#posix">POSIX</a>.1-2008.  It first appeared in Version 8 AT&amp;T <a
					class="term" href="#unix">UNIX</a>.
			</dd>
			<dt id="cmd_vim">
				Vim
			</dt>
			<dd>
				A popular implementation of the <a class="cmd" href="#cmd_vi">vi</a> editor.  It is distributed under a custom
				<a href="#gpl" class="term">GPL</a>-like license at <a class="external"
					href="http://www.vim.org/">www.vim.org</a>.
			</dd>
		</dl>
	</div>
	</body>
</html>
